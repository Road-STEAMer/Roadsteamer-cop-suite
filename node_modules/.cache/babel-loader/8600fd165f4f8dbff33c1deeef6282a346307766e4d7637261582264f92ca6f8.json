{"ast":null,"code":"$(function () {\n  var $form = $(\"form.awesome-edit-config\");\n  if ($form.length > 0) {\n    $form.find(\"input, textarea, select\").on(\"change\", function () {\n      $form.data(\"changed\", true);\n    });\n    var safePath = $form.data(\"safe-path\").split(\"?\")[0];\n    $(document).on(\"click\", \"a\", function (event) {\n      window.exitUrl = event.currentTarget.href;\n    });\n    $(document).on(\"submit\", \"form\", function (event) {\n      window.exitUrl = event.currentTarget.action;\n    });\n    window.addEventListener(\"beforeunload\", function (event) {\n      var exitUrl = window.exitUrl;\n      var hasChanged = $form.data(\"changed\");\n      window.exitUrl = null;\n      if (!hasChanged || exitUrl && exitUrl.includes(safePath)) {\n        return null;\n      }\n      event.returnValue = true;\n      return true;\n    });\n  }\n});","map":{"version":3,"names":["$","$form","length","find","on","data","safePath","split","document","event","window","exitUrl","currentTarget","href","action","addEventListener","hasChanged","includes","returnValue"],"sources":["/home/daniele/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/admin/form_exit_warn.js"],"sourcesContent":["$(() => {\n  const $form = $(\"form.awesome-edit-config\");\n  if ($form.length > 0) {\n    $form.find(\"input, textarea, select\").on(\"change\", () => {\n      $form.data(\"changed\", true);\n    });\n\n    const safePath = $form.data(\"safe-path\").split(\"?\")[0];\n    $(document).on(\"click\", \"a\", (event) => {\n      window.exitUrl = event.currentTarget.href;\n    });\n    $(document).on(\"submit\", \"form\", (event) => {\n      window.exitUrl = event.currentTarget.action;\n    });\n\n    window.addEventListener(\"beforeunload\", (event) => {\n      const exitUrl = window.exitUrl;\n      const hasChanged = $form.data(\"changed\");\n      window.exitUrl = null;\n\n      if (!hasChanged || (exitUrl && exitUrl.includes(safePath))) {\n        return null;\n      }\n\n      event.returnValue = true;\n      return true;\n    });\n  }\n});\n"],"mappings":"AAAAA,CAAC,CAAC,YAAM;EACN,IAAMC,KAAK,GAAGD,CAAC,CAAC,0BAA0B,CAAC;EAC3C,IAAIC,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE;IACpBD,KAAK,CAACE,IAAI,CAAC,yBAAyB,CAAC,CAACC,EAAE,CAAC,QAAQ,EAAE,YAAM;MACvDH,KAAK,CAACI,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC;IAC7B,CAAC,CAAC;IAEF,IAAMC,QAAQ,GAAGL,KAAK,CAACI,IAAI,CAAC,WAAW,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACtDP,CAAC,CAACQ,QAAQ,CAAC,CAACJ,EAAE,CAAC,OAAO,EAAE,GAAG,EAAE,UAACK,KAAK,EAAK;MACtCC,MAAM,CAACC,OAAO,GAAGF,KAAK,CAACG,aAAa,CAACC,IAAI;IAC3C,CAAC,CAAC;IACFb,CAAC,CAACQ,QAAQ,CAAC,CAACJ,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,UAACK,KAAK,EAAK;MAC1CC,MAAM,CAACC,OAAO,GAAGF,KAAK,CAACG,aAAa,CAACE,MAAM;IAC7C,CAAC,CAAC;IAEFJ,MAAM,CAACK,gBAAgB,CAAC,cAAc,EAAE,UAACN,KAAK,EAAK;MACjD,IAAME,OAAO,GAAGD,MAAM,CAACC,OAAO;MAC9B,IAAMK,UAAU,GAAGf,KAAK,CAACI,IAAI,CAAC,SAAS,CAAC;MACxCK,MAAM,CAACC,OAAO,GAAG,IAAI;MAErB,IAAI,CAACK,UAAU,IAAKL,OAAO,IAAIA,OAAO,CAACM,QAAQ,CAACX,QAAQ,CAAE,EAAE;QAC1D,OAAO,IAAI;MACb;MAEAG,KAAK,CAACS,WAAW,GAAG,IAAI;MACxB,OAAO,IAAI;IACb,CAAC,CAAC;EACJ;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}