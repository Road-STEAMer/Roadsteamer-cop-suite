{"ast":null,"code":"import { getDictionary } from \"src/decidim/i18n\";\nimport html from \"src/decidim/editor/utilities/html\";\nimport iconsUrl from \"images/decidim/remixicon.symbol.svg\";\nvar createIcon = function createIcon(iconName) {\n  return \"<svg class=\\\"editor-toolbar-icon\\\" role=\\\"img\\\" aria-hidden=\\\"true\\\">\\n    <use href=\\\"\".concat(iconsUrl, \"#ri-\").concat(iconName, \"\\\" />\\n  </svg>\");\n};\nvar createEditorToolbarGroup = function createEditorToolbarGroup() {\n  return html(\"div\").dom(function (el) {\n    return el.classList.add(\"editor-toolbar-group\");\n  });\n};\nvar createEditorToolbarToggle = function createEditorToolbarToggle(editor, _ref) {\n  var type = _ref.type,\n    label = _ref.label,\n    icon = _ref.icon,\n    action = _ref.action,\n    _ref$activatable = _ref.activatable,\n    activatable = _ref$activatable === void 0 ? true : _ref$activatable;\n  return html(\"button\").dom(function (ctrl) {\n    ctrl.classList.add(\"editor-toolbar-control\");\n    ctrl.dataset.editorType = type;\n    if (activatable) {\n      ctrl.dataset.editorSelectionType = type;\n    }\n    ctrl.type = \"button\";\n    ctrl.ariaLabel = label;\n    ctrl.title = label;\n    ctrl.innerHTML = createIcon(icon);\n    ctrl.addEventListener(\"click\", function (ev) {\n      ev.preventDefault();\n      editor.commands.focus();\n      action();\n    });\n  });\n};\nvar createEditorToolbarSelect = function createEditorToolbarSelect(editor, _ref2) {\n  var type = _ref2.type,\n    label = _ref2.label,\n    options = _ref2.options,\n    action = _ref2.action,\n    _ref2$activatable = _ref2.activatable,\n    activatable = _ref2$activatable === void 0 ? true : _ref2$activatable;\n  return html(\"select\").dom(function (ctrl) {\n    ctrl.classList.add(\"editor-toolbar-control\", \"!pr-8\");\n    ctrl.dataset.editorType = type;\n    if (activatable) {\n      ctrl.dataset.editorSelectionType = type;\n    }\n    ctrl.ariaLabel = label;\n    ctrl.title = label;\n    options.forEach(function (_ref3) {\n      var optionLabel = _ref3.label,\n        value = _ref3.value;\n      var option = document.createElement(\"option\");\n      option.setAttribute(\"value\", value);\n      option.textContent = optionLabel;\n      ctrl.appendChild(option);\n    });\n    ctrl.addEventListener(\"change\", function () {\n      editor.commands.focus();\n      action(ctrl.value);\n    });\n  });\n};\n\n/**\n * Creates the editor toolbar for the given editor instance.\n *\n * @param {Editor} editor An instance of the rich text editor.\n * @returns {HTMLElement} The toolbar element\n */\nexport default function createEditorToolbar(editor) {\n  var i18n = getDictionary(\"editor.toolbar\");\n  var supported = {\n    nodes: [],\n    marks: [],\n    extensions: []\n  };\n  editor.extensionManager.extensions.forEach(function (ext) {\n    if (ext.type === \"node\") {\n      supported.nodes.push(ext.name);\n    } else if (ext.type === \"mark\") {\n      supported.marks.push(ext.name);\n    } else if (ext.type === \"extension\") {\n      supported.extensions.push(ext.name);\n    }\n  });\n\n  // Create the toolbar element\n  var toolbar = html(\"div\").dom(function (el) {\n    return el.classList.add(\"editor-toolbar\");\n  }).append(\n  // Text style controls\n  createEditorToolbarGroup(editor).append(createEditorToolbarSelect(editor, {\n    type: \"heading\",\n    label: i18n[\"control.heading\"],\n    options: [{\n      value: \"normal\",\n      label: i18n[\"textStyle.normal\"]\n    }, {\n      value: 1,\n      label: i18n[\"textStyle.heading\"].replace(\"%level%\", 1)\n    }, {\n      value: 2,\n      label: i18n[\"textStyle.heading\"].replace(\"%level%\", 2)\n    }, {\n      value: 3,\n      label: i18n[\"textStyle.heading\"].replace(\"%level%\", 3)\n    }, {\n      value: 4,\n      label: i18n[\"textStyle.heading\"].replace(\"%level%\", 4)\n    }, {\n      value: 5,\n      label: i18n[\"textStyle.heading\"].replace(\"%level%\", 5)\n    }, {\n      value: 6,\n      label: i18n[\"textStyle.heading\"].replace(\"%level%\", 6)\n    }],\n    action: function action(value) {\n      if (value === \"normal\") {\n        editor.commands.setParagraph();\n      } else {\n        editor.commands.toggleHeading({\n          level: parseInt(value, 10)\n        });\n      }\n    }\n  }).render(supported.nodes.includes(\"heading\")))).append(\n  // Basic styling controls\n  createEditorToolbarGroup(editor).append(createEditorToolbarToggle(editor, {\n    type: \"bold\",\n    icon: \"bold\",\n    label: i18n[\"control.bold\"],\n    action: function action() {\n      return editor.commands.toggleBold();\n    }\n  }).render(supported.marks.includes(\"bold\")), createEditorToolbarToggle(editor, {\n    type: \"italic\",\n    icon: \"italic\",\n    label: i18n[\"control.italic\"],\n    action: function action() {\n      return editor.commands.toggleItalic();\n    }\n  }).render(supported.marks.includes(\"italic\")), createEditorToolbarToggle(editor, {\n    type: \"underline\",\n    icon: \"underline\",\n    label: i18n[\"control.underline\"],\n    action: function action() {\n      return editor.commands.toggleUnderline();\n    }\n  }).render(supported.marks.includes(\"underline\")), createEditorToolbarToggle(editor, {\n    type: \"hardBreak\",\n    icon: \"text-wrap\",\n    label: i18n[\"control.hardBreak\"],\n    activatable: false,\n    action: function action() {\n      return editor.commands.setHardBreak();\n    }\n  }).render(supported.nodes.includes(\"hardBreak\")))).append(\n  // List controls\n  createEditorToolbarGroup(editor).append(createEditorToolbarToggle(editor, {\n    type: \"orderedList\",\n    icon: \"list-ordered\",\n    label: i18n[\"control.orderedList\"],\n    action: function action() {\n      return editor.commands.toggleOrderedList();\n    }\n  }).render(supported.nodes.includes(\"orderedList\")), createEditorToolbarToggle(editor, {\n    type: \"bulletList\",\n    icon: \"list-unordered\",\n    label: i18n[\"control.bulletList\"],\n    action: function action() {\n      return editor.commands.toggleBulletList();\n    }\n  }).render(supported.nodes.includes(\"bulletList\")))).append(\n  // Link and erase styles\n  createEditorToolbarGroup(editor).append(createEditorToolbarToggle(editor, {\n    type: \"link\",\n    icon: \"link\",\n    label: i18n[\"control.link\"],\n    action: function action() {\n      return editor.commands.linkDialog();\n    }\n  }).render(supported.marks.includes(\"link\")), createEditorToolbarToggle(editor, {\n    type: \"common:eraseStyles\",\n    icon: \"eraser-line\",\n    label: i18n[\"control.common.eraseStyles\"],\n    activatable: false,\n    action: function action() {\n      if (editor.isActive(\"link\") && editor.view.state.selection.empty) {\n        var originalPos = editor.view.state.selection.anchor;\n        editor.chain().focus().extendMarkRange(\"link\").unsetLink().setTextSelection(originalPos).run();\n      } else {\n        editor.chain().focus().clearNodes().unsetAllMarks().run();\n      }\n    }\n  }).render(supported.nodes.includes(\"heading\") || supported.marks.includes(\"bold\") || supported.marks.includes(\"italic\") || supported.marks.includes(\"underline\") || supported.nodes.includes(\"hardBreak\") || supported.nodes.includes(\"orderedList\") || supported.nodes.includes(\"bulletList\") || supported.marks.includes(\"link\")))).append(\n  // Block styling\n  createEditorToolbarGroup(editor).append(createEditorToolbarToggle(editor, {\n    type: \"codeBlock\",\n    icon: \"code-line\",\n    label: i18n[\"control.codeBlock\"],\n    action: function action() {\n      return editor.commands.toggleCodeBlock();\n    }\n  }).render(supported.nodes.includes(\"codeBlock\")), createEditorToolbarToggle(editor, {\n    type: \"blockquote\",\n    icon: \"double-quotes-l\",\n    label: i18n[\"control.blockquote\"],\n    action: function action() {\n      return editor.commands.toggleBlockquote();\n    }\n  }).render(supported.nodes.includes(\"blockquote\")))).append(\n  // Indent and outdent\n  createEditorToolbarGroup(editor).append(createEditorToolbarToggle(editor, {\n    type: \"indent:indent\",\n    icon: \"indent-increase\",\n    label: i18n[\"control.indent.indent\"],\n    activatable: false,\n    action: function action() {\n      return editor.commands.indent();\n    }\n  }).render(supported.extensions.includes(\"indent\")), createEditorToolbarToggle(editor, {\n    type: \"indent:outdent\",\n    icon: \"indent-decrease\",\n    label: i18n[\"control.indent.outdent\"],\n    activatable: false,\n    action: function action() {\n      return editor.commands.outdent();\n    }\n  }).render(supported.extensions.includes(\"indent\")))).append(\n  // Multimedia\n  createEditorToolbarGroup(editor).append(createEditorToolbarToggle(editor, {\n    type: \"videoEmbed\",\n    icon: \"video-line\",\n    label: i18n[\"control.videoEmbed\"],\n    action: function action() {\n      return editor.commands.videoEmbedDialog();\n    }\n  }).render(supported.nodes.includes(\"videoEmbed\")), createEditorToolbarToggle(editor, {\n    type: \"image\",\n    icon: \"image-line\",\n    label: i18n[\"control.image\"],\n    action: function action() {\n      return editor.commands.imageDialog();\n    }\n  }).render(supported.nodes.includes(\"image\")))).render();\n  var selectionControls = toolbar.querySelectorAll(\".editor-toolbar-control[data-editor-selection-type]\");\n  var headingSelect = toolbar.querySelector(\".editor-toolbar-control[data-editor-type='heading']\");\n  var selectionUpdated = function selectionUpdated() {\n    if (editor.isActive(\"heading\")) {\n      var _editor$getAttributes = editor.getAttributes(\"heading\"),\n        level = _editor$getAttributes.level;\n      headingSelect.value = \"\".concat(level);\n    } else if (headingSelect) {\n      headingSelect.value = \"normal\";\n    }\n    selectionControls.forEach(function (ctrl) {\n      if (editor.isActive(ctrl.dataset.editorSelectionType)) {\n        ctrl.classList.add(\"active\");\n      } else {\n        ctrl.classList.remove(\"active\");\n      }\n    });\n  };\n  editor.on(\"update\", selectionUpdated);\n  editor.on(\"selectionUpdate\", selectionUpdated);\n  return toolbar;\n}\n;","map":{"version":3,"names":["getDictionary","html","iconsUrl","createIcon","iconName","concat","createEditorToolbarGroup","dom","el","classList","add","createEditorToolbarToggle","editor","_ref","type","label","icon","action","_ref$activatable","activatable","ctrl","dataset","editorType","editorSelectionType","ariaLabel","title","innerHTML","addEventListener","ev","preventDefault","commands","focus","createEditorToolbarSelect","_ref2","options","_ref2$activatable","forEach","_ref3","optionLabel","value","option","document","createElement","setAttribute","textContent","appendChild","createEditorToolbar","i18n","supported","nodes","marks","extensions","extensionManager","ext","push","name","toolbar","append","replace","setParagraph","toggleHeading","level","parseInt","render","includes","toggleBold","toggleItalic","toggleUnderline","setHardBreak","toggleOrderedList","toggleBulletList","linkDialog","isActive","view","state","selection","empty","originalPos","anchor","chain","extendMarkRange","unsetLink","setTextSelection","run","clearNodes","unsetAllMarks","toggleCodeBlock","toggleBlockquote","indent","outdent","videoEmbedDialog","imageDialog","selectionControls","querySelectorAll","headingSelect","querySelector","selectionUpdated","_editor$getAttributes","getAttributes","remove","on"],"sources":["/home/daniele/decidim_idra-main/app/packs/src/decidim/editor/toolbar.js"],"sourcesContent":["import { getDictionary } from \"src/decidim/i18n\";\nimport html from \"src/decidim/editor/utilities/html\";\n\nimport iconsUrl from \"images/decidim/remixicon.symbol.svg\";\n\nconst createIcon = (iconName) => {\n  return `<svg class=\"editor-toolbar-icon\" role=\"img\" aria-hidden=\"true\">\n    <use href=\"${iconsUrl}#ri-${iconName}\" />\n  </svg>`;\n};\n\nconst createEditorToolbarGroup = () => {\n  return html(\"div\").dom((el) => el.classList.add(\"editor-toolbar-group\"));\n};\n\nconst createEditorToolbarToggle = (editor, { type, label, icon, action, activatable = true }) => {\n  return html(\"button\").dom((ctrl) => {\n    ctrl.classList.add(\"editor-toolbar-control\");\n    ctrl.dataset.editorType = type;\n    if (activatable) {\n      ctrl.dataset.editorSelectionType = type;\n    }\n    ctrl.type = \"button\";\n    ctrl.ariaLabel = label;\n    ctrl.title = label;\n    ctrl.innerHTML = createIcon(icon);\n    ctrl.addEventListener(\"click\", (ev) => {\n      ev.preventDefault();\n      editor.commands.focus();\n      action();\n    })\n  });\n};\n\nconst createEditorToolbarSelect = (editor, { type, label, options, action, activatable = true }) => {\n  return html(\"select\").dom((ctrl) => {\n    ctrl.classList.add(\"editor-toolbar-control\", \"!pr-8\");\n    ctrl.dataset.editorType = type;\n    if (activatable) {\n      ctrl.dataset.editorSelectionType = type;\n    }\n    ctrl.ariaLabel = label;\n    ctrl.title = label;\n    options.forEach(({ label: optionLabel, value }) => {\n      const option = document.createElement(\"option\");\n      option.setAttribute(\"value\", value);\n      option.textContent = optionLabel;\n      ctrl.appendChild(option);\n    });\n    ctrl.addEventListener(\"change\", () => {\n      editor.commands.focus();\n      action(ctrl.value);\n    });\n  })\n};\n\n/**\n * Creates the editor toolbar for the given editor instance.\n *\n * @param {Editor} editor An instance of the rich text editor.\n * @returns {HTMLElement} The toolbar element\n */\nexport default function createEditorToolbar(editor) {\n  const i18n = getDictionary(\"editor.toolbar\");\n\n  const supported = { nodes: [], marks: [], extensions: [] };\n  editor.extensionManager.extensions.forEach((ext) => {\n    if (ext.type === \"node\") {\n      supported.nodes.push(ext.name);\n    } else if (ext.type === \"mark\") {\n      supported.marks.push(ext.name);\n    } else if (ext.type === \"extension\") {\n      supported.extensions.push(ext.name);\n    }\n  });\n\n  // Create the toolbar element\n  const toolbar = html(\"div\").\n    dom((el) => el.classList.add(\"editor-toolbar\")).\n    append(\n      // Text style controls\n      createEditorToolbarGroup(editor).append(\n        createEditorToolbarSelect(editor, {\n          type: \"heading\",\n          label: i18n[\"control.heading\"],\n          options: [\n            { value: \"normal\", label: i18n[\"textStyle.normal\"] },\n            { value: 1, label: i18n[\"textStyle.heading\"].replace(\"%level%\", 1) },\n            { value: 2, label: i18n[\"textStyle.heading\"].replace(\"%level%\", 2) },\n            { value: 3, label: i18n[\"textStyle.heading\"].replace(\"%level%\", 3) },\n            { value: 4, label: i18n[\"textStyle.heading\"].replace(\"%level%\", 4) },\n            { value: 5, label: i18n[\"textStyle.heading\"].replace(\"%level%\", 5) },\n            { value: 6, label: i18n[\"textStyle.heading\"].replace(\"%level%\", 6) },\n          ],\n          action: (value) => {\n            if (value === \"normal\") {\n              editor.commands.setParagraph();\n            } else {\n              editor.commands.toggleHeading({ level: parseInt(value, 10) });\n            }\n          }\n        }).render(supported.nodes.includes(\"heading\"))\n      )\n    ).\n    append(\n      // Basic styling controls\n      createEditorToolbarGroup(editor).append(\n        createEditorToolbarToggle(editor, {\n          type: \"bold\",\n          icon: \"bold\",\n          label: i18n[\"control.bold\"],\n          action: () => editor.commands.toggleBold()\n        }).render(supported.marks.includes(\"bold\")),\n        createEditorToolbarToggle(editor, {\n          type: \"italic\",\n          icon: \"italic\",\n          label: i18n[\"control.italic\"],\n          action: () => editor.commands.toggleItalic()\n        }).render(supported.marks.includes(\"italic\")),\n        createEditorToolbarToggle(editor, {\n          type: \"underline\",\n          icon: \"underline\",\n          label: i18n[\"control.underline\"],\n          action: () => editor.commands.toggleUnderline()\n        }).render(supported.marks.includes(\"underline\")),\n        createEditorToolbarToggle(editor, {\n          type: \"hardBreak\",\n          icon: \"text-wrap\",\n          label: i18n[\"control.hardBreak\"],\n          activatable: false,\n          action: () => editor.commands.setHardBreak()\n        }).render(supported.nodes.includes(\"hardBreak\"))\n      )\n    ).\n    append(\n      // List controls\n      createEditorToolbarGroup(editor).append(\n        createEditorToolbarToggle(editor, {\n          type: \"orderedList\",\n          icon: \"list-ordered\",\n          label: i18n[\"control.orderedList\"],\n          action: () => editor.commands.toggleOrderedList()\n        }).render(supported.nodes.includes(\"orderedList\")),\n        createEditorToolbarToggle(editor, {\n          type: \"bulletList\",\n          icon: \"list-unordered\",\n          label: i18n[\"control.bulletList\"],\n          action: () => editor.commands.toggleBulletList()\n        }).render(supported.nodes.includes(\"bulletList\"))\n      )\n    ).\n    append(\n      // Link and erase styles\n      createEditorToolbarGroup(editor).append(\n        createEditorToolbarToggle(editor, {\n          type: \"link\",\n          icon: \"link\",\n          label: i18n[\"control.link\"],\n          action: () => editor.commands.linkDialog()\n        }).render(supported.marks.includes(\"link\")),\n        createEditorToolbarToggle(editor, {\n          type: \"common:eraseStyles\",\n          icon: \"eraser-line\",\n          label: i18n[\"control.common.eraseStyles\"],\n          activatable: false,\n          action: () => {\n            if (editor.isActive(\"link\") && editor.view.state.selection.empty) {\n              const originalPos = editor.view.state.selection.anchor;\n              editor.chain().focus().extendMarkRange(\"link\").unsetLink().setTextSelection(originalPos).run();\n            } else {\n              editor.chain().focus().clearNodes().unsetAllMarks().run();\n            }\n          }\n        }).render(\n          supported.nodes.includes(\"heading\") ||\n          supported.marks.includes(\"bold\") ||\n          supported.marks.includes(\"italic\") ||\n          supported.marks.includes(\"underline\") ||\n          supported.nodes.includes(\"hardBreak\") ||\n          supported.nodes.includes(\"orderedList\") ||\n          supported.nodes.includes(\"bulletList\") ||\n          supported.marks.includes(\"link\")\n        )\n      )\n    ).\n    append(\n      // Block styling\n      createEditorToolbarGroup(editor).append(\n        createEditorToolbarToggle(editor, {\n          type: \"codeBlock\",\n          icon: \"code-line\",\n          label: i18n[\"control.codeBlock\"],\n          action: () => editor.commands.toggleCodeBlock()\n        }).render(supported.nodes.includes(\"codeBlock\")),\n        createEditorToolbarToggle(editor, {\n          type: \"blockquote\",\n          icon: \"double-quotes-l\",\n          label: i18n[\"control.blockquote\"],\n          action: () => editor.commands.toggleBlockquote()\n        }).render(supported.nodes.includes(\"blockquote\"))\n      )\n    ).\n    append(\n      // Indent and outdent\n      createEditorToolbarGroup(editor).append(\n        createEditorToolbarToggle(editor, {\n          type: \"indent:indent\",\n          icon: \"indent-increase\",\n          label: i18n[\"control.indent.indent\"],\n          activatable: false,\n          action: () => editor.commands.indent()\n        }).render(supported.extensions.includes(\"indent\")),\n        createEditorToolbarToggle(editor, {\n          type: \"indent:outdent\",\n          icon: \"indent-decrease\",\n          label: i18n[\"control.indent.outdent\"],\n          activatable: false,\n          action: () => editor.commands.outdent()\n        }).render(supported.extensions.includes(\"indent\"))\n      )\n    ).\n    append(\n      // Multimedia\n      createEditorToolbarGroup(editor).append(\n        createEditorToolbarToggle(editor, {\n          type: \"videoEmbed\",\n          icon: \"video-line\",\n          label: i18n[\"control.videoEmbed\"],\n          action: () => editor.commands.videoEmbedDialog()\n        }).render(supported.nodes.includes(\"videoEmbed\")),\n        createEditorToolbarToggle(editor, {\n          type: \"image\",\n          icon: \"image-line\",\n          label: i18n[\"control.image\"],\n          action: () => editor.commands.imageDialog()\n        }).render(supported.nodes.includes(\"image\"))\n      )\n    ).\n    render()\n  ;\n\n  const selectionControls = toolbar.querySelectorAll(\".editor-toolbar-control[data-editor-selection-type]\");\n  const headingSelect = toolbar.querySelector(\".editor-toolbar-control[data-editor-type='heading']\");\n  const selectionUpdated = () => {\n    if (editor.isActive(\"heading\")) {\n      const { level } = editor.getAttributes(\"heading\");\n      headingSelect.value = `${level}`;\n    } else if (headingSelect) {\n      headingSelect.value = \"normal\";\n    }\n\n    selectionControls.forEach((ctrl) => {\n      if (editor.isActive(ctrl.dataset.editorSelectionType)) {\n        ctrl.classList.add(\"active\");\n      } else {\n        ctrl.classList.remove(\"active\");\n      }\n    });\n  }\n  editor.on(\"update\", selectionUpdated);\n  editor.on(\"selectionUpdate\", selectionUpdated);\n\n  return toolbar;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}