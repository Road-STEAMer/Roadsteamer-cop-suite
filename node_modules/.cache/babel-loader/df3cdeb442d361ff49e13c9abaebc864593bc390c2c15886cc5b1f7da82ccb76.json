{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _regeneratorRuntime() {\n  \"use strict\";\n\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  };\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nimport icon from \"src/decidim/icon\";\nimport { fileNameToTitle } from \"src/decidim/editor/utilities/file\";\nvar createElement = function createElement(template) {\n  var el = document.createElement(\"div\");\n  el.innerHTML = template;\n  return el.firstElementChild;\n};\n\n/**\n * This is a simplified version of the normal upload dialog, uses the same\n * markup as the normal upload dialog to maintain consistency.\n *\n * The functionality differs from the original dialog as this only handles the\n * file uploads for the editor and the purpose is to simply provide the same\n * upload functionality and ability to update the alternative texts for the\n * images within the editor.\n *\n * This works only for the editor and does not store the files in the view\n * inputs as they are only used.\n */\nvar UploadDialog = /*#__PURE__*/function () {\n  function UploadDialog(element, _ref) {\n    var _this = this;\n    var i18n = _ref.i18n,\n      onOpen = _ref.onOpen,\n      onClose = _ref.onClose;\n    _classCallCheck(this, UploadDialog);\n    this.element = element;\n    this.i18n = i18n;\n    this.legacyDesign = Boolean(element.dataset.reveal);\n    this.onOpen = onOpen;\n    this.onClose = onClose;\n    this.values = {\n      src: null,\n      alt: null\n    };\n    this.dropZoneEnabled = true;\n    this.exitMode = \"cancel\";\n    var extra = null;\n    this.messageSection = document.createElement(\"div\");\n    this.currentFileSection = document.createElement(\"div\");\n    this.inputSection = document.createElement(\"div\");\n    if (this.legacyDesign) {\n      this.saveButton = this.element.querySelector(\"button.add-file-file\");\n      this.cancelButton = this.element.querySelector(\"button.cancel-attachment\");\n      this.dropZone = this.element.querySelector(\".dropzone\");\n      var dc = this.element.querySelector(\".dropzone-container\");\n      extra = document.createElement(\"div\");\n      dc.parentNode.insertBefore(extra, dc.nextSibling);\n    } else {\n      this.saveButton = this.element.querySelector(\"button[data-dropzone-save]\");\n      this.cancelButton = this.element.querySelector(\"button[data-dropzone-cancel]\");\n      this.dropZone = this.element.querySelector(\"[data-dropzone]\");\n      extra = document.createElement(\"div\");\n      this.dropZone.parentNode.insertBefore(extra, this.dropZone.nextSibling);\n    }\n    extra.append(this.messageSection);\n    extra.append(this.currentFileSection);\n    if (this.legacyDesign) {\n      extra.append(this.inputSection);\n    } else {\n      this.dropZone.parentNode.querySelector(\".upload-modal__text\").classList.add(\"mb-0\");\n      this.dropZone.parentNode.append(this.inputSection);\n    }\n    this.saveButton.addEventListener(\"click\", function () {\n      _this.exitMode = \"save\";\n    });\n    this.cancelButton.addEventListener(\"click\", function () {\n      _this.exitMode = \"cancel\";\n    });\n    this.dropZone.addEventListener(\"change\", function (event) {\n      event.preventDefault();\n      var files = event.target.files;\n      if (files.length < 1) {\n        return;\n      }\n      _this.uploadFile(files[0]);\n    });\n    var toggleDragover = function toggleDragover(active) {\n      if (active) {\n        _this.dropZone.classList.add(\"is-dragover\");\n        _this.dropZone.querySelectorAll(\".upload-modal__dropzone\").forEach(function (el) {\n          return el.classList.add(\"is-dragover\");\n        });\n      } else {\n        _this.dropZone.classList.remove(\"is-dragover\");\n        _this.dropZone.querySelectorAll(\".upload-modal__dropzone\").forEach(function (el) {\n          return el.classList.remove(\"is-dragover\");\n        });\n      }\n    };\n    var dropEvents = {\n      dragenter: function dragenter(event) {\n        return event.preventDefault();\n      },\n      dragleave: function dragleave() {\n        return toggleDragover(false);\n      },\n      dragover: function dragover(event) {\n        event.preventDefault();\n        toggleDragover(true);\n      },\n      drop: function drop(event) {\n        event.preventDefault();\n        toggleDragover(false);\n        _this.messageSection.innerHTML = \"\";\n        var files = event.dataTransfer.files;\n        if (files.length < 1) {\n          return;\n        }\n        _this.uploadFile(files[0]);\n      }\n    };\n    Object.keys(dropEvents).forEach(function (key) {\n      _this.dropZone.addEventListener(key, dropEvents[key]);\n    });\n    var handleClose = function handleClose() {\n      var titleInput = _this.inputSection.querySelector(\".attachment-title\");\n      if (titleInput) {\n        _this.values.alt = titleInput.value;\n      }\n      if (_this.onClose) {\n        _this.onClose(_this);\n      }\n      if (_this.callback) {\n        _this.callback(_this.exitMode);\n        _this.callback = null;\n      }\n    };\n    if (this.legacyDesign) {\n      $(this.element).on(\"closed.zf.reveal\", handleClose);\n    } else {\n      this.element.addEventListener(\"close.dialog\", function () {\n        return setTimeout(handleClose, 0);\n      });\n    }\n  }\n  _createClass(UploadDialog, [{\n    key: \"getValue\",\n    value: function getValue(key) {\n      return this.values[key];\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      var _this2 = this;\n      var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.exitMode = \"cancel\";\n      return new Promise(function (resolve) {\n        _this2.saveButton.disabled = true;\n        _this2.values = {\n          src: values.src,\n          alt: values.alt\n        };\n        _this2.updateCurrentFile();\n        var titleEl = null;\n        if (_this2.legacyDesign) {\n          titleEl = _this2.element.querySelector(\".reveal__title\");\n        } else {\n          titleEl = _this2.element.querySelector(\"[data-dialog-title]\");\n        }\n        if (values.src && values.src.length > 0) {\n          titleEl.textContent = titleEl.dataset.editlabel;\n        } else {\n          titleEl.textContent = titleEl.dataset.addlabel;\n        }\n        var titleInputHtml = \"\\n        <label>\\n          \".concat(options.inputLabel, \"\\n          <input class=\\\"attachment-title\\\" type=\\\"text\\\" name=\\\"alt\\\">\\n        </label>\\n      \");\n        var titleSection = null;\n        if (_this2.legacyDesign) {\n          titleSection = createElement(\"<div class=\\\"row\\\">\".concat(titleInputHtml, \"</div>\"));\n        } else {\n          titleSection = createElement(\"<div class=\\\"form__wrapper\\\">\".concat(titleInputHtml, \"</div>\"));\n        }\n        titleSection.querySelector(\".attachment-title\").value = values.alt || \"\";\n        _this2.inputSection.innerHTML = \"\";\n        _this2.inputSection.append(titleSection);\n        _this2.uploadHandler = options.uploadHandler;\n        if (_this2.legacyDesign) {\n          $(_this2.element).foundation(\"open\");\n        } else {\n          var dialogId = _this2.element.dataset.dialog;\n          var dialog = window.Decidim.currentDialogs[dialogId];\n          if (dialog) {\n            dialog.open();\n          } else {\n            console.error(\"Upload dialog not initialized for: \".concat(dialogId));\n          }\n        }\n        _this2.callback = resolve;\n        if (_this2.onOpen) {\n          _this2.onOpen(_this2);\n        }\n      });\n    }\n  }, {\n    key: \"updateCurrentFile\",\n    value: function updateCurrentFile(file) {\n      var items = this.dropZone.querySelector(\"[data-dropzone-items]\");\n      if (!this.values.src || this.values.src.length < 1) {\n        if (this.legacyDesign) {\n          this.currentFileSection.innerHTML = \"\";\n        } else {\n          items.setAttribute(\"hidden\", \"hidden\");\n          items.innerHTML = \"\";\n        }\n        return;\n      }\n      this.saveButton.disabled = false;\n      if (this.legacyDesign) {\n        this.currentFileSection.innerHTML = \"\\n        <img src=\\\"\".concat(this.values.src, \"\\\" alt=\\\"\").concat(this.i18n.uploadedFile, \"\\\" style=\\\"max-width:100px\\\">\\n      \");\n      } else if (file) {\n        items.removeAttribute(\"hidden\");\n        items.innerHTML = \"\\n        <li data-filename=\\\"\".concat(file.name, \"\\\" data-state=\\\"validated\\\">\\n          <div data-template=\\\"ok\\\">\\n            <div><img src=\\\"\").concat(this.values.src, \"\\\" alt=\\\"\").concat(this.i18n.uploadedFile, \"\\\"></div>\\n            <span>\").concat(file.name, \"</span>\\n          </div>\\n        </li>\\n      \");\n      }\n    }\n  }, {\n    key: \"uploadFile\",\n    value: function () {\n      var _uploadFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(file) {\n        var response, items, locales, titleInput;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (this.uploadHandler) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              _context.next = 4;\n              return this.uploadHandler(file);\n            case 4:\n              response = _context.sent;\n              if (response.url) {\n                _context.next = 8;\n                break;\n              }\n              if (this.legacyDesign) {\n                this.messageSection.innerHTML = \"<div class=\\\"form-error is-visible\\\">\".concat(response.message, \"</div>\");\n              } else {\n                items = this.dropZone.querySelector(\"[data-dropzone-items]\");\n                locales = JSON.parse(items.dataset.locales);\n                items.removeAttribute(\"hidden\");\n                items.innerHTML = \"\\n          <li data-filename=\\\"\".concat(file.name, \"\\\" data-state=\\\"validated\\\">\\n            <div data-template=\\\"error\\\">\\n              <div>\").concat(icon(\"error-warning-line\"), \"</div>\\n              <div>\\n                <span>\").concat(file.name, \"</span>\\n                <span>\").concat(locales.validation_error, \"</span>\\n                <ul><li>\").concat(response.message, \"</li></ul>\\n              </div>\\n            </div>\\n          </li>\\n        \");\n              }\n              return _context.abrupt(\"return\");\n            case 8:\n              this.values.src = response.url;\n              titleInput = this.inputSection.querySelector(\".attachment-title\");\n              if (titleInput && (!titleInput.value || titleInput.value.length < 1)) {\n                titleInput.value = fileNameToTitle(file.name);\n              }\n              this.updateCurrentFile(file);\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function uploadFile(_x) {\n        return _uploadFile.apply(this, arguments);\n      }\n      return uploadFile;\n    }()\n  }]);\n  return UploadDialog;\n}();\nexport { UploadDialog as default };","map":{"version":3,"names":["_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","_typeof","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","_catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","_toPropertyKey","_createClass","protoProps","staticProps","_toPrimitive","String","input","hint","prim","toPrimitive","res","Number","icon","fileNameToTitle","createElement","template","el","document","innerHTML","firstElementChild","UploadDialog","element","_ref","_this","i18n","onOpen","onClose","legacyDesign","Boolean","dataset","reveal","src","alt","dropZoneEnabled","exitMode","extra","messageSection","currentFileSection","inputSection","saveButton","querySelector","cancelButton","dropZone","dc","parentNode","insertBefore","nextSibling","append","classList","add","addEventListener","event","preventDefault","files","uploadFile","toggleDragover","active","querySelectorAll","remove","dropEvents","dragenter","dragleave","dragover","drop","dataTransfer","handleClose","titleInput","callback","$","on","setTimeout","getValue","toggle","_this2","options","disabled","updateCurrentFile","titleEl","textContent","editlabel","addlabel","titleInputHtml","concat","inputLabel","titleSection","uploadHandler","foundation","dialogId","dialog","window","Decidim","currentDialogs","open","console","file","items","setAttribute","uploadedFile","removeAttribute","_uploadFile","_callee","response","locales","_callee$","_context","url","message","JSON","parse","validation_error","_x","default"],"sources":["/home/daniele/decidim_idra-main/app/packs/src/decidim/editor/common/upload_dialog.js"],"sourcesContent":["import icon from \"src/decidim/icon\";\nimport { fileNameToTitle } from \"src/decidim/editor/utilities/file\";\n\nconst createElement = (template) => {\n  const el = document.createElement(\"div\");\n  el.innerHTML = template;\n  return el.firstElementChild;\n}\n\n/**\n * This is a simplified version of the normal upload dialog, uses the same\n * markup as the normal upload dialog to maintain consistency.\n *\n * The functionality differs from the original dialog as this only handles the\n * file uploads for the editor and the purpose is to simply provide the same\n * upload functionality and ability to update the alternative texts for the\n * images within the editor.\n *\n * This works only for the editor and does not store the files in the view\n * inputs as they are only used.\n */\nexport default class UploadDialog {\n  constructor(element, { i18n, onOpen, onClose }) {\n    this.element = element;\n    this.i18n = i18n;\n    this.legacyDesign = Boolean(element.dataset.reveal);\n    this.onOpen = onOpen;\n    this.onClose = onClose;\n\n    this.values = { src: null, alt: null };\n    this.dropZoneEnabled = true;\n    this.exitMode = \"cancel\";\n\n    let extra = null;\n    this.messageSection = document.createElement(\"div\");\n    this.currentFileSection = document.createElement(\"div\");\n    this.inputSection = document.createElement(\"div\");\n    if (this.legacyDesign) {\n      this.saveButton = this.element.querySelector(\"button.add-file-file\");\n      this.cancelButton = this.element.querySelector(\"button.cancel-attachment\");\n      this.dropZone = this.element.querySelector(\".dropzone\");\n\n      const dc = this.element.querySelector(\".dropzone-container\");\n      extra = document.createElement(\"div\");\n      dc.parentNode.insertBefore(extra, dc.nextSibling);\n    } else {\n      this.saveButton = this.element.querySelector(\"button[data-dropzone-save]\");\n      this.cancelButton = this.element.querySelector(\"button[data-dropzone-cancel]\");\n      this.dropZone = this.element.querySelector(\"[data-dropzone]\");\n\n      extra = document.createElement(\"div\");\n      this.dropZone.parentNode.insertBefore(extra, this.dropZone.nextSibling);\n    }\n\n    extra.append(this.messageSection);\n    extra.append(this.currentFileSection);\n\n    if (this.legacyDesign) {\n      extra.append(this.inputSection);\n    } else {\n      this.dropZone.parentNode.querySelector(\".upload-modal__text\").classList.add(\"mb-0\");\n      this.dropZone.parentNode.append(this.inputSection);\n    }\n\n    this.saveButton.addEventListener(\"click\", () => {\n      this.exitMode = \"save\";\n    });\n    this.cancelButton.addEventListener(\"click\", () => {\n      this.exitMode = \"cancel\";\n    });\n\n    this.dropZone.addEventListener(\"change\", (event) => {\n      event.preventDefault();\n      const files = event.target.files;\n      if (files.length < 1) {\n        return;\n      }\n      this.uploadFile(files[0]);\n    });\n\n    const toggleDragover = (active) => {\n      if (active) {\n        this.dropZone.classList.add(\"is-dragover\");\n        this.dropZone.querySelectorAll(\".upload-modal__dropzone\").forEach((el) => el.classList.add(\"is-dragover\"));\n      } else {\n        this.dropZone.classList.remove(\"is-dragover\");\n        this.dropZone.querySelectorAll(\".upload-modal__dropzone\").forEach((el) => el.classList.remove(\"is-dragover\"));\n      }\n    };\n    const dropEvents = {\n      dragenter: (event) => event.preventDefault(),\n      dragleave: () => toggleDragover(false),\n      dragover: (event) => {\n        event.preventDefault();\n        toggleDragover(true);\n      },\n      drop: (event) => {\n        event.preventDefault();\n        toggleDragover(false);\n        this.messageSection.innerHTML = \"\";\n\n        const files = event.dataTransfer.files;\n        if (files.length < 1) {\n          return;\n        }\n        this.uploadFile(files[0]);\n      }\n    };\n    Object.keys(dropEvents).forEach((key) => {\n      this.dropZone.addEventListener(key, dropEvents[key]);\n    });\n\n    const handleClose = () => {\n      const titleInput = this.inputSection.querySelector(\".attachment-title\");\n      if (titleInput) {\n        this.values.alt = titleInput.value;\n      }\n\n      if (this.onClose) {\n        this.onClose(this);\n      }\n      if (this.callback) {\n        this.callback(this.exitMode);\n        this.callback = null;\n      }\n    };\n    if (this.legacyDesign) {\n      $(this.element).on(\"closed.zf.reveal\", handleClose);\n    } else {\n      this.element.addEventListener(\"close.dialog\", () => setTimeout(handleClose, 0));\n    }\n  }\n\n  getValue(key) {\n    return this.values[key];\n  }\n\n  toggle(values = {}, options = {}) {\n    this.exitMode = \"cancel\";\n\n    return new Promise((resolve) => {\n      this.saveButton.disabled = true;\n      this.values = { src: values.src, alt: values.alt }\n\n      this.updateCurrentFile();\n\n      let titleEl = null;\n      if (this.legacyDesign) {\n        titleEl = this.element.querySelector(\".reveal__title\");\n      } else {\n        titleEl = this.element.querySelector(\"[data-dialog-title]\");\n      }\n\n      if (values.src && values.src.length > 0) {\n        titleEl.textContent = titleEl.dataset.editlabel;\n      } else {\n        titleEl.textContent = titleEl.dataset.addlabel;\n      }\n\n      const titleInputHtml = `\n        <label>\n          ${options.inputLabel}\n          <input class=\"attachment-title\" type=\"text\" name=\"alt\">\n        </label>\n      `;\n\n      let titleSection = null;\n      if (this.legacyDesign) {\n        titleSection = createElement(`<div class=\"row\">${titleInputHtml}</div>`);\n      } else {\n        titleSection = createElement(`<div class=\"form__wrapper\">${titleInputHtml}</div>`);\n      }\n      titleSection.querySelector(\".attachment-title\").value = values.alt || \"\";\n      this.inputSection.innerHTML = \"\";\n      this.inputSection.append(titleSection);\n\n      this.uploadHandler = options.uploadHandler;\n\n      if (this.legacyDesign) {\n        $(this.element).foundation(\"open\");\n      } else {\n        const dialogId = this.element.dataset.dialog;\n        const dialog = window.Decidim.currentDialogs[dialogId];\n        if (dialog) {\n          dialog.open();\n        } else {\n          console.error(`Upload dialog not initialized for: ${dialogId}`);\n        }\n      }\n\n      this.callback = resolve;\n\n      if (this.onOpen) {\n        this.onOpen(this);\n      }\n    });\n  }\n\n  updateCurrentFile(file) {\n    const items = this.dropZone.querySelector(\"[data-dropzone-items]\");\n\n    if (!this.values.src || this.values.src.length < 1) {\n      if (this.legacyDesign) {\n        this.currentFileSection.innerHTML = \"\";\n      } else {\n        items.setAttribute(\"hidden\", \"hidden\");\n        items.innerHTML = \"\";\n      }\n      return;\n    }\n\n    this.saveButton.disabled = false;\n    if (this.legacyDesign) {\n      this.currentFileSection.innerHTML = `\n        <img src=\"${this.values.src}\" alt=\"${this.i18n.uploadedFile}\" style=\"max-width:100px\">\n      `;\n    } else if (file) {\n      items.removeAttribute(\"hidden\");\n      items.innerHTML = `\n        <li data-filename=\"${file.name}\" data-state=\"validated\">\n          <div data-template=\"ok\">\n            <div><img src=\"${this.values.src}\" alt=\"${this.i18n.uploadedFile}\"></div>\n            <span>${file.name}</span>\n          </div>\n        </li>\n      `;\n    }\n  }\n\n  async uploadFile(file) {\n    if (!this.uploadHandler) {\n      return;\n    }\n\n    const response = await this.uploadHandler(file);\n    if (!response.url) {\n      if (this.legacyDesign) {\n        this.messageSection.innerHTML = `<div class=\"form-error is-visible\">${response.message}</div>`;\n      } else {\n        const items = this.dropZone.querySelector(\"[data-dropzone-items]\");\n        const locales = JSON.parse(items.dataset.locales);\n        items.removeAttribute(\"hidden\");\n        items.innerHTML = `\n          <li data-filename=\"${file.name}\" data-state=\"validated\">\n            <div data-template=\"error\">\n              <div>${icon(\"error-warning-line\")}</div>\n              <div>\n                <span>${file.name}</span>\n                <span>${locales.validation_error}</span>\n                <ul><li>${response.message}</li></ul>\n              </div>\n            </div>\n          </li>\n        `;\n      }\n      return;\n    }\n    this.values.src = response.url;\n\n    const titleInput = this.inputSection.querySelector(\".attachment-title\");\n    if (titleInput && (!titleInput.value || titleInput.value.length < 1)) {\n      titleInput.value = fileNameToTitle(file.name);\n    }\n\n    this.updateCurrentFile(file);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}