{"ast":null,"code":"require(\"formBuilder/dist/form-builder.min.js\");\nimport \"src/decidim/decidim_awesome/forms/rich_text_plugin\";\nwindow.CustomFieldsBuilders = window.CustomFieldsBuilders || [];\n$(function () {\n  $(\".awesome-edit-config .proposal_custom_fields_editor\").each(function (_idx, el) {\n    var key = $(el).closest(\".proposal_custom_fields_container\").data(\"key\");\n    // DOCS: https://formbuilder.online/docs\n    window.CustomFieldsBuilders.push({\n      el: el,\n      key: key,\n      config: {\n        i18n: {\n          locale: \"en-US\",\n          location: \"https://cdn.jsdelivr.net/npm/formbuilder-languages@1.1.0/\"\n        },\n        formData: $(\"input[name=\\\"config[proposal_custom_fields][\".concat(key, \"]\\\"]\")).val(),\n        disableFields: [\"button\", \"file\"],\n        disabledActionButtons: [\"save\", \"data\", \"clear\"],\n        disabledAttrs: [\"access\", \"inline\", \"className\"],\n        controlOrder: [\"text\", \"textarea\", \"number\", \"date\", \"checkbox-group\", \"radio-group\", \"select\", \"autocomplete\", \"header\", \"paragraph\"],\n        disabledSubtypes: {\n          // default color as it generate hashtags in decidim (TODO: fix hashtag generator with this)\n          text: [\"color\"],\n          // disable default wysiwyg editors as they present problems\n          textarea: [\"tinymce\", \"quill\"]\n        }\n      },\n      instance: null\n    });\n  });\n  $(document).on(\"formBuilder.create\", function (_event, idx, list) {\n    if (!list[idx]) {\n      return;\n    }\n    $(list[idx].el).formBuilder(list[idx].config).promise.then(function (res) {\n      list[idx].instance = res;\n      // Attach to DOM\n      list[idx].el.FormBuilder = res;\n      // remove spinner\n      $(list[idx].el).find(\".loading-spinner\").remove();\n      // for external use\n      $(document).trigger(\"formBuilder.created\", [list[idx]]);\n      if (idx < list.length) {\n        $(document).trigger(\"formBuilder.create\", [idx + 1, list]);\n      }\n    });\n  });\n  if (window.CustomFieldsBuilders.length) {\n    $(document).trigger(\"formBuilder.create\", [0, window.CustomFieldsBuilders]);\n  }\n  $(\"form.awesome-edit-config\").on(\"submit\", function () {\n    window.CustomFieldsBuilders.forEach(function (builder) {\n      $(\"input[name=\\\"config[proposal_custom_fields][\".concat(builder.key, \"]\\\"]\")).val(builder.instance.actions.getData(\"json\"));\n    });\n  });\n});","map":{"version":3,"names":["require","window","CustomFieldsBuilders","$","each","_idx","el","key","closest","data","push","config","i18n","locale","location","formData","concat","val","disableFields","disabledActionButtons","disabledAttrs","controlOrder","disabledSubtypes","text","textarea","instance","document","on","_event","idx","list","formBuilder","promise","then","res","FormBuilder","find","remove","trigger","length","forEach","builder","actions","getData"],"sources":["/home/daniele/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/admin/custom_fields_builder.js"],"sourcesContent":["require(\"formBuilder/dist/form-builder.min.js\")\nimport \"src/decidim/decidim_awesome/forms/rich_text_plugin\"\n\nwindow.CustomFieldsBuilders = window.CustomFieldsBuilders || [];\n\n$(() => {\n  $(\".awesome-edit-config .proposal_custom_fields_editor\").each((_idx, el) => {\n    const key = $(el).closest(\".proposal_custom_fields_container\").data(\"key\");\n    // DOCS: https://formbuilder.online/docs\n    window.CustomFieldsBuilders.push({\n      el: el,\n      key: key,\n      config: {\n        i18n: {\n          locale: \"en-US\",\n          location: \"https://cdn.jsdelivr.net/npm/formbuilder-languages@1.1.0/\"\n        },\n        formData: $(`input[name=\"config[proposal_custom_fields][${key}]\"]`).val(),\n        disableFields: [\"button\", \"file\"],\n        disabledActionButtons: [\"save\", \"data\", \"clear\"],\n        disabledAttrs: [\n          \"access\",\n          \"inline\",\n          \"className\"\n        ],\n        controlOrder: [\n          \"text\",\n          \"textarea\",\n          \"number\",\n          \"date\",\n          \"checkbox-group\",\n          \"radio-group\",\n          \"select\",\n          \"autocomplete\",\n          \"header\",\n          \"paragraph\"\n        ],\n        disabledSubtypes: {\n          // default color as it generate hashtags in decidim (TODO: fix hashtag generator with this)\n          text: [\"color\"], \n          // disable default wysiwyg editors as they present problems\n          textarea: [\"tinymce\", \"quill\"]\n        }\n      },\n      instance: null\n    });\n  });\n\n  $(document).on(\"formBuilder.create\", (_event, idx, list) => {\n    if (!list[idx]) {\n      return;\n    }\n\n    $(list[idx].el).formBuilder(list[idx].config).promise.then(function(res) {\n      list[idx].instance = res;\n      // Attach to DOM\n      list[idx].el.FormBuilder = res;\n      // remove spinner\n      $(list[idx].el).find(\".loading-spinner\").remove();\n      // for external use\n      $(document).trigger(\"formBuilder.created\", [list[idx]]);\n      if (idx < list.length) {\n        $(document).trigger(\"formBuilder.create\", [idx + 1, list]);\n      }\n    });\n  });\n\n  if (window.CustomFieldsBuilders.length) {\n    $(document).trigger(\"formBuilder.create\", [0, window.CustomFieldsBuilders]);\n  }\n\n  $(\"form.awesome-edit-config\").on(\"submit\", () => {\n    window.CustomFieldsBuilders.forEach((builder) => {\n      $(`input[name=\"config[proposal_custom_fields][${builder.key}]\"]`).val(builder.instance.actions.getData(\"json\"));\n    });\n  });\n});\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}