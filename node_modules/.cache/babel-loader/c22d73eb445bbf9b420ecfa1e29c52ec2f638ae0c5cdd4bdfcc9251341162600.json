{"ast":null,"code":"function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nfunction _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _callSuper(t, o, e) {\n  return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return _assertThisInitialized(t);\n}\nfunction _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nfunction _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nfunction _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && _setPrototypeOf(t, e);\n}\nfunction _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nimport * as L from \"leaflet\";\nimport Controller from \"src/decidim/decidim_awesome/awesome_map/controllers/controller\";\nimport MeetingsFetcher from \"src/decidim/decidim_awesome/awesome_map/api/meetings_fetcher\";\nvar MeetingIcon = L.DivIcon.SVGIcon.DecidimIcon.extend({\n  _createPathDescription: function _createPathDescription() {\n    return \"M 15.991543,4 C 7.3956015,4 2.9250351,10.5 3.000951,16.999999 3.1063486,26.460968 12.747693,30.000004 15.991543,43 19.242091,30.000004 29,26.255134 29,16.999999 29,10.5 23.951131,4 15.996007,4 m -0.153508,2.6000001 a 2.1720294,2.1076698 0 0 1 2.330514,2.1124998 2.177008,2.1125006 0 0 1 -4.354016,0 2.1720294,2.1076698 0 0 1 2.023502,-2.1124998 m -2.651707,4.8056679 h 5.610202 l 3.935584,7.569899 -1.926038,0.934266 -2.009546,-3.859265 v 14.557403 h -2.484243 v -9.126003 h -0.642162 v 9.126003 H 13.190347 V 16.050568 l -2.009545,3.859265 -1.926036,-0.934266 3.935581,-7.569899\";\n  }\n});\nvar MeetingsController = /*#__PURE__*/function (_Controller) {\n  function MeetingsController(awesomeMap, component) {\n    var _this;\n    _classCallCheck(this, MeetingsController);\n    _this = _callSuper(this, MeetingsController, [awesomeMap, component]);\n    _this.templateId = \"marker-meeting-popup\";\n    _this.setFetcher(MeetingsFetcher);\n    return _this;\n  }\n  _inherits(MeetingsController, _Controller);\n  return _createClass(MeetingsController, [{\n    key: \"loadNodes\",\n    value: function loadNodes() {\n      var _this2 = this;\n      // for each meeting, create a marker with an associated popup\n      this.fetcher.onNode = function (meeting) {\n        var marker = new L.Marker([meeting.coordinates.latitude, meeting.coordinates.longitude], {\n          icon: _this2.createIcon(MeetingIcon, _this2.awesomeMap.getCategory(meeting.category).color),\n          title: meeting.title.translation\n        });\n        // console.log(\"new meeting\", meeting, marker)\n        _this2.addMarker(marker, meeting);\n      };\n      this.fetcher.fetch();\n    }\n  }]);\n}(Controller);\nexport { MeetingsController as default };","map":{"version":3,"names":["L","Controller","MeetingsFetcher","MeetingIcon","DivIcon","SVGIcon","DecidimIcon","extend","_createPathDescription","MeetingsController","_Controller","awesomeMap","component","_this","_classCallCheck","_callSuper","templateId","setFetcher","_inherits","_createClass","key","value","loadNodes","_this2","fetcher","onNode","meeting","marker","Marker","coordinates","latitude","longitude","icon","createIcon","getCategory","category","color","title","translation","addMarker","fetch","default"],"sources":["/home/daniele/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/controllers/meetings_controller.js"],"sourcesContent":["import * as L from \"leaflet\";\nimport Controller from \"src/decidim/decidim_awesome/awesome_map/controllers/controller\";\nimport MeetingsFetcher from \"src/decidim/decidim_awesome/awesome_map/api/meetings_fetcher\";\n\nconst MeetingIcon = L.DivIcon.SVGIcon.DecidimIcon.extend({\n  _createPathDescription: function() {\n    return \"M 15.991543,4 C 7.3956015,4 2.9250351,10.5 3.000951,16.999999 3.1063486,26.460968 12.747693,30.000004 15.991543,43 19.242091,30.000004 29,26.255134 29,16.999999 29,10.5 23.951131,4 15.996007,4 m -0.153508,2.6000001 a 2.1720294,2.1076698 0 0 1 2.330514,2.1124998 2.177008,2.1125006 0 0 1 -4.354016,0 2.1720294,2.1076698 0 0 1 2.023502,-2.1124998 m -2.651707,4.8056679 h 5.610202 l 3.935584,7.569899 -1.926038,0.934266 -2.009546,-3.859265 v 14.557403 h -2.484243 v -9.126003 h -0.642162 v 9.126003 H 13.190347 V 16.050568 l -2.009545,3.859265 -1.926036,-0.934266 3.935581,-7.569899\";\n  }\n});\n\nexport default class MeetingsController extends Controller {\n  constructor(awesomeMap, component) {\n    super(awesomeMap, component)\n    this.templateId = \"marker-meeting-popup\";\n    this.setFetcher(MeetingsFetcher);\n  }\n\n  loadNodes() {\n    // for each meeting, create a marker with an associated popup\n    this.fetcher.onNode = (meeting) => {\n      let marker = new L.Marker([meeting.coordinates.latitude, meeting.coordinates.longitude], {\n        icon: this.createIcon(MeetingIcon, this.awesomeMap.getCategory(meeting.category).color),\n        title: meeting.title.translation\n      });\n      // console.log(\"new meeting\", meeting, marker)\n      this.addMarker(marker, meeting);\n    };\n\n    this.fetcher.fetch();\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,CAAC,MAAM,SAAS;AAC5B,OAAOC,UAAU,MAAM,gEAAgE;AACvF,OAAOC,eAAe,MAAM,8DAA8D;AAE1F,IAAMC,WAAW,GAAGH,CAAC,CAACI,OAAO,CAACC,OAAO,CAACC,WAAW,CAACC,MAAM,CAAC;EACvDC,sBAAsB,EAAE,SAAAA,uBAAA,EAAW;IACjC,OAAO,qkBAAqkB;EAC9kB;AACF,CAAC,CAAC;AAAC,IAEkBC,kBAAkB,0BAAAC,WAAA;EACrC,SAAAD,mBAAYE,UAAU,EAAEC,SAAS,EAAE;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAL,kBAAA;IACjCI,KAAA,GAAAE,UAAA,OAAAN,kBAAA,GAAME,UAAU,EAAEC,SAAS;IAC3BC,KAAA,CAAKG,UAAU,GAAG,sBAAsB;IACxCH,KAAA,CAAKI,UAAU,CAACf,eAAe,CAAC;IAAC,OAAAW,KAAA;EACnC;EAACK,SAAA,CAAAT,kBAAA,EAAAC,WAAA;EAAA,OAAAS,YAAA,CAAAV,kBAAA;IAAAW,GAAA;IAAAC,KAAA,EAED,SAAAC,UAAA,EAAY;MAAA,IAAAC,MAAA;MACV;MACA,IAAI,CAACC,OAAO,CAACC,MAAM,GAAG,UAACC,OAAO,EAAK;QACjC,IAAIC,MAAM,GAAG,IAAI3B,CAAC,CAAC4B,MAAM,CAAC,CAACF,OAAO,CAACG,WAAW,CAACC,QAAQ,EAAEJ,OAAO,CAACG,WAAW,CAACE,SAAS,CAAC,EAAE;UACvFC,IAAI,EAAET,MAAI,CAACU,UAAU,CAAC9B,WAAW,EAAEoB,MAAI,CAACZ,UAAU,CAACuB,WAAW,CAACR,OAAO,CAACS,QAAQ,CAAC,CAACC,KAAK,CAAC;UACvFC,KAAK,EAAEX,OAAO,CAACW,KAAK,CAACC;QACvB,CAAC,CAAC;QACF;QACAf,MAAI,CAACgB,SAAS,CAACZ,MAAM,EAAED,OAAO,CAAC;MACjC,CAAC;MAED,IAAI,CAACF,OAAO,CAACgB,KAAK,CAAC,CAAC;IACtB;EAAC;AAAA,EAnB6CvC,UAAU;AAAA,SAArCQ,kBAAkB,IAAAgC,OAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}