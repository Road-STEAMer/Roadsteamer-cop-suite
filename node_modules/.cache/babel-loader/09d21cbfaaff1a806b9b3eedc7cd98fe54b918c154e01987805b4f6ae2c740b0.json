{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nimport { PluginKey } from \"prosemirror-state\";\nimport { getDictionary } from \"src/decidim/i18n\";\nimport BubbleMenu from \"src/decidim/editor/common/bubble_menu\";\nvar LinkBubbleMenu = /*#__PURE__*/function (_BubbleMenu) {\n  _inherits(LinkBubbleMenu, _BubbleMenu);\n  var _super = _createSuper(LinkBubbleMenu);\n  function LinkBubbleMenu() {\n    _classCallCheck(this, LinkBubbleMenu);\n    return _super.apply(this, arguments);\n  }\n  _createClass(LinkBubbleMenu, [{\n    key: \"shouldDisplay\",\n    value: function shouldDisplay() {\n      return this.editor.isActive(\"link\");\n    }\n  }, {\n    key: \"display\",\n    value: function display() {\n      var _this$editor$getAttri = this.editor.getAttributes(\"link\"),\n        href = _this$editor$getAttri.href;\n      this.element.querySelector(\"[data-linkbubble-value]\").textContent = href;\n    }\n  }, {\n    key: \"handleAction\",\n    value: function handleAction(action) {\n      if (action === \"remove\") {\n        this.editor.chain().focus(null, {\n          scrollIntoView: false\n        }).unsetLink().run();\n      } else {\n        this.editor.commands.linkDialog();\n      }\n    }\n  }]);\n  return LinkBubbleMenu;\n}(BubbleMenu);\nvar createElement = function createElement() {\n  var i18n = getDictionary(\"editor.extensions.link.bubbleMenu\");\n  var element = document.createElement(\"div\");\n  element.dataset.linkbubble = \"\";\n  element.innerHTML = \"\\n    <span data-linkbubble-content>\\n      \".concat(i18n.url, \":\\n      <span data-linkbubble-value></span>\\n    </span>\\n    <span data-linkbubble-actions>\\n      <button type=\\\"button\\\" data-action=\\\"edit\\\">\").concat(i18n.edit, \"</button>\\n      <button type=\\\"button\\\" data-action=\\\"remove\\\">\").concat(i18n.remove, \"</button>\\n    </span>\\n  \");\n  return element;\n};\nexport default (function (editor) {\n  return new LinkBubbleMenu({\n    editor: editor,\n    element: createElement(),\n    pluginKey: new PluginKey(\"LinkBubble\")\n  });\n});","map":{"version":3,"names":["PluginKey","getDictionary","BubbleMenu","LinkBubbleMenu","_BubbleMenu","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","shouldDisplay","editor","isActive","display","_this$editor$getAttri","getAttributes","href","element","querySelector","textContent","handleAction","action","chain","focus","scrollIntoView","unsetLink","run","commands","linkDialog","createElement","i18n","document","dataset","linkbubble","innerHTML","concat","url","edit","remove","pluginKey"],"sources":["/home/daniele/decidim_idra-main/app/packs/src/decidim/editor/extensions/link/bubble_menu.js"],"sourcesContent":["import { PluginKey } from \"prosemirror-state\";\n\nimport { getDictionary } from \"src/decidim/i18n\";\nimport BubbleMenu from \"src/decidim/editor/common/bubble_menu\";\n\nclass LinkBubbleMenu extends BubbleMenu {\n  shouldDisplay() {\n    return this.editor.isActive(\"link\");\n  }\n\n  display() {\n    const { href } = this.editor.getAttributes(\"link\");\n    this.element.querySelector(\"[data-linkbubble-value]\").textContent = href;\n  }\n\n  handleAction(action) {\n    if (action === \"remove\") {\n      this.editor.chain().focus(null, { scrollIntoView: false }).unsetLink().run();\n    } else {\n      this.editor.commands.linkDialog();\n    }\n  }\n}\n\nconst createElement = () => {\n  const i18n = getDictionary(\"editor.extensions.link.bubbleMenu\");\n\n  const element = document.createElement(\"div\");\n  element.dataset.linkbubble = \"\";\n  element.innerHTML = `\n    <span data-linkbubble-content>\n      ${i18n.url}:\n      <span data-linkbubble-value></span>\n    </span>\n    <span data-linkbubble-actions>\n      <button type=\"button\" data-action=\"edit\">${i18n.edit}</button>\n      <button type=\"button\" data-action=\"remove\">${i18n.remove}</button>\n    </span>\n  `;\n\n  return element;\n};\n\nexport default (editor) => {\n  return new LinkBubbleMenu({\n    editor,\n    element: createElement(),\n    pluginKey: new PluginKey(\"LinkBubble\")\n  });\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAS,QAAQ,mBAAmB;AAE7C,SAASC,aAAa,QAAQ,kBAAkB;AAChD,OAAOC,UAAU,MAAM,uCAAuC;AAAC,IAEzDC,cAAc,0BAAAC,WAAA;EAAAC,SAAA,CAAAF,cAAA,EAAAC,WAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,cAAA;EAAA,SAAAA,eAAA;IAAAK,eAAA,OAAAL,cAAA;IAAA,OAAAG,MAAA,CAAAG,KAAA,OAAAC,SAAA;EAAA;EAAAC,YAAA,CAAAR,cAAA;IAAAS,GAAA;IAAAC,KAAA,EAClB,SAAAC,cAAA,EAAgB;MACd,OAAO,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,MAAM,CAAC;IACrC;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAAI,QAAA,EAAU;MACR,IAAAC,qBAAA,GAAiB,IAAI,CAACH,MAAM,CAACI,aAAa,CAAC,MAAM,CAAC;QAA1CC,IAAI,GAAAF,qBAAA,CAAJE,IAAI;MACZ,IAAI,CAACC,OAAO,CAACC,aAAa,CAAC,yBAAyB,CAAC,CAACC,WAAW,GAAGH,IAAI;IAC1E;EAAC;IAAAR,GAAA;IAAAC,KAAA,EAED,SAAAW,aAAaC,MAAM,EAAE;MACnB,IAAIA,MAAM,KAAK,QAAQ,EAAE;QACvB,IAAI,CAACV,MAAM,CAACW,KAAK,EAAE,CAACC,KAAK,CAAC,IAAI,EAAE;UAAEC,cAAc,EAAE;QAAM,CAAC,CAAC,CAACC,SAAS,EAAE,CAACC,GAAG,EAAE;MAC9E,CAAC,MAAM;QACL,IAAI,CAACf,MAAM,CAACgB,QAAQ,CAACC,UAAU,EAAE;MACnC;IACF;EAAC;EAAA,OAAA7B,cAAA;AAAA,EAhB0BD,UAAU;AAmBvC,IAAM+B,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;EAC1B,IAAMC,IAAI,GAAGjC,aAAa,CAAC,mCAAmC,CAAC;EAE/D,IAAMoB,OAAO,GAAGc,QAAQ,CAACF,aAAa,CAAC,KAAK,CAAC;EAC7CZ,OAAO,CAACe,OAAO,CAACC,UAAU,GAAG,EAAE;EAC/BhB,OAAO,CAACiB,SAAS,kDAAAC,MAAA,CAEXL,IAAI,CAACM,GAAG,wJAAAD,MAAA,CAIiCL,IAAI,CAACO,IAAI,sEAAAF,MAAA,CACPL,IAAI,CAACQ,MAAM,+BAE3D;EAED,OAAOrB,OAAO;AAChB,CAAC;AAED,gBAAe,UAACN,MAAM,EAAK;EACzB,OAAO,IAAIZ,cAAc,CAAC;IACxBY,MAAM,EAANA,MAAM;IACNM,OAAO,EAAEY,aAAa,EAAE;IACxBU,SAAS,EAAE,IAAI3C,SAAS,CAAC,YAAY;EACvC,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}