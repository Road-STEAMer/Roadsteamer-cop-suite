{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nimport * as L from \"leaflet\";\nimport Controller from \"src/decidim/decidim_awesome/awesome_map/controllers/controller\";\nimport MeetingsFetcher from \"src/decidim/decidim_awesome/awesome_map/api/meetings_fetcher\";\nvar MeetingIcon = L.DivIcon.SVGIcon.DecidimIcon.extend({\n  _createPathDescription: function _createPathDescription() {\n    return \"M 15.991543,4 C 7.3956015,4 2.9250351,10.5 3.000951,16.999999 3.1063486,26.460968 12.747693,30.000004 15.991543,43 19.242091,30.000004 29,26.255134 29,16.999999 29,10.5 23.951131,4 15.996007,4 m -0.153508,2.6000001 a 2.1720294,2.1076698 0 0 1 2.330514,2.1124998 2.177008,2.1125006 0 0 1 -4.354016,0 2.1720294,2.1076698 0 0 1 2.023502,-2.1124998 m -2.651707,4.8056679 h 5.610202 l 3.935584,7.569899 -1.926038,0.934266 -2.009546,-3.859265 v 14.557403 h -2.484243 v -9.126003 h -0.642162 v 9.126003 H 13.190347 V 16.050568 l -2.009545,3.859265 -1.926036,-0.934266 3.935581,-7.569899\";\n  }\n});\nvar MeetingsController = /*#__PURE__*/function (_Controller) {\n  _inherits(MeetingsController, _Controller);\n  var _super = _createSuper(MeetingsController);\n  function MeetingsController(awesomeMap, component) {\n    var _this;\n    _classCallCheck(this, MeetingsController);\n    _this = _super.call(this, awesomeMap, component);\n    _this.templateId = \"marker-meeting-popup\";\n    _this.setFetcher(MeetingsFetcher);\n    return _this;\n  }\n  _createClass(MeetingsController, [{\n    key: \"loadNodes\",\n    value: function loadNodes() {\n      var _this2 = this;\n      // for each meeting, create a marker with an associated popup\n      this.fetcher.onNode = function (meeting) {\n        var marker = new L.Marker([meeting.coordinates.latitude, meeting.coordinates.longitude], {\n          icon: _this2.createIcon(MeetingIcon, _this2.awesomeMap.getCategory(meeting.category).color),\n          title: meeting.title.translation\n        });\n        // console.log(\"new meeting\", meeting, marker)\n        _this2.addMarker(marker, meeting);\n      };\n      this.fetcher.fetch();\n    }\n  }]);\n  return MeetingsController;\n}(Controller);\nexport { MeetingsController as default };","map":{"version":3,"names":["L","Controller","MeetingsFetcher","MeetingIcon","DivIcon","SVGIcon","DecidimIcon","extend","_createPathDescription","MeetingsController","_Controller","_inherits","_super","_createSuper","awesomeMap","component","_this","_classCallCheck","call","templateId","setFetcher","_createClass","key","value","loadNodes","_this2","fetcher","onNode","meeting","marker","Marker","coordinates","latitude","longitude","icon","createIcon","getCategory","category","color","title","translation","addMarker","fetch","default"],"sources":["/home/daniele/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/controllers/meetings_controller.js"],"sourcesContent":["import * as L from \"leaflet\";\nimport Controller from \"src/decidim/decidim_awesome/awesome_map/controllers/controller\";\nimport MeetingsFetcher from \"src/decidim/decidim_awesome/awesome_map/api/meetings_fetcher\";\n\nconst MeetingIcon = L.DivIcon.SVGIcon.DecidimIcon.extend({\n  _createPathDescription: function() {\n    return \"M 15.991543,4 C 7.3956015,4 2.9250351,10.5 3.000951,16.999999 3.1063486,26.460968 12.747693,30.000004 15.991543,43 19.242091,30.000004 29,26.255134 29,16.999999 29,10.5 23.951131,4 15.996007,4 m -0.153508,2.6000001 a 2.1720294,2.1076698 0 0 1 2.330514,2.1124998 2.177008,2.1125006 0 0 1 -4.354016,0 2.1720294,2.1076698 0 0 1 2.023502,-2.1124998 m -2.651707,4.8056679 h 5.610202 l 3.935584,7.569899 -1.926038,0.934266 -2.009546,-3.859265 v 14.557403 h -2.484243 v -9.126003 h -0.642162 v 9.126003 H 13.190347 V 16.050568 l -2.009545,3.859265 -1.926036,-0.934266 3.935581,-7.569899\";\n  }\n});\n\nexport default class MeetingsController extends Controller {\n  constructor(awesomeMap, component) {\n    super(awesomeMap, component)\n    this.templateId = \"marker-meeting-popup\";\n    this.setFetcher(MeetingsFetcher);\n  }\n\n  loadNodes() {\n    // for each meeting, create a marker with an associated popup\n    this.fetcher.onNode = (meeting) => {\n      let marker = new L.Marker([meeting.coordinates.latitude, meeting.coordinates.longitude], {\n        icon: this.createIcon(MeetingIcon, this.awesomeMap.getCategory(meeting.category).color),\n        title: meeting.title.translation\n      });\n      // console.log(\"new meeting\", meeting, marker)\n      this.addMarker(marker, meeting);\n    };\n\n    this.fetcher.fetch();\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,CAAC,MAAM,SAAS;AAC5B,OAAOC,UAAU,MAAM,gEAAgE;AACvF,OAAOC,eAAe,MAAM,8DAA8D;AAE1F,IAAMC,WAAW,GAAGH,CAAC,CAACI,OAAO,CAACC,OAAO,CAACC,WAAW,CAACC,MAAM,CAAC;EACvDC,sBAAsB,EAAE,SAAAA,uBAAA,EAAW;IACjC,OAAO,qkBAAqkB;EAC9kB;AACF,CAAC,CAAC;AAAC,IAEkBC,kBAAkB,0BAAAC,WAAA;EAAAC,SAAA,CAAAF,kBAAA,EAAAC,WAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,kBAAA;EACrC,SAAAA,mBAAYK,UAAU,EAAEC,SAAS,EAAE;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAR,kBAAA;IACjCO,KAAA,GAAAJ,MAAA,CAAAM,IAAA,OAAMJ,UAAU,EAAEC,SAAS;IAC3BC,KAAA,CAAKG,UAAU,GAAG,sBAAsB;IACxCH,KAAA,CAAKI,UAAU,CAAClB,eAAe,CAAC;IAAC,OAAAc,KAAA;EACnC;EAACK,YAAA,CAAAZ,kBAAA;IAAAa,GAAA;IAAAC,KAAA,EAED,SAAAC,UAAA,EAAY;MAAA,IAAAC,MAAA;MACV;MACA,IAAI,CAACC,OAAO,CAACC,MAAM,GAAG,UAACC,OAAO,EAAK;QACjC,IAAIC,MAAM,GAAG,IAAI7B,CAAC,CAAC8B,MAAM,CAAC,CAACF,OAAO,CAACG,WAAW,CAACC,QAAQ,EAAEJ,OAAO,CAACG,WAAW,CAACE,SAAS,CAAC,EAAE;UACvFC,IAAI,EAAET,MAAI,CAACU,UAAU,CAAChC,WAAW,EAAEsB,MAAI,CAACX,UAAU,CAACsB,WAAW,CAACR,OAAO,CAACS,QAAQ,CAAC,CAACC,KAAK,CAAC;UACvFC,KAAK,EAAEX,OAAO,CAACW,KAAK,CAACC;QACvB,CAAC,CAAC;QACF;QACAf,MAAI,CAACgB,SAAS,CAACZ,MAAM,EAAED,OAAO,CAAC;MACjC,CAAC;MAED,IAAI,CAACF,OAAO,CAACgB,KAAK,EAAE;IACtB;EAAC;EAAA,OAAAjC,kBAAA;AAAA,EAnB6CR,UAAU;AAAA,SAArCQ,kBAAkB,IAAAkC,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}