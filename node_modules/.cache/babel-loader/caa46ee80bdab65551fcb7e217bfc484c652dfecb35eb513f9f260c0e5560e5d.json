{"ast":null,"code":"function _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\n/* eslint-disable require-jsdoc, func-style */\n\n/*\n* Since version 0.25 we follow a different strategy and opt to destroy and override completely the original editor\n* That's because editors are instantiated directly instead of creating a global function to instantiate them\n*/\n\nimport lineBreakButtonHandler from \"src/decidim/editor/linebreak_module\";\nimport InscrybMDE from \"inscrybmde\";\nimport Europa from \"europa\";\nimport \"inline-attachment/src/inline-attachment\";\nimport \"inline-attachment/src/codemirror-4.inline-attachment\";\nimport \"inline-attachment/src/jquery.inline-attachment\";\nimport hljs from \"highlight.js\";\nimport \"highlight.js/styles/github.css\";\nimport \"src/decidim/editor/clipboard_override\";\nimport \"src/decidim/vendor/image-resize.min\";\nimport \"src/decidim/vendor/image-upload.min\";\nimport { marked } from \"marked\";\nvar DecidimAwesome = window.DecidimAwesome || {};\nvar quillFormats = [\"bold\", \"italic\", \"link\", \"underline\", \"header\", \"list\", \"video\", \"image\", \"alt\", \"break\", \"width\", \"style\", \"code\", \"blockquote\", \"indent\"];\n\n// A tricky way to destroy the quill editor\nexport function destroyQuillEditor(container) {\n  if (container) {\n    var content = $(container).find(\".ql-editor\").html();\n    $(container).html(content);\n    $(container).siblings(\".ql-toolbar\").remove();\n    $(container).find(\"*[class*='ql-']\").removeClass(function (index, className) {\n      return (className.match(/(^|\\s)ql-\\S+/g) || []).join(\" \");\n    });\n    $(container).removeClass(function (index, className) {\n      return (className.match(/(^|\\s)ql-\\S+/g) || []).join(\" \");\n    });\n    if ($(container).next().is(\"p.help-text\")) {\n      $(container).next().remove();\n    }\n  } else {\n    console.error(\"editor [\".concat(container, \"] not exists\"));\n  }\n}\nexport function createQuillEditor(container) {\n  var toolbar = $(container).data(\"toolbar\");\n  var disabled = $(container).data(\"disabled\");\n  var allowedEmptyContentSelector = \"iframe\";\n  var quillToolbar = [[\"bold\", \"italic\", \"underline\", \"linebreak\"], [{\n    list: \"ordered\"\n  }, {\n    list: \"bullet\"\n  }], [\"link\", \"clean\"], [\"code\", \"blockquote\"], [{\n    \"indent\": \"-1\"\n  }, {\n    \"indent\": \"+1\"\n  }]];\n  var addImage = false;\n  if (toolbar === \"full\") {\n    quillToolbar = [[{\n      header: [2, 3, 4, 5, 6, false]\n    }]].concat(_toConsumableArray(quillToolbar));\n    if (DecidimAwesome.allow_images_in_full_editor) {\n      quillToolbar.push([\"video\", \"image\"]);\n      addImage = true;\n    } else {\n      quillToolbar.push([\"video\"]);\n    }\n  } else if (toolbar === \"basic\") {\n    if (DecidimAwesome.allow_images_in_small_editor) {\n      quillToolbar.push([\"video\", \"image\"]);\n      addImage = true;\n    } else {\n      quillToolbar.push([\"video\"]);\n    }\n  } else if (DecidimAwesome.allow_images_in_small_editor) {\n    quillToolbar.push([\"image\"]);\n    addImage = true;\n  }\n  var modules = {\n    linebreak: {},\n    toolbar: {\n      container: quillToolbar,\n      handlers: {\n        \"linebreak\": lineBreakButtonHandler\n      }\n    }\n  };\n  var $input = $(container).siblings('input[type=\"hidden\"]');\n  container.innerHTML = $input.val() || \"\";\n  var token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  if (addImage) {\n    modules.imageResize = {\n      modules: [\"Resize\", \"DisplaySize\"]\n    };\n    modules.imageUpload = {\n      url: DecidimAwesome.editor_uploader_path,\n      method: \"POST\",\n      name: \"image\",\n      withCredentials: false,\n      headers: {\n        \"X-CSRF-Token\": token\n      },\n      callbackOK: function callbackOK(serverResponse, next) {\n        $(\"div.ql-toolbar\").last().removeClass(\"editor-loading\");\n        next(serverResponse.url);\n      },\n      callbackKO: function callbackKO(serverError) {\n        $(\"div.ql-toolbar\").last().removeClass(\"editor-loading\");\n        var msg = serverError && serverError.body;\n        try {\n          msg = JSON.parse(msg).message;\n        } catch (evt) {\n          console.error(\"Parsing error\", evt);\n        }\n        console.error(\"Image upload error: \".concat(msg));\n        var $p = $(\"<p class=\\\"text-alert help-text\\\">\".concat(msg, \"</p>\"));\n        $(container).after($p);\n        setTimeout(function () {\n          $p.fadeOut(1000, function () {\n            $p.destroy();\n          });\n        }, 3000);\n      },\n      checkBeforeSend: function checkBeforeSend(file, next) {\n        $(\"div.ql-toolbar\").last().addClass(\"editor-loading\");\n        next(file);\n      }\n    };\n  }\n  var quill = new Quill(container, {\n    modules: modules,\n    formats: quillFormats,\n    theme: \"snow\"\n  });\n  if (disabled) {\n    quill.disable();\n  }\n  quill.on(\"text-change\", function () {\n    var text = quill.getText();\n\n    // Triggers CustomEvent with the cursor position\n    // It is required in input_mentions.js\n    var event = new CustomEvent(\"quill-position\", {\n      detail: quill.getSelection()\n    });\n    container.dispatchEvent(event);\n    if (text === \"\\n\" || text === \"\\n\\n\") {\n      $input.val(\"\");\n    } else {\n      $input.val(quill.root.innerHTML);\n    }\n    if ((text === \"\\n\" || text === \"\\n\\n\") && quill.root.querySelectorAll(allowedEmptyContentSelector).length === 0) {\n      $input.val(\"\");\n    } else {\n      var emptyParagraph = \"<p><br></p>\";\n      var cleanHTML = quill.root.innerHTML.replace(new RegExp(\"^\".concat(emptyParagraph, \"|\").concat(emptyParagraph, \"$\"), \"g\"), \"\");\n      $input.val(cleanHTML);\n    }\n  });\n  // After editor is ready, linebreak_module deletes two extraneous new lines\n  quill.emitter.emit(\"editor-ready\");\n  if (addImage) {\n    var text = $(container).data(\"dragAndDropHelpText\") || DecidimAwesome.texts.drag_and_drop_image;\n    $(container).after(\"<p class=\\\"help-text\\\" style=\\\"margin-top:-1.5rem;\\\">\".concat(text, \"</p>\"));\n  }\n\n  // After editor is ready, linebreak_module deletes two extraneous new lines\n  quill.emitter.emit(\"editor-ready\");\n  return quill;\n}\nexport function createMarkdownEditor(container) {\n  var text = DecidimAwesome.texts.drag_and_drop_image;\n  var token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  var $input = $(container).siblings('input[type=\"hidden\"]');\n  var $faker = $('<textarea name=\"faker-inscrybmde\"/>');\n  var $form = $(container).closest(\"form\");\n  var europa = new Europa();\n  $faker.val(europa.convert($input.val()));\n  $faker.insertBefore($(container));\n  $(container).hide();\n  var inscrybmde = new InscrybMDE({\n    element: $faker[0],\n    spellChecker: false,\n    renderingConfig: {\n      codeSyntaxHighlighting: true,\n      hljs: hljs\n    }\n  });\n  $faker[0].InscrybMDE = inscrybmde;\n\n  // Allow image upload\n  if (DecidimAwesome.allow_images_in_markdown_editor) {\n    $(inscrybmde.gui.statusbar).prepend(\"<span class=\\\"help-text\\\" style=\\\"float:left;margin:0;text-align:left;\\\">\".concat(text, \"</span>\"));\n    window.inlineAttachment.editors.codemirror4.attach(inscrybmde.codemirror, {\n      uploadUrl: DecidimAwesome.editor_uploader_path,\n      uploadFieldName: \"image\",\n      jsonFieldName: \"url\",\n      extraHeaders: {\n        \"X-CSRF-Token\": token\n      }\n    });\n  }\n\n  // Allow linebreaks\n  marked.setOptions({\n    breaks: true\n  });\n\n  // convert to html on submit\n  $form.on(\"submit\", function () {\n    // e.preventDefault();\n    $input.val(marked(inscrybmde.value()));\n  });\n}","map":{"version":3,"names":["lineBreakButtonHandler","InscrybMDE","Europa","hljs","marked","DecidimAwesome","window","quillFormats","destroyQuillEditor","container","content","$","find","html","siblings","remove","removeClass","index","className","match","join","next","is","console","error","concat","createQuillEditor","toolbar","data","disabled","allowedEmptyContentSelector","quillToolbar","list","addImage","header","_toConsumableArray","allow_images_in_full_editor","push","allow_images_in_small_editor","modules","linebreak","handlers","$input","innerHTML","val","token","attr","imageResize","imageUpload","url","editor_uploader_path","method","name","withCredentials","headers","callbackOK","serverResponse","last","callbackKO","serverError","msg","body","JSON","parse","message","evt","$p","after","setTimeout","fadeOut","destroy","checkBeforeSend","file","addClass","quill","Quill","formats","theme","disable","on","text","getText","event","CustomEvent","detail","getSelection","dispatchEvent","root","querySelectorAll","length","emptyParagraph","cleanHTML","replace","RegExp","emitter","emit","texts","drag_and_drop_image","createMarkdownEditor","$faker","$form","closest","europa","convert","insertBefore","hide","inscrybmde","element","spellChecker","renderingConfig","codeSyntaxHighlighting","allow_images_in_markdown_editor","gui","statusbar","prepend","inlineAttachment","editors","codemirror4","attach","codemirror","uploadUrl","uploadFieldName","jsonFieldName","extraHeaders","setOptions","breaks","value"],"sources":["/home/daniele/decidim_idra/app/packs/src/decidim/decidim_awesome/editors/editor.js"],"sourcesContent":["/* eslint-disable require-jsdoc, func-style */\n\n/*\n* Since version 0.25 we follow a different strategy and opt to destroy and override completely the original editor\n* That's because editors are instantiated directly instead of creating a global function to instantiate them\n*/\n\nimport lineBreakButtonHandler from \"src/decidim/editor/linebreak_module\"\nimport InscrybMDE from \"inscrybmde\"\nimport Europa from \"europa\"\nimport \"inline-attachment/src/inline-attachment\";\nimport \"inline-attachment/src/codemirror-4.inline-attachment\";\nimport \"inline-attachment/src/jquery.inline-attachment\";\nimport hljs from \"highlight.js\";\nimport \"highlight.js/styles/github.css\";\nimport \"src/decidim/editor/clipboard_override\"\nimport \"src/decidim/vendor/image-resize.min\"\nimport \"src/decidim/vendor/image-upload.min\"\nimport { marked } from \"marked\";\n\nconst DecidimAwesome = window.DecidimAwesome || {};\nconst quillFormats = [\"bold\", \"italic\", \"link\", \"underline\", \"header\", \"list\", \"video\", \"image\", \"alt\", \"break\", \"width\", \"style\", \"code\", \"blockquote\", \"indent\"];\n\n// A tricky way to destroy the quill editor\nexport function destroyQuillEditor(container) {\n  if (container) {\n    const content = $(container).find(\".ql-editor\").html();\n    $(container).html(content);\n    $(container).siblings(\".ql-toolbar\").remove();\n    $(container).find(\"*[class*='ql-']\").removeClass((index, className) => (className.match(/(^|\\s)ql-\\S+/g) || []).join(\" \"));\n    $(container).removeClass((index, className) => (className.match(/(^|\\s)ql-\\S+/g) || []).join(\" \"));\n    if ($(container).next().is(\"p.help-text\")) {\n      $(container).next().remove();\n    }\n  }\n  else {\n    console.error(`editor [${container}] not exists`);\n  }\n}\n\nexport function createQuillEditor(container) {\n  const toolbar = $(container).data(\"toolbar\");\n  const disabled = $(container).data(\"disabled\");\n  const allowedEmptyContentSelector = \"iframe\";\n\n  let quillToolbar = [\n    [\"bold\", \"italic\", \"underline\", \"linebreak\"],\n    [{ list: \"ordered\" }, { list: \"bullet\" }],\n    [\"link\", \"clean\"],\n    [\"code\", \"blockquote\"],\n    [{ \"indent\": \"-1\"}, { \"indent\": \"+1\" }]\n  ];\n\n  let addImage = false;\n\n  if (toolbar === \"full\") {\n    quillToolbar = [\n      [{ header: [2, 3, 4, 5, 6, false] }],\n      ...quillToolbar\n    ];\n    if (DecidimAwesome.allow_images_in_full_editor) {\n      quillToolbar.push([\"video\", \"image\"]);\n      addImage = true;\n    } else {\n      quillToolbar.push([\"video\"]);\n    }\n  } else if (toolbar === \"basic\") {\n    if (DecidimAwesome.allow_images_in_small_editor) {\n      quillToolbar.push([\"video\", \"image\"]);\n      addImage = true;\n    } else {\n      quillToolbar.push([\"video\"]);\n    }\n  } else if (DecidimAwesome.allow_images_in_small_editor) {\n    quillToolbar.push([\"image\"]);\n    addImage = true;\n  }\n\n  let modules = {\n    linebreak: {},\n    toolbar: {\n      container: quillToolbar,\n      handlers: {\n        \"linebreak\": lineBreakButtonHandler\n      }\n    }\n  };\n\n  const $input = $(container).siblings('input[type=\"hidden\"]');\n  container.innerHTML = $input.val() || \"\";\n  const token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  if (addImage) {\n    modules.imageResize = {\n      modules: [\"Resize\", \"DisplaySize\"]\n    }\n    modules.imageUpload = {\n      url: DecidimAwesome.editor_uploader_path,\n      method: \"POST\",\n      name: \"image\",\n      withCredentials: false,\n      headers: { \"X-CSRF-Token\": token },\n      callbackOK: (serverResponse, next) => {\n        $(\"div.ql-toolbar\").last().removeClass(\"editor-loading\")\n        next(serverResponse.url);\n      },\n      callbackKO: (serverError) => {\n        $(\"div.ql-toolbar\").last().removeClass(\"editor-loading\")\n        let msg = serverError && serverError.body;\n        try {\n          msg = JSON.parse(msg).message;\n        } catch (evt) { console.error(\"Parsing error\", evt); }\n        console.error(`Image upload error: ${msg}`);\n        let $p = $(`<p class=\"text-alert help-text\">${msg}</p>`);\n        $(container).after($p)\n        setTimeout(() => {\n          $p.fadeOut(1000, () => {\n            $p.destroy();\n          });\n        }, 3000);\n      },\n      checkBeforeSend: (file, next) => {\n        $(\"div.ql-toolbar\").last().addClass(\"editor-loading\")\n        next(file);\n      }\n    }\n  }\n  const quill = new Quill(container, {\n    modules: modules,\n    formats: quillFormats,\n    theme: \"snow\"\n  });\n\n  if (disabled) {\n    quill.disable();\n  }\n\n  quill.on(\"text-change\", () => {\n    const text = quill.getText();\n\n    // Triggers CustomEvent with the cursor position\n    // It is required in input_mentions.js\n    let event = new CustomEvent(\"quill-position\", {\n      detail: quill.getSelection()\n    });\n    container.dispatchEvent(event);\n\n    if (text === \"\\n\" || text === \"\\n\\n\") {\n      $input.val(\"\");\n    } else {\n      $input.val(quill.root.innerHTML);\n    }\n    if ((text === \"\\n\" || text === \"\\n\\n\") && quill.root.querySelectorAll(allowedEmptyContentSelector).length === 0) {\n      $input.val(\"\");\n    } else {\n      const emptyParagraph = \"<p><br></p>\";\n      const cleanHTML = quill.root.innerHTML.replace(\n        new RegExp(`^${emptyParagraph}|${emptyParagraph}$`, \"g\"),\n        \"\"\n      );\n      $input.val(cleanHTML);\n    }\n  });\n  // After editor is ready, linebreak_module deletes two extraneous new lines\n  quill.emitter.emit(\"editor-ready\");\n\n  if (addImage) {\n    const text = $(container).data(\"dragAndDropHelpText\") || DecidimAwesome.texts.drag_and_drop_image;\n    $(container).after(`<p class=\"help-text\" style=\"margin-top:-1.5rem;\">${text}</p>`);\n  }\n\n  // After editor is ready, linebreak_module deletes two extraneous new lines\n  quill.emitter.emit(\"editor-ready\");\n\n  return quill;\n}\n\nexport function createMarkdownEditor(container) {\n  const text = DecidimAwesome.texts.drag_and_drop_image;\n  const token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  const $input = $(container).siblings('input[type=\"hidden\"]');\n  const $faker = $('<textarea name=\"faker-inscrybmde\"/>');\n  const $form = $(container).closest(\"form\");\n  const europa = new Europa();\n  $faker.val(europa.convert($input.val()));\n  $faker.insertBefore($(container));\n  $(container).hide();\n  const inscrybmde = new InscrybMDE({\n    element: $faker[0],\n    spellChecker: false,\n    renderingConfig: {\n      codeSyntaxHighlighting: true,\n      hljs: hljs\n    }\n  });\n  $faker[0].InscrybMDE = inscrybmde;\n\n  // Allow image upload\n  if (DecidimAwesome.allow_images_in_markdown_editor) {\n    $(inscrybmde.gui.statusbar).prepend(`<span class=\"help-text\" style=\"float:left;margin:0;text-align:left;\">${text}</span>`);\n    window.inlineAttachment.editors.codemirror4.attach(inscrybmde.codemirror, {\n      uploadUrl: DecidimAwesome.editor_uploader_path,\n      uploadFieldName: \"image\",\n      jsonFieldName: \"url\",\n      extraHeaders: { \"X-CSRF-Token\": token }\n    });\n  }\n\n  // Allow linebreaks\n  marked.setOptions({\n    breaks: true\n  });\n\n  // convert to html on submit\n  $form.on(\"submit\", () => {\n    // e.preventDefault();\n    $input.val(marked(inscrybmde.value()));\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}