{"ast":null,"code":"$(function () {\n  window.DecidimAwesome = window.DecidimAwesome || {};\n  var token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  var $textarea = $(\"textarea#proposal_body\");\n  var text = window.DecidimAwesome.texts.drag_and_drop_image;\n  if (!$textarea.length) {\n    return;\n  }\n  if (window.DecidimAwesome.allow_images_in_proposals) {\n    // Add the capability to upload images only (they will be presented as links)\n\n    $textarea.after(\"<p class=\\\"help-text\\\">\".concat(text, \"</p>\"));\n    $textarea.inlineattachment({\n      uploadUrl: window.DecidimAwesome.editor_uploader_path,\n      uploadFieldName: \"image\",\n      jsonFieldName: \"url\",\n      progressText: \"[Uploading file...]\",\n      urlText: \"{filename}\",\n      extraHeaders: {\n        \"X-CSRF-Token\": token\n      }\n    });\n  }\n});","map":{"version":3,"names":["$","window","DecidimAwesome","token","attr","$textarea","text","texts","drag_and_drop_image","length","allow_images_in_proposals","after","concat","inlineattachment","uploadUrl","editor_uploader_path","uploadFieldName","jsonFieldName","progressText","urlText","extraHeaders"],"sources":["/home/daniele/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/proposals/images.js"],"sourcesContent":["$(() => {\n  window.DecidimAwesome = window.DecidimAwesome || {};\n\n  const token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  const $textarea = $(\"textarea#proposal_body\");\n  const text = window.DecidimAwesome.texts.drag_and_drop_image;\n\n  if (!$textarea.length) {\n    return;\n  }\n\n  if (window.DecidimAwesome.allow_images_in_proposals) {\n    // Add the capability to upload images only (they will be presented as links)\n\n    $textarea.after(`<p class=\"help-text\">${text}</p>`);\n    $textarea.inlineattachment({\n      uploadUrl: window.DecidimAwesome.editor_uploader_path,\n      uploadFieldName: \"image\",\n      jsonFieldName: \"url\",\n      progressText: \"[Uploading file...]\",\n      urlText: \"{filename}\",\n      extraHeaders: { \"X-CSRF-Token\": token }\n    });\n  }\n});\n"],"mappings":"AAAAA,CAAC,CAAC,YAAM;EACNC,MAAM,CAACC,cAAc,GAAGD,MAAM,CAACC,cAAc,IAAI,CAAC,CAAC;EAEnD,IAAMC,KAAK,GAAGH,CAAC,CAAC,yBAAyB,CAAC,CAACI,IAAI,CAAC,SAAS,CAAC;EAC1D,IAAMC,SAAS,GAAGL,CAAC,CAAC,wBAAwB,CAAC;EAC7C,IAAMM,IAAI,GAAGL,MAAM,CAACC,cAAc,CAACK,KAAK,CAACC,mBAAmB;EAE5D,IAAI,CAACH,SAAS,CAACI,MAAM,EAAE;IACrB;EACF;EAEA,IAAIR,MAAM,CAACC,cAAc,CAACQ,yBAAyB,EAAE;IACnD;;IAEAL,SAAS,CAACM,KAAK,2BAAAC,MAAA,CAAyBN,IAAI,UAAO;IACnDD,SAAS,CAACQ,gBAAgB,CAAC;MACzBC,SAAS,EAAEb,MAAM,CAACC,cAAc,CAACa,oBAAoB;MACrDC,eAAe,EAAE,OAAO;MACxBC,aAAa,EAAE,KAAK;MACpBC,YAAY,EAAE,qBAAqB;MACnCC,OAAO,EAAE,YAAY;MACrBC,YAAY,EAAE;QAAE,cAAc,EAAEjB;MAAM;IACxC,CAAC,CAAC;EACJ;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}