{"ast":null,"code":"function _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\n/* eslint-disable require-jsdoc, func-style */\n\n/*\n* Since version 0.25 we follow a different strategy and opt to destroy and override completely the original editor\n* That's because editors are instantiated directly instead of creating a global function to instantiate them\n*/\n\nimport lineBreakButtonHandler from \"src/decidim/editor/linebreak_module\";\nimport InscrybMDE from \"inscrybmde\";\nimport Europa from \"europa\";\nimport \"inline-attachment/src/inline-attachment\";\nimport \"inline-attachment/src/codemirror-4.inline-attachment\";\nimport \"inline-attachment/src/jquery.inline-attachment\";\nimport hljs from \"highlight.js\";\nimport \"highlight.js/styles/github.css\";\nimport \"src/decidim/editor/clipboard_override\";\nimport \"src/decidim/vendor/image-resize.min\";\nimport \"src/decidim/vendor/image-upload.min\";\nimport { marked } from \"marked\";\nvar DecidimAwesome = window.DecidimAwesome || {};\nvar quillFormats = [\"bold\", \"italic\", \"link\", \"underline\", \"header\", \"list\", \"video\", \"image\", \"alt\", \"break\", \"width\", \"style\", \"code\", \"blockquote\", \"indent\"];\n\n// A tricky way to destroy the quill editor\nexport function destroyQuillEditor(container) {\n  if (container) {\n    var content = $(container).find(\".ql-editor\").html();\n    $(container).html(content);\n    $(container).siblings(\".ql-toolbar\").remove();\n    $(container).find(\"*[class*='ql-']\").removeClass(function (index, className) {\n      return (className.match(/(^|\\s)ql-\\S+/g) || []).join(\" \");\n    });\n    $(container).removeClass(function (index, className) {\n      return (className.match(/(^|\\s)ql-\\S+/g) || []).join(\" \");\n    });\n    if ($(container).next().is(\"p.help-text\")) {\n      $(container).next().remove();\n    }\n  } else {\n    console.error(\"editor [\".concat(container, \"] not exists\"));\n  }\n}\nexport function createQuillEditor(container) {\n  var toolbar = $(container).data(\"toolbar\");\n  var disabled = $(container).data(\"disabled\");\n  var allowedEmptyContentSelector = \"iframe\";\n  var quillToolbar = [[\"bold\", \"italic\", \"underline\", \"linebreak\"], [{\n    list: \"ordered\"\n  }, {\n    list: \"bullet\"\n  }], [\"link\", \"clean\"], [\"code\", \"blockquote\"], [{\n    \"indent\": \"-1\"\n  }, {\n    \"indent\": \"+1\"\n  }], [{\n    'savedDataset': \"openModal\"\n  }]];\n  var addImage = $(container).data(\"editorImages\");\n  if (toolbar === \"full\") {\n    quillToolbar = [[{\n      header: [2, 3, 4, 5, 6, false]\n    }]].concat(_toConsumableArray(quillToolbar), [[\"video\"]]);\n  } else if (toolbar === \"basic\") {\n    quillToolbar = [].concat(_toConsumableArray(quillToolbar), [[\"video\"]]);\n  }\n  var modalData = [];\n  var hasFetched = false; // Add this flag\n\n  // Function to fetch data\n  function fetchData() {\n    if (!hasFetched) {\n      // Check if fetch hasn't been performed yet\n      fetch('/idra_update', {\n        method: 'GET'\n      }).then(function (response) {\n        if (response.ok) {\n          return response.text(); // Assuming the response is HTML\n        } else {\n          throw new Error('Failed to fetch the updated content');\n        }\n      }).then(function (data) {\n        var parser = new DOMParser();\n        var doc = parser.parseFromString(data, 'text/html');\n        var datasetElements = doc.querySelectorAll('#datasets-list a');\n        var urlElements = doc.querySelectorAll('#datasets-list #url');\n        datasetElements.forEach(function (dataset, index) {\n          var title = dataset.textContent;\n          var url = urlElements[index].textContent;\n          modalData.push({\n            title: title,\n            url: url\n          });\n        });\n      })[\"catch\"](function (error) {\n        console.error('Error updating partial view:', error);\n      });\n      hasFetched = true; // Set the flag to indicate that fetch has been performed\n    }\n  }\n\n  // Call the fetchData function\n  fetchData();\n\n  // Function to create and display the modal\n  function openModal() {\n    // Create a modal container\n    var modalContainer = document.createElement('div');\n    modalContainer.classList.add('modal-container');\n\n    // Create a modal element\n    var modal = document.createElement('div');\n    modal.classList.add('modal');\n\n    // Modal content\n    var modalContent = document.createElement('div');\n    modalContent.classList.add('modal-content');\n    modalContent.id = 'modalContent';\n\n    // Create an unordered list to display the elements as a list\n    // Create a div for the links\n    var linksDiv = document.createElement('div');\n    linksDiv.classList.add('links-column');\n    var titleElement = document.createElement('h1');\n    titleElement.textContent = \"Saved Dataset\";\n    linksDiv.appendChild(titleElement);\n    titleElement.className = \"text-center\";\n    var descriptionElement = document.createElement(\"h5\");\n    descriptionElement.textContent = \"Select a dataset to insert in text editor:\";\n    descriptionElement.style.color = \"gray\";\n    linksDiv.appendChild(descriptionElement);\n\n    // Loop through modalData array and create links with click event listeners\n    modalData.forEach(function (element) {\n      var link = document.createElement('a');\n      link.href = element.url; // URL as the href attribute of the link\n      link.textContent = element.title; // Title as the visible text of the link\n      linksDiv.appendChild(link);\n      link.addEventListener('click', function (event) {\n        event.preventDefault(); // Prevent default navigation behavior\n\n        copyAndPasteText(element.title, element.url);\n        modalContainer.style.display = 'none'; // Close the modal\n      });\n\n      if (element !== modalData[modalData.length - 1]) {\n        linksDiv.appendChild(document.createElement('br'));\n      }\n    });\n\n    // Function to copy and paste the text into the Quill editor\n    function copyAndPasteText(title, url) {\n      var range = quill.getSelection();\n      var linkFormat = {\n        link: url,\n        target: '_blank'\n      };\n      quill.insertText(range.index, title, linkFormat);\n      quill.setSelection(range.index, title.length, 'user');\n    }\n    modalContent.appendChild(linksDiv);\n    modal.appendChild(modalContent);\n    modalContainer.appendChild(modal);\n    document.body.appendChild(modalContainer);\n\n    // Open the modal\n    modalContainer.style.display = 'block';\n\n    // Close modal when clicking outside the modal\n    window.addEventListener('click', function (event) {\n      if (event.target == modalContainer) {\n        modalContainer.style.display = 'none';\n      }\n    });\n  }\n  var modules = {\n    linebreak: {},\n    toolbar: {\n      container: quillToolbar,\n      handlers: {\n        \"linebreak\": lineBreakButtonHandler,\n        \"savedDataset\": openModal\n      }\n    }\n  };\n  var $input = $(container).siblings('input[type=\"hidden\"]');\n  container.innerHTML = $input.val() || \"\";\n  var token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  if (addImage) {\n    modules.imageResize = {\n      modules: [\"Resize\", \"DisplaySize\"]\n    };\n    modules.imageUpload = {\n      url: $(container).data(\"uploadImagesPath\"),\n      method: \"POST\",\n      name: \"image\",\n      withCredentials: false,\n      headers: {\n        \"X-CSRF-Token\": token\n      },\n      callbackOK: function callbackOK(serverResponse, next) {\n        $(\"div.ql-toolbar\").last().removeClass(\"editor-loading\");\n        next(serverResponse.url);\n      },\n      callbackKO: function callbackKO(serverError) {\n        $(\"div.ql-toolbar\").last().removeClass(\"editor-loading\");\n        console.log(\"Image upload error: \".concat(serverError.message));\n      },\n      checkBeforeSend: function checkBeforeSend(file, next) {\n        $(\"div.ql-toolbar\").last().addClass(\"editor-loading\");\n        next(file);\n      }\n    };\n  }\n  var quill = new Quill(container, {\n    modules: modules,\n    formats: quillFormats,\n    theme: \"snow\"\n  });\n  if (disabled) {\n    quill.disable();\n  }\n  quill.on(\"text-change\", function () {\n    var text = quill.getText();\n\n    // Triggers CustomEvent with the cursor position\n    // It is required in input_mentions.js\n    var event = new CustomEvent(\"quill-position\", {\n      detail: quill.getSelection()\n    });\n    container.dispatchEvent(event);\n    if ((text === \"\\n\" || text === \"\\n\\n\") && quill.root.querySelectorAll(allowedEmptyContentSelector).length === 0) {\n      $input.val(\"\");\n    } else {\n      var emptyParagraph = \"<p><br></p>\";\n      var cleanHTML = quill.root.innerHTML.replace(new RegExp(\"^\".concat(emptyParagraph, \"|\").concat(emptyParagraph, \"$\"), \"g\"), \"\");\n      $input.val(cleanHTML);\n    }\n  });\n  // After editor is ready, linebreak_module deletes two extraneous new lines\n  quill.emitter.emit(\"editor-ready\");\n  if (addImage) {\n    var text = $(container).data(\"dragAndDropHelpText\");\n    $(container).after(\"<p class=\\\"help-text\\\" style=\\\"margin-top:-1.5rem;\\\">\".concat(text, \"</p>\"));\n  }\n\n  // After editor is ready, linebreak_module deletes two extraneous new lines\n  quill.emitter.emit(\"editor-ready\");\n  return quill;\n}\nexport function createMarkdownEditor(container) {\n  var text = DecidimAwesome.texts.drag_and_drop_image;\n  var token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  var $input = $(container).siblings('input[type=\"hidden\"]');\n  var $faker = $('<textarea name=\"faker-inscrybmde\"/>');\n  var $form = $(container).closest(\"form\");\n  var europa = new Europa();\n  $faker.val(europa.convert($input.val()));\n  $faker.insertBefore($(container));\n  $(container).hide();\n  var inscrybmde = new InscrybMDE({\n    element: $faker[0],\n    spellChecker: false,\n    renderingConfig: {\n      codeSyntaxHighlighting: true,\n      hljs: hljs\n    }\n  });\n  $faker[0].InscrybMDE = inscrybmde;\n\n  // Allow image upload\n  if (DecidimAwesome.allow_images_in_markdown_editor) {\n    $(inscrybmde.gui.statusbar).prepend(\"<span class=\\\"help-text\\\" style=\\\"float:left;margin:0;text-align:left;\\\">\".concat(text, \"</span>\"));\n    window.inlineAttachment.editors.codemirror4.attach(inscrybmde.codemirror, {\n      uploadUrl: DecidimAwesome.editor_uploader_path,\n      uploadFieldName: \"image\",\n      jsonFieldName: \"url\",\n      extraHeaders: {\n        \"X-CSRF-Token\": token\n      }\n    });\n  }\n\n  // Allow linebreaks\n  marked.setOptions({\n    breaks: true\n  });\n\n  // convert to html on submit\n  $form.on(\"submit\", function () {\n    // e.preventDefault();\n    $input.val(marked(inscrybmde.value()));\n  });\n}","map":{"version":3,"names":["lineBreakButtonHandler","InscrybMDE","Europa","hljs","marked","DecidimAwesome","window","quillFormats","destroyQuillEditor","container","content","$","find","html","siblings","remove","removeClass","index","className","match","join","next","is","console","error","concat","createQuillEditor","toolbar","data","disabled","allowedEmptyContentSelector","quillToolbar","list","addImage","header","_toConsumableArray","modalData","hasFetched","fetchData","fetch","method","then","response","ok","text","Error","parser","DOMParser","doc","parseFromString","datasetElements","querySelectorAll","urlElements","forEach","dataset","title","textContent","url","push","openModal","modalContainer","document","createElement","classList","add","modal","modalContent","id","linksDiv","titleElement","appendChild","descriptionElement","style","color","element","link","href","addEventListener","event","preventDefault","copyAndPasteText","display","length","range","quill","getSelection","linkFormat","target","insertText","setSelection","body","modules","linebreak","handlers","$input","innerHTML","val","token","attr","imageResize","imageUpload","name","withCredentials","headers","callbackOK","serverResponse","last","callbackKO","serverError","log","message","checkBeforeSend","file","addClass","Quill","formats","theme","disable","on","getText","CustomEvent","detail","dispatchEvent","root","emptyParagraph","cleanHTML","replace","RegExp","emitter","emit","after","createMarkdownEditor","texts","drag_and_drop_image","$faker","$form","closest","europa","convert","insertBefore","hide","inscrybmde","spellChecker","renderingConfig","codeSyntaxHighlighting","allow_images_in_markdown_editor","gui","statusbar","prepend","inlineAttachment","editors","codemirror4","attach","codemirror","uploadUrl","editor_uploader_path","uploadFieldName","jsonFieldName","extraHeaders","setOptions","breaks","value"],"sources":["/home/daniele/decidim_idra/app/packs/src/decidim/decidim_awesome/editors/editor.js"],"sourcesContent":["/* eslint-disable require-jsdoc, func-style */\n\n/*\n* Since version 0.25 we follow a different strategy and opt to destroy and override completely the original editor\n* That's because editors are instantiated directly instead of creating a global function to instantiate them\n*/\n\nimport lineBreakButtonHandler from \"src/decidim/editor/linebreak_module\"\nimport InscrybMDE from \"inscrybmde\"\nimport Europa from \"europa\"\nimport \"inline-attachment/src/inline-attachment\";\nimport \"inline-attachment/src/codemirror-4.inline-attachment\";\nimport \"inline-attachment/src/jquery.inline-attachment\";\nimport hljs from \"highlight.js\";\nimport \"highlight.js/styles/github.css\";\nimport \"src/decidim/editor/clipboard_override\"\nimport \"src/decidim/vendor/image-resize.min\"\nimport \"src/decidim/vendor/image-upload.min\"\nimport { marked } from \"marked\";\n\nconst DecidimAwesome = window.DecidimAwesome || {};\nconst quillFormats = [\"bold\", \"italic\", \"link\", \"underline\", \"header\", \"list\", \"video\", \"image\", \"alt\", \"break\", \"width\", \"style\", \"code\", \"blockquote\", \"indent\"];\n\n// A tricky way to destroy the quill editor\nexport function destroyQuillEditor(container) {\n  if (container) {\n    const content = $(container).find(\".ql-editor\").html();\n    $(container).html(content);\n    $(container).siblings(\".ql-toolbar\").remove();\n    $(container).find(\"*[class*='ql-']\").removeClass((index, className) => (className.match(/(^|\\s)ql-\\S+/g) || []).join(\" \"));\n    $(container).removeClass((index, className) => (className.match(/(^|\\s)ql-\\S+/g) || []).join(\" \"));\n    if ($(container).next().is(\"p.help-text\")) {\n      $(container).next().remove();\n    }\n  }\n  else {\n    console.error(`editor [${container}] not exists`);\n  }\n}\n\nexport function createQuillEditor(container) {\n    const toolbar = $(container).data(\"toolbar\");\n    const disabled = $(container).data(\"disabled\");\n  \n    const allowedEmptyContentSelector = \"iframe\";\n    let quillToolbar = [\n      [\"bold\", \"italic\", \"underline\", \"linebreak\",],\n      [{ list: \"ordered\" }, { list: \"bullet\" }],\n      [\"link\", \"clean\"],\n      [\"code\", \"blockquote\"],\n      [{ \"indent\": \"-1\" }, { \"indent\": \"+1\" }],\n      [{ 'savedDataset': \"openModal\" }]\n    ]\n  \n    let addImage = $(container).data(\"editorImages\");\n  \n    if (toolbar === \"full\") {\n      quillToolbar = [\n        [{ header: [2, 3, 4, 5, 6, false] }],\n        ...quillToolbar,\n        [\"video\"]\n      ];\n    } else if (toolbar === \"basic\") {\n      quillToolbar = [\n        ...quillToolbar,\n        [\"video\"]\n      ];\n    }\n  \n  \n    let modalData = [];\n    let hasFetched = false; // Add this flag\n  \n    // Function to fetch data\n    function fetchData() {\n      if (!hasFetched) { // Check if fetch hasn't been performed yet\n        fetch('/idra_update', {\n          method: 'GET'\n        })\n          .then(response => {\n            if (response.ok) {\n              return response.text(); // Assuming the response is HTML\n            } else {\n              throw new Error('Failed to fetch the updated content');\n            }\n          })\n          .then(data => {\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(data, 'text/html');\n            const datasetElements = doc.querySelectorAll('#datasets-list a');\n            const urlElements = doc.querySelectorAll('#datasets-list #url');\n    \n            datasetElements.forEach((dataset, index) => {\n              const title = dataset.textContent;\n              const url = urlElements[index].textContent;\n              modalData.push({ title, url });\n            });\n          })\n          .catch(error => {\n            console.error('Error updating partial view:', error);\n          });\n    \n        hasFetched = true; // Set the flag to indicate that fetch has been performed\n      }\n    }\n  \n    // Call the fetchData function\n    fetchData();\n  \n  \n    // Function to create and display the modal\n    function openModal() {\n      // Create a modal container\n      var modalContainer = document.createElement('div');\n      modalContainer.classList.add('modal-container');\n  \n      // Create a modal element\n      var modal = document.createElement('div');\n      modal.classList.add('modal');\n  \n      // Modal content\n      var modalContent = document.createElement('div');\n      modalContent.classList.add('modal-content');\n      modalContent.id = 'modalContent';\n  \n      // Create an unordered list to display the elements as a list\n      // Create a div for the links\n      var linksDiv = document.createElement('div');\n      linksDiv.classList.add('links-column');\n  \n      var titleElement = document.createElement('h1');\n      titleElement.textContent = \"Saved Dataset\";\n      linksDiv.appendChild(titleElement);\n      titleElement.className = \"text-center\"\n  \n      var descriptionElement = document.createElement(\"h5\")\n      descriptionElement.textContent = \"Select a dataset to insert in text editor:\"\n      descriptionElement.style.color = \"gray\"\n      linksDiv.appendChild(descriptionElement)\n  \n      // Loop through modalData array and create links with click event listeners\n      modalData.forEach(function (element) {\n        var link = document.createElement('a');\n        link.href = element.url; // URL as the href attribute of the link\n        link.textContent = element.title; // Title as the visible text of the link\n        linksDiv.appendChild(link);\n    \n        link.addEventListener('click', function (event) {\n          event.preventDefault(); // Prevent default navigation behavior\n    \n          copyAndPasteText(element.title, element.url);\n          modalContainer.style.display = 'none'; // Close the modal\n        });\n    \n        if (element !== modalData[modalData.length - 1]) {\n          linksDiv.appendChild(document.createElement('br'));\n        }\n      });\n  \n  \n      // Function to copy and paste the text into the Quill editor\n       function copyAndPasteText(title, url) {\n      const range = quill.getSelection();\n  \n      const linkFormat = {\n        link: url,\n        target: '_blank',\n      };\n  \n      quill.insertText(range.index, title, linkFormat);\n      quill.setSelection(range.index, title.length, 'user');\n    }\n      modalContent.appendChild(linksDiv);\n      modal.appendChild(modalContent);\n      modalContainer.appendChild(modal);\n      document.body.appendChild(modalContainer);\n  \n      // Open the modal\n      modalContainer.style.display = 'block';\n  \n      // Close modal when clicking outside the modal\n      window.addEventListener('click', function (event) {\n        if (event.target == modalContainer) {\n          modalContainer.style.display = 'none';\n        }\n      });\n    }\n  \n  \n    let modules = {\n      linebreak: {},\n      toolbar: {\n        container: quillToolbar,\n        handlers: {\n          \"linebreak\": lineBreakButtonHandler,\n          \"savedDataset\": openModal,\n        }\n      }\n    };\n  \n    \n  \n  \n    const $input = $(container).siblings('input[type=\"hidden\"]');\n    container.innerHTML = $input.val() || \"\";\n    const token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n    if (addImage) {\n      modules.imageResize = {\n        modules: [\"Resize\", \"DisplaySize\"]\n      }\n      modules.imageUpload = {\n        url: $(container).data(\"uploadImagesPath\"),\n        method: \"POST\",\n        name: \"image\",\n        withCredentials: false,\n        headers: { \"X-CSRF-Token\": token },\n        callbackOK: (serverResponse, next) => {\n          $(\"div.ql-toolbar\").last().removeClass(\"editor-loading\")\n          next(serverResponse.url);\n        },\n        callbackKO: (serverError) => {\n          $(\"div.ql-toolbar\").last().removeClass(\"editor-loading\")\n          console.log(`Image upload error: ${serverError.message}`);\n        },\n        checkBeforeSend: (file, next) => {\n          $(\"div.ql-toolbar\").last().addClass(\"editor-loading\")\n          next(file);\n        }\n      }\n    }\n    const quill = new Quill(container, {\n      modules: modules,\n      formats: quillFormats,\n      theme: \"snow\"\n    });\n  \n  \n  \n    if (disabled) {\n      quill.disable();\n    }\n  \n    quill.on(\"text-change\", () => {\n      const text = quill.getText();\n  \n      // Triggers CustomEvent with the cursor position\n      // It is required in input_mentions.js\n      let event = new CustomEvent(\"quill-position\", {\n        detail: quill.getSelection()\n      });\n      container.dispatchEvent(event);\n  \n      if ((text === \"\\n\" || text === \"\\n\\n\") && quill.root.querySelectorAll(allowedEmptyContentSelector).length === 0) {\n        $input.val(\"\");\n      } else {\n        const emptyParagraph = \"<p><br></p>\";\n        const cleanHTML = quill.root.innerHTML.replace(\n          new RegExp(`^${emptyParagraph}|${emptyParagraph}$`, \"g\"),\n          \"\"\n        );\n        $input.val(cleanHTML);\n      }\n    });\n    // After editor is ready, linebreak_module deletes two extraneous new lines\n    quill.emitter.emit(\"editor-ready\");\n  \n    if (addImage) {\n      const text = $(container).data(\"dragAndDropHelpText\");\n      $(container).after(`<p class=\"help-text\" style=\"margin-top:-1.5rem;\">${text}</p>`);\n    }\n  \n    // After editor is ready, linebreak_module deletes two extraneous new lines\n    quill.emitter.emit(\"editor-ready\");\n  \n    return quill;\n}\n\nexport function createMarkdownEditor(container) {\n  const text = DecidimAwesome.texts.drag_and_drop_image;\n  const token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  const $input = $(container).siblings('input[type=\"hidden\"]');\n  const $faker = $('<textarea name=\"faker-inscrybmde\"/>');\n  const $form = $(container).closest(\"form\");\n  const europa = new Europa();\n  $faker.val(europa.convert($input.val()));\n  $faker.insertBefore($(container));\n  $(container).hide();\n  const inscrybmde = new InscrybMDE({\n    element: $faker[0],\n    spellChecker: false,\n    renderingConfig: {\n      codeSyntaxHighlighting: true,\n      hljs: hljs\n    }\n  });\n  $faker[0].InscrybMDE = inscrybmde;\n\n  // Allow image upload\n  if (DecidimAwesome.allow_images_in_markdown_editor) {\n    $(inscrybmde.gui.statusbar).prepend(`<span class=\"help-text\" style=\"float:left;margin:0;text-align:left;\">${text}</span>`);\n    window.inlineAttachment.editors.codemirror4.attach(inscrybmde.codemirror, {\n      uploadUrl: DecidimAwesome.editor_uploader_path,\n      uploadFieldName: \"image\",\n      jsonFieldName: \"url\",\n      extraHeaders: { \"X-CSRF-Token\": token }\n    });\n  }\n\n  // Allow linebreaks\n  marked.setOptions({\n    breaks: true\n  });\n\n  // convert to html on submit\n  $form.on(\"submit\", () => {\n    // e.preventDefault();\n    $input.val(marked(inscrybmde.value()));\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}