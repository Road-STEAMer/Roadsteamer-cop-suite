{"ast":null,"code":"$(function () {\n  if ($(\".voting-voting_cards\").length === 0 || $(\"#VotingCardsModalHelp\").length === 0 || $(\".sign-out-link\").length === 0) {\n    return;\n  }\n  var $modal = $(\"#VotingCardsModalHelp\");\n  var $card = $modal.find(\".current-choice .vote-card\");\n  var $check = $(\"#voting_cards-skip_help\");\n  var storage = function storage() {\n    return JSON.parse(localStorage.getItem(\"hideTreeFlagsModalHelp\") || \"{}\");\n  };\n  var isChecked = function isChecked() {\n    return storage()[$check.val()];\n  };\n  var saveState = function saveState(val) {\n    var show = storage();\n    show[$check.val()] = val;\n    localStorage.setItem(\"hideTreeFlagsModalHelp\", JSON.stringify(show));\n  };\n  var showModal = function showModal() {\n    if (isChecked()) {\n      return false;\n    }\n    if ($modal.is(\":visible\")) {\n      return false;\n    }\n    return true;\n  };\n  $check.on(\"change\", function () {\n    saveState($check.is(\":checked\"));\n  });\n  $modal.find(\".vote-action\").on(\"click\", function () {\n    $modal.data(\"action\").click();\n    $modal.foundation(\"close\");\n  });\n  $(\".button--vote-button .voting-voting_cards\").on(\"click\", \".vote-action\", function (evt) {\n    if (showModal()) {\n      evt.stopPropagation();\n      evt.preventDefault();\n      $check.prop(\"checked\", isChecked());\n      $modal.data(\"action\", evt.currentTarget);\n      $card[0].classList = evt.currentTarget.classList;\n      if (evt.currentTarget.children.length > 1) {\n        $card.html(\"\".concat(evt.currentTarget.children[1].outerHTML, \"<p class=\\\"vote-label\\\">\").concat(evt.currentTarget.children[1].children[0].textContent, \"</p>\"));\n      } else if ($card[0].classList.contains(\"button\")) {\n        $card[0].classList.remove(\"button\");\n        $card.html(\"<p class=\\\"vote-label\\\">\".concat(evt.currentTarget.title, \"</p>\"));\n      } else {\n        $card.html(\"<p class=\\\"vote-label\\\">\".concat(evt.currentTarget.textContent, \"</p>\"));\n      }\n      $modal.foundation(\"open\");\n    } else {\n      $(evt.currentTarget).closest(\".voting-voting_cards\").addClass(\"loading\");\n    }\n  });\n});","map":{"version":3,"names":["$","length","$modal","$card","find","$check","storage","JSON","parse","localStorage","getItem","isChecked","val","saveState","show","setItem","stringify","showModal","is","on","data","click","foundation","evt","stopPropagation","preventDefault","prop","currentTarget","classList","children","html","concat","outerHTML","textContent","contains","remove","title","closest","addClass"],"sources":["/home/daniele/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/voting/voting_cards.js"],"sourcesContent":["$(() => {\n  if ($(\".voting-voting_cards\").length === 0 || $(\"#VotingCardsModalHelp\").length === 0 || $(\".sign-out-link\").length === 0) {\n    return;\n  }\n\n  const $modal = $(\"#VotingCardsModalHelp\");\n  const $card = $modal.find(\".current-choice .vote-card\");\n  const $check = $(\"#voting_cards-skip_help\");\n\n  const storage = () => {\n    return JSON.parse(localStorage.getItem(\"hideTreeFlagsModalHelp\") || \"{}\")\n  };\n\n  const isChecked = () => {\n    return storage()[$check.val()];\n  };\n\n  const saveState = (val) => {\n    const show = storage();\n    show[$check.val()] = val;\n    localStorage.setItem(\"hideTreeFlagsModalHelp\", JSON.stringify(show))\n  };\n\n  const showModal = () => {\n    if (isChecked()) {\n      return false;\n    }\n    if ($modal.is(\":visible\")) {\n      return false;\n    }\n    return true;\n  };\n\n  $check.on(\"change\", () => {\n    saveState($check.is(\":checked\"))\n  });\n\n  $modal.find(\".vote-action\").on(\"click\", () => {\n    $modal.data(\"action\").click();\n    $modal.foundation(\"close\");\n  });\n\n  $(\".button--vote-button .voting-voting_cards\").on(\"click\", \".vote-action\", (evt) => {\n    if (showModal()) {\n      evt.stopPropagation();\n      evt.preventDefault();\n      $check.prop(\"checked\", isChecked());\n      $modal.data(\"action\", evt.currentTarget);\n      $card[0].classList = evt.currentTarget.classList;\n      if (evt.currentTarget.children.length > 1) {\n        $card.html(`${evt.currentTarget.children[1].outerHTML}<p class=\"vote-label\">${evt.currentTarget.children[1].children[0].textContent}</p>`);\n      } else if ($card[0].classList.contains(\"button\")) {\n        $card[0].classList.remove(\"button\");\n        $card.html(`<p class=\"vote-label\">${evt.currentTarget.title}</p>`);\n      } else {\n        $card.html(`<p class=\"vote-label\">${evt.currentTarget.textContent}</p>`);\n      }\n      $modal.foundation(\"open\");\n    } else {\n      $(evt.currentTarget).closest(\".voting-voting_cards\").addClass(\"loading\");\n    }\n  });\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}