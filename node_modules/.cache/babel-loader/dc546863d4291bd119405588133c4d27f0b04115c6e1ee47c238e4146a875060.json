{"ast":null,"code":"function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nfunction _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _callSuper(t, o, e) {\n  return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return _assertThisInitialized(t);\n}\nfunction _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nfunction _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nfunction _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && _setPrototypeOf(t, e);\n}\nfunction _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nimport * as L from \"leaflet\";\nimport MapController from \"src/decidim/map/controller\";\nimport \"src/decidim/vendor/leaflet-tilelayer-here\";\nvar MapDragMarkerController = /*#__PURE__*/function (_MapController) {\n  function MapDragMarkerController() {\n    _classCallCheck(this, MapDragMarkerController);\n    return _callSuper(this, MapDragMarkerController, arguments);\n  }\n  _inherits(MapDragMarkerController, _MapController);\n  return _createClass(MapDragMarkerController, [{\n    key: \"start\",\n    value: function start() {\n      if (this.config.marker) {\n        this.addMarker(this.config.marker);\n      } else {\n        this.map.fitWorld();\n      }\n    }\n  }, {\n    key: \"addMarker\",\n    value: function addMarker(markerData) {\n      var _this = this;\n      if (markerData.latitude === null || markerData.longitude === null) {\n        return;\n      }\n      var coordinates = {\n        lat: markerData.latitude,\n        lng: markerData.longitude\n      };\n      this.triggerEvent(\"coordinates\", [coordinates]);\n      this.marker = L.marker(coordinates, {\n        icon: this.createIcon(),\n        keyboard: true,\n        title: markerData.title,\n        draggable: true\n      });\n      this.marker.on(\"drag\", function (ev) {\n        _this.triggerEvent(\"coordinates\", [ev.target.getLatLng()]);\n      });\n      this.marker.addTo(this.map);\n      var zoom = parseInt(this.config.zoom, 10) || 14;\n      this.map.setView(coordinates, zoom);\n    }\n  }, {\n    key: \"getMarker\",\n    value: function getMarker() {\n      return this.marker;\n    }\n  }, {\n    key: \"removeMarker\",\n    value: function removeMarker() {\n      if (this.marker) {\n        this.marker.remove();\n        this.marker = null;\n      }\n    }\n  }]);\n}(MapController);\nexport { MapDragMarkerController as default };","map":{"version":3,"names":["L","MapController","MapDragMarkerController","_MapController","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","value","start","config","marker","addMarker","map","fitWorld","markerData","_this","latitude","longitude","coordinates","lat","lng","triggerEvent","icon","createIcon","keyboard","title","draggable","on","ev","target","getLatLng","addTo","zoom","parseInt","setView","getMarker","removeMarker","remove","default"],"sources":["/home/daniele/decidim_idra/app/packs/src/decidim/map/controller/drag_marker.js"],"sourcesContent":["import * as L from \"leaflet\";\nimport MapController from \"src/decidim/map/controller\"\nimport \"src/decidim/vendor/leaflet-tilelayer-here\"\n\nexport default class MapDragMarkerController extends MapController {\n  start() {\n    if (this.config.marker) {\n      this.addMarker(this.config.marker);\n    } else {\n      this.map.fitWorld();\n    }\n  }\n\n  addMarker(markerData) {\n    if (markerData.latitude === null || markerData.longitude === null) {\n      return;\n    }\n\n    const coordinates = {\n      lat: markerData.latitude,\n      lng: markerData.longitude\n    };\n    this.triggerEvent(\"coordinates\", [coordinates]);\n\n    this.marker = L.marker(coordinates, {\n      icon: this.createIcon(),\n      keyboard: true,\n      title: markerData.title,\n      draggable: true\n    });\n    this.marker.on(\"drag\", (ev) => {\n      this.triggerEvent(\"coordinates\", [ev.target.getLatLng()]);\n    });\n    this.marker.addTo(this.map);\n\n    const zoom = parseInt(this.config.zoom, 10) || 14;\n    this.map.setView(coordinates, zoom);\n  }\n\n  getMarker() {\n    return this.marker;\n  }\n\n  removeMarker() {\n    if (this.marker) {\n      this.marker.remove();\n      this.marker = null;\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,CAAC,MAAM,SAAS;AAC5B,OAAOC,aAAa,MAAM,4BAA4B;AACtD,OAAO,2CAA2C;AAAA,IAE7BC,uBAAuB,0BAAAC,cAAA;EAAA,SAAAD,wBAAA;IAAAE,eAAA,OAAAF,uBAAA;IAAA,OAAAG,UAAA,OAAAH,uBAAA,EAAAI,SAAA;EAAA;EAAAC,SAAA,CAAAL,uBAAA,EAAAC,cAAA;EAAA,OAAAK,YAAA,CAAAN,uBAAA;IAAAO,GAAA;IAAAC,KAAA,EAC1C,SAAAC,MAAA,EAAQ;MACN,IAAI,IAAI,CAACC,MAAM,CAACC,MAAM,EAAE;QACtB,IAAI,CAACC,SAAS,CAAC,IAAI,CAACF,MAAM,CAACC,MAAM,CAAC;MACpC,CAAC,MAAM;QACL,IAAI,CAACE,GAAG,CAACC,QAAQ,CAAC,CAAC;MACrB;IACF;EAAC;IAAAP,GAAA;IAAAC,KAAA,EAED,SAAAI,UAAUG,UAAU,EAAE;MAAA,IAAAC,KAAA;MACpB,IAAID,UAAU,CAACE,QAAQ,KAAK,IAAI,IAAIF,UAAU,CAACG,SAAS,KAAK,IAAI,EAAE;QACjE;MACF;MAEA,IAAMC,WAAW,GAAG;QAClBC,GAAG,EAAEL,UAAU,CAACE,QAAQ;QACxBI,GAAG,EAAEN,UAAU,CAACG;MAClB,CAAC;MACD,IAAI,CAACI,YAAY,CAAC,aAAa,EAAE,CAACH,WAAW,CAAC,CAAC;MAE/C,IAAI,CAACR,MAAM,GAAGb,CAAC,CAACa,MAAM,CAACQ,WAAW,EAAE;QAClCI,IAAI,EAAE,IAAI,CAACC,UAAU,CAAC,CAAC;QACvBC,QAAQ,EAAE,IAAI;QACdC,KAAK,EAAEX,UAAU,CAACW,KAAK;QACvBC,SAAS,EAAE;MACb,CAAC,CAAC;MACF,IAAI,CAAChB,MAAM,CAACiB,EAAE,CAAC,MAAM,EAAE,UAACC,EAAE,EAAK;QAC7Bb,KAAI,CAACM,YAAY,CAAC,aAAa,EAAE,CAACO,EAAE,CAACC,MAAM,CAACC,SAAS,CAAC,CAAC,CAAC,CAAC;MAC3D,CAAC,CAAC;MACF,IAAI,CAACpB,MAAM,CAACqB,KAAK,CAAC,IAAI,CAACnB,GAAG,CAAC;MAE3B,IAAMoB,IAAI,GAAGC,QAAQ,CAAC,IAAI,CAACxB,MAAM,CAACuB,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE;MACjD,IAAI,CAACpB,GAAG,CAACsB,OAAO,CAAChB,WAAW,EAAEc,IAAI,CAAC;IACrC;EAAC;IAAA1B,GAAA;IAAAC,KAAA,EAED,SAAA4B,UAAA,EAAY;MACV,OAAO,IAAI,CAACzB,MAAM;IACpB;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAA6B,aAAA,EAAe;MACb,IAAI,IAAI,CAAC1B,MAAM,EAAE;QACf,IAAI,CAACA,MAAM,CAAC2B,MAAM,CAAC,CAAC;QACpB,IAAI,CAAC3B,MAAM,GAAG,IAAI;MACpB;IACF;EAAC;AAAA,EA5CkDZ,aAAa;AAAA,SAA7CC,uBAAuB,IAAAuC,OAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}