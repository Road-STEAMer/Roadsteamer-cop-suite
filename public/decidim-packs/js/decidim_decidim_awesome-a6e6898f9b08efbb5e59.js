!function(){var e,t={93972:function(e,t,n){"use strict";n(81241);var o=n(37353),a=n.n(o);$((function(){if(window.DecidimAwesome=window.DecidimAwesome||{},window.DecidimAwesome.auto_save_forms){var e=window.DecidimAwesome.current_questionnaire;if(e){var t="awesome_autosave:".concat(e),n="awesome_autosave:checkboxes:".concat(e),o=$("form.answer-questionnaire");if(o.length){var i=new(a())("#".concat(o.attr("id")),{name:t,ignores:['[name="utf8"]','[name="authenticity_token"]',"[disabled]",'[type="checkbox"]']}),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?5e3:arguments.length>2&&void 0!==arguments[2]?arguments[2]:700,a=$('<div class="awesome_autosave-notice'.concat(t?" error":"",'">').concat(e,"</div>")).appendTo(o);setTimeout((function(){a.fadeOut(500,(function(){a.remove()}))}),n)};if(window.localStorage){window.localStorage.getItem(t)&&r(window.DecidimAwesome.texts.autosaved_retrieved,!1,5e3),i.apply();try{var c=JSON.parse(window.localStorage.getItem(n));for(var l in c)$("#".concat(l)).prop("checked",c[l])}catch(d){console.log("No checkboxes found")}o.find("input, textarea, select").on("change",(function(){!function(){i.save();var e={};o.find('input[type="checkbox"]').each((function(t,n){e[n.id]=n.checked})),window.localStorage.setItem(n,JSON.stringify(e)),r(window.DecidimAwesome.texts.autosaved_success)}()}))}else r(window.DecidimAwesome.texts.autosaved_error,!0)}else window.DecidimAwesome.questionnaire_answered&&(window.localStorage.removeItem(t),window.localStorage.removeItem(n))}}}));n(42516);var i=n(21351),r=n(78153),c=n.n(r),l=n(97046),d=n.n(l),s=(n(75990),n(2299),n(96083),n(20637)),u=(n(7480),n(35021),n(99712),n(83730),n(87441));function m(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var p=window.DecidimAwesome||{},v=["bold","italic","link","underline","header","list","video","image","alt","break","width","style","code","blockquote","indent"];function g(e){var t=$(e).data("toolbar"),n=$(e).data("disabled"),o=[["bold","italic","underline","linebreak"],[{list:"ordered"},{list:"bullet"}],["link","clean"],["code","blockquote"],[{indent:"-1"},{indent:"+1"}],[{savedDataset:"openModal"}]],a=$(e).data("editorImages");"full"===t?o=[[{header:[2,3,4,5,6,!1]}]].concat(m(o),[["video"]]):"basic"===t&&(o=[].concat(m(o),[["video"]]));var r=[],c=!1;c||(fetch("/idra_update",{method:"GET"}).then((function(e){if(e.ok)return e.text();throw new Error("Failed to fetch the updated content")})).then((function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelectorAll("#datasets-list a"),o=t.querySelectorAll("#datasets-list #url");n.forEach((function(e,t){var n=e.textContent,a=o[t].textContent;r.push({title:n,url:a})}))})).catch((function(e){console.error("Error updating partial view:",e)})),c=!0);var l={linebreak:{},toolbar:{container:o,handlers:{linebreak:i.Z,savedDataset:function(){var e=document.createElement("div");e.classList.add("modal-container");var t=document.createElement("div");t.classList.add("modal");var n=document.createElement("div");n.classList.add("modal-content"),n.id="modalContent";var o=document.createElement("div");o.classList.add("links-column");var a=document.createElement("h1");a.textContent="Saved Dataset",o.appendChild(a),a.className="text-center";var i=document.createElement("h5");i.textContent="Select a dataset to insert in text editor:",i.style.color="gray",o.appendChild(i),r.forEach((function(t){var n=document.createElement("a");n.href=t.url,n.textContent=t.title,o.appendChild(n),n.addEventListener("click",(function(n){var o,a,i,r;n.preventDefault(),o=t.title,a=t.url,i=u.getSelection(),r={link:a,target:"_blank"},u.insertText(i.index,o,r),u.setSelection(i.index,o.length,"user"),e.style.display="none"})),t!==r[r.length-1]&&o.appendChild(document.createElement("br"))})),n.appendChild(o),t.appendChild(n),e.appendChild(t),document.body.appendChild(e),e.style.display="block",window.addEventListener("click",(function(t){t.target==e&&(e.style.display="none")}))}}}},d=$(e).siblings('input[type="hidden"]');e.innerHTML=d.val()||"";var s=$('meta[name="csrf-token"]').attr("content");a&&(l.imageResize={modules:["Resize","DisplaySize"]},l.imageUpload={url:$(e).data("uploadImagesPath"),method:"POST",name:"image",withCredentials:!1,headers:{"X-CSRF-Token":s},callbackOK:function(e,t){$("div.ql-toolbar").last().removeClass("editor-loading"),t(e.url)},callbackKO:function(e){$("div.ql-toolbar").last().removeClass("editor-loading"),console.log("Image upload error: ".concat(e.message))},checkBeforeSend:function(e,t){$("div.ql-toolbar").last().addClass("editor-loading"),t(e)}});var u=new Quill(e,{modules:l,formats:v,theme:"snow"});if(n&&u.disable(),u.on("text-change",(function(){var t=u.getText(),n=new CustomEvent("quill-position",{detail:u.getSelection()});if(e.dispatchEvent(n),"\n"!==t&&"\n\n"!==t||0!==u.root.querySelectorAll("iframe").length){var o="<p><br></p>",a=u.root.innerHTML.replace(new RegExp("^".concat(o,"|").concat(o,"$"),"g"),"");d.val(a)}else d.val("")})),u.emitter.emit("editor-ready"),a){var f=$(e).data("dragAndDropHelpText");$(e).after('<p class="help-text" style="margin-top:-1.5rem;">'.concat(f,"</p>"))}return u.emitter.emit("editor-ready"),u}$((function(){(window.DecidimAwesome.allow_images_in_full_editor||window.DecidimAwesome.allow_images_in_small_editor||window.DecidimAwesome.use_markdown_editor)&&$(".editor-container").each((function(e,t){!function(e){if(e){var t=$(e).find(".ql-editor").html();$(e).html(t),$(e).siblings(".ql-toolbar").remove(),$(e).find("*[class*='ql-']").removeClass((function(e,t){return(t.match(/(^|\s)ql-\S+/g)||[]).join(" ")})),$(e).removeClass((function(e,t){return(t.match(/(^|\s)ql-\S+/g)||[]).join(" ")})),$(e).next().is("p.help-text")&&$(e).next().remove()}else console.error("editor [".concat(e,"] not exists"))}(t),window.DecidimAwesome.use_markdown_editor?function(e){var t=p.texts.drag_and_drop_image,n=$('meta[name="csrf-token"]').attr("content"),o=$(e).siblings('input[type="hidden"]'),a=$('<textarea name="faker-inscrybmde"/>'),i=$(e).closest("form"),r=new(d());a.val(r.convert(o.val())),a.insertBefore($(e)),$(e).hide();var l=new(c())({element:a[0],spellChecker:!1,renderingConfig:{codeSyntaxHighlighting:!0,hljs:s.Z}});a[0].InscrybMDE=l,p.allow_images_in_markdown_editor&&($(l.gui.statusbar).prepend('<span class="help-text" style="float:left;margin:0;text-align:left;">'.concat(t,"</span>")),window.inlineAttachment.editors.codemirror4.attach(l.codemirror,{uploadUrl:p.editor_uploader_path,uploadFieldName:"image",jsonFieldName:"url",extraHeaders:{"X-CSRF-Token":n}})),u.TU.setOptions({breaks:!0}),i.on("submit",(function(){o.val((0,u.TU)(l.value()))}))}(t):g(t)}))})),n(8051)},81241:function(){$((function(){window.DecidimAwesome=window.DecidimAwesome||{};var e=$('meta[name="csrf-token"]').attr("content"),t=$("textarea#proposal_body"),n=window.DecidimAwesome.texts.drag_and_drop_image;t.length&&window.DecidimAwesome.allow_images_in_proposals&&(t.after('<p class="help-text">'.concat(n,"</p>")),t.inlineattachment({uploadUrl:window.DecidimAwesome.editor_uploader_path,uploadFieldName:"image",jsonFieldName:"url",progressText:"[Uploading file...]",urlText:"{filename}",extraHeaders:{"X-CSRF-Token":e}}))}))},42516:function(){$((function(){if(0!==$(".voting-voting_cards").length&&0!==$("#VotingCardsModalHelp").length&&0!==$(".sign-out-link").length){var e=$("#VotingCardsModalHelp"),t=e.find(".current-choice .vote-card"),n=$("#voting_cards-skip_help"),o=function(){return JSON.parse(localStorage.getItem("hideTreeFlagsModalHelp")||"{}")},a=function(){return o()[n.val()]};n.on("change",(function(){var e,t;e=n.is(":checked"),(t=o())[n.val()]=e,localStorage.setItem("hideTreeFlagsModalHelp",JSON.stringify(t))})),e.find(".vote-action").on("click",(function(){e.data("action").click(),e.foundation("close")})),$(".button--vote-button .voting-voting_cards").on("click",".vote-action",(function(o){a()||e.is(":visible")?$(o.currentTarget).closest(".voting-voting_cards").addClass("loading"):(o.stopPropagation(),o.preventDefault(),n.prop("checked",a()),e.data("action",o.currentTarget),t[0].classList=o.currentTarget.classList,o.currentTarget.children.length>1?t.html("".concat(o.currentTarget.children[1].outerHTML,'<p class="vote-label">').concat(o.currentTarget.children[1].children[0].textContent,"</p>")):t[0].classList.contains("button")?(t[0].classList.remove("button"),t.html('<p class="vote-label">'.concat(o.currentTarget.title,"</p>"))):t.html('<p class="vote-label">'.concat(o.currentTarget.textContent,"</p>")),e.foundation("open"))}))}}))},8051:function(e,t,n){var o={"./decidim/decidim_awesome/handcard.svg":57752,"./decidim/decidim_awesome/handcheck.svg":95984,"./decidim/decidim_awesome/pokecode-logo.png":52823};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=i,e.exports=a,a.id=8051},57752:function(e,t,n){"use strict";e.exports=n.p+"media/images/handcard-51f3bf5fe54dca0da55c.svg"},95984:function(e,t,n){"use strict";e.exports=n.p+"media/images/handcheck-d62ce7dd4139913b5519.svg"},52823:function(e,t,n){"use strict";e.exports=n.p+"media/images/pokecode-logo-6f9c59a6f9f00c285e0e.png"},62562:function(){}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=t,e=[],o.O=function(t,n,a,i){if(!n){var r=1/0;for(s=0;s<e.length;s++){n=e[s][0],a=e[s][1],i=e[s][2];for(var c=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(c=!1,i<r&&(r=i));if(c){e.splice(s--,1);var d=a();void 0!==d&&(t=d)}}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[n,a,i]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},o.p="/decidim-packs/",function(){var e={9068:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,i,r=n[0],c=n[1],l=n[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(a in c)o.o(c,a)&&(o.m[a]=c[a]);if(l)var s=l(o)}for(t&&t(n);d<r.length;d++)i=r[d],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(s)},n=self.webpackChunkdecidim_app=self.webpackChunkdecidim_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=o.O(void 0,[2415,292,596,7353,2639],(function(){return o(93972)}));a=o.O(a)}();
//# sourceMappingURL=decidim_decidim_awesome-a6e6898f9b08efbb5e59.js.map