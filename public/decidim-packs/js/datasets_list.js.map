{"version":3,"file":"js/datasets_list.js","mappings":";;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAEA;AAAA;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://decidim-app/./app/packs/entrypoints/datasets_list.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\n\n  function openModal() {\n    var modalOverlay = document.querySelector(\".modal-overlay\");\n    if (modalOverlay) {\n        modalOverlay.style.display = \"block\";\n    } else {\n        console.error(\"Elemento '.modal-overlay' non trovato.\");\n    }\n}\n\nfunction closeModal() {\n    var modalOverlay = document.querySelector(\".modal-overlay\");\n    if (modalOverlay) {\n        modalOverlay.style.display = \"none\";\n    } else {\n        console.error(\"Elemento '.modal-overlay' non trovato.\");\n    }\n    if (window.refreshPage) {\n        window.refreshPage();\n    } else {\n        console.error(\"refreshPage non Ã¨ definito\");\n    }\n}\n\nvar openModalButton = document.getElementById(\"openModalButton\");\nif (openModalButton) {\n    openModalButton.addEventListener(\"click\", openModal);\n}\n\nvar closeModalButton = document.getElementById(\"closeModal\");\nif (closeModalButton) {\n    closeModalButton.addEventListener(\"click\", closeModal);\n}\n\n// Esporta le funzioni globalmente\nwindow.openModal = openModal;\nwindow.closeModal = closeModal;\n\n  function filterDatasets() {\n    var input = document.getElementById('search-bar');\n    var filter = input.value.toLowerCase();\n    var datasetsList = document.getElementById(\"datasets-list\");\n    var datasetItems = datasetsList.getElementsByClassName('dataset-item');\n\n    for (var i = 0; i < datasetItems.length; i++) {\n      var a = datasetItems[i].getElementsByTagName(\"a\")[0];\n      var txtValue = a.textContent || a.innerText;\n      datasetItems[i].style.display = txtValue.toLowerCase().indexOf(filter) > -1 ? \"\" : \"none\";\n    }\n  }\n\n  function refreshPage() {\n    location.reload(); // Preferisci location.reload() per ricaricare la pagina\n  }\n\n  function closeModalIfEmpty(refreshPageFlag) {\n    if (typeof counter !== 'undefined' && counter === 0) { // Assicurati che counter sia definito\n      var modalOverlay = document.querySelector(\".modal-overlay\");\n      if (modalOverlay) {\n        modalOverlay.style.display = \"none\";\n      }\n      updatePartialView(); // Assicurati che questa funzione sia definita\n      if (refreshPageFlag) {\n        refreshPage();\n      }\n    }\n  }\n\n  function deleteDataset(id) {\n    var deleted = 0;\n    if (confirm(\"Are you sure you want to delete this dataset?\")) {\n      fetch('/idra_delete', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRF-Token': document.querySelector(\"meta[name=csrf-token]\").content\n        },\n        body: JSON.stringify({ selected_dataset_id: id })\n      })\n      .then(response => {\n        if (response.ok) {\n          updatePartialView(); // Assicurati che questa funzione sia definita\n          counter--; // Assicurati che counter sia definito\n          var deleteEvent = new CustomEvent('datasetDeleted', { detail: { deleted: deleted } });\n          document.dispatchEvent(deleteEvent);\n          closeModalIfEmpty(true);\n        } else {\n          // Gestisci gli errori se necessario\n        }\n      })\n      .catch(error => {\n        // Gestisci gli errori se necessario\n      });\n    }\n  }\n\n  // Rendi filterDatasets e deleteDataset globali\n  window.filterDatasets = filterDatasets;\n  window.deleteDataset = deleteDataset;\n  window.refreshPage = refreshPage;\n\n  // Aggiungi listener per l'input di ricerca\n  var searchBar = document.getElementById('search-bar');\n  if (searchBar) {\n    searchBar.addEventListener('input', filterDatasets);\n  }\n\n  // Aggiungi listener per i pulsanti di eliminazione\n  document.querySelectorAll('.delete-btn').forEach(button => {\n    button.addEventListener('click', function() {\n      var datasetId = this.getAttribute('data-dataset-id');\n      if (datasetId) {\n        deleteDataset(datasetId);\n      }\n    });\n  });\n});\n"],"names":[],"sourceRoot":""}