{"version":3,"file":"js/5598-9a4426cf7ebed798ef01.js","mappings":"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","sources":["webpack://decidim-app/./app/packs/src/decidim/history.js","webpack://decidim-app/./app/packs/src/decidim/slug_form.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/toggle_nav.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/sort_list.component.js","webpack://decidim-app/./app/packs/src/decidim/input_character_counter.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/subform_toggler.component.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/application.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/managed_users.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/subform_multi_toggler.component.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/resources_permissions.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/budget_rule_toggler.component.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/form.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/auto_buttons_by_position.component.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/auto_label_by_position.component.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/dynamic_fields.component.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/external_domain_whitelist.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/draggable-list.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/sortable.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/admin_autocomplete.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/entrypoints/decidim_admin.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/choose_language.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/moderations.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/newsletters.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/officializations.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/proposal_infinite_edit.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/scope_picker_enabler.component.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/tab_focus.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-admin-0.27.2/app/packs/src/decidim/admin/welcome_notification.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable no-prototype-builtins, no-restricted-syntax, no-param-reassign */\n\nlet callbacks = {};\n\nexport default function registerCallback(callbackId, callback) {\n  callbacks[callbackId] = callback;\n}\n\nconst unregisterCallback = (callbackId) => {\n  callbacks[callbackId] = null;\n}\n\nconst pushState = (url, state = null) => {\n  if (window.history) {\n    window.history.pushState(state, null, url);\n  }\n};\n\nconst replaceState = (url, state = null) => {\n  if (window.history) {\n    window.history.replaceState(state, null,  url);\n  }\n};\n\nconst state = () => {\n  if (window.history) {\n    return window.history.state;\n  }\n  return null;\n};\n\nwindow.onpopstate = (event) => {\n  // Ensure the event is caused by user action\n  if (event.isTrusted) {\n    for (let callbackId in callbacks) {\n      if (callbacks.hasOwnProperty(callbackId)) {\n        callbacks[callbackId](event.state);\n      }\n    }\n  }\n}\n\nexport { registerCallback, unregisterCallback, pushState, replaceState, state };\n","$(() => {\n  const $wrapper = $(\".slug\");\n  const $input = $wrapper.find(\"input\");\n  const $target = $wrapper.find(\"span.slug-url-value\");\n\n  $input.on(\"keyup\", (event) => {\n    $target.html(event.target.value);\n  });\n});\n","/* eslint-disable require-jsdoc */\nconst showHideNav = (evt) => {\n  const navMenu = document.querySelector(\".layout-nav\");\n\n  evt.preventDefault();\n  navMenu.classList.toggle(\"is-nav-open\");\n}\n\nexport default function toggleNav() {\n  const navTrigger = document.querySelector(\".menu-trigger\");\n  if (navTrigger) {\n    navTrigger.addEventListener(\"click\", showHideNav);\n  }\n}\n","/* eslint-disable require-jsdoc */\nimport sortable from \"html5sortable/dist/html5sortable.es\"\n\nclass SortListComponent {\n\n  /**\n   * Creates a sortable list using hmtl5sortable function.\n   *\n   * @param {String} sortListSelector The list selector that has to be sortable.\n   * @param {Object} options An object containing the same options as html5sortable. It also includes\n   *                an extra option `onSortUpdate`, a callback which returns the children collection\n   *                whenever the list order has been changed.\n   *\n   * @returns {void} Nothing.\n   */\n  constructor(sortListSelector, options) {\n    if ($(sortListSelector).length > 0) {\n      sortable(sortListSelector, options)[0].addEventListener(\"sortupdate\", (event) => {\n        const $children = $(event.target).children();\n\n        if (options.onSortUpdate) {\n          options.onSortUpdate($children);\n        }\n      });\n    }\n  }\n}\n\nexport default function createSortList(sortListSelector, options) {\n  return new SortListComponent(sortListSelector, options);\n}\n","/* eslint max-lines: [\"error\", {\"max\": 350, \"skipBlankLines\": true}] */\n\nconst COUNT_KEY = \"%count%\";\n// How often SR announces the message in relation to maximum characters. E.g.\n// if max characters is 1000, screen reader announces the remaining characters\n// every 100 (= 0.1 * 1000) characters. This will be \"floored\" to the closest\n// 100 if the maximum characters > 100. E.g. if max characters is 5500, the\n// threshold is 500 (= Math.floor(550 / 100) * 100). With 100 or less\n// characters, this ratio is omitted and the announce threshold is always set to\n// 10.\nconst SR_ANNOUNCE_THRESHOLD_RATIO = 0.1;\n// The number of characters left after which every keystroke will be announced.\nconst SR_ANNOUNCE_EVERY_THRESHOLD = 10;\nconst DEFAULT_MESSAGES = {\n  charactersAtLeast: {\n    one: `at least ${COUNT_KEY} character`,\n    other: `at least ${COUNT_KEY} characters`\n  },\n  charactersLeft: {\n    one: `${COUNT_KEY} character left`,\n    other: `${COUNT_KEY} characters left`\n  }\n};\nlet MESSAGES = DEFAULT_MESSAGES;\n\nexport default class InputCharacterCounter {\n  static configureMessages(messages) {\n    MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n  }\n\n  constructor(input) {\n    this.$input = input;\n    this.$target = $(this.$input.data(\"remaining-characters\"));\n    this.minCharacters = parseInt(this.$input.attr(\"minlength\"), 10);\n    this.maxCharacters = parseInt(this.$input.attr(\"maxlength\"), 10);\n    this.describeByCounter = typeof this.$input.attr(\"aria-describedby\") === \"undefined\";\n\n    // Define the closest length for the input \"gaps\" defined by the threshold.\n    if (this.maxCharacters > 10) {\n      if (this.maxCharacters > 100) {\n        this.announceThreshold = Math.floor(this.maxCharacters * SR_ANNOUNCE_THRESHOLD_RATIO);\n      } else {\n        this.announceThreshold = 10;\n      }\n\n      // The number of characters left after which every keystroke will be announced.\n      this.announceEveryThreshold = SR_ANNOUNCE_EVERY_THRESHOLD;\n    } else {\n      this.announceThreshold = 1;\n      this.announceEveryThreshold = 1;\n    }\n\n    let targetId = this.$target.attr(\"id\");\n    if (typeof targetId === \"undefined\") {\n      if (this.$input.attr(\"id\") && this.$input.attr(\"id\").length > 0) {\n        targetId = `${this.$input.attr(\"id\")}_characters`;\n      } else {\n        targetId = `characters_${Math.random().toString(36).substr(2, 9)}`;\n      }\n    }\n\n    if (this.$target.length > 0) {\n      this.$target.attr(\"id\", targetId)\n    } else {\n      this.$target = $(`<span id=\"${targetId}\" class=\"form-input-extra-before\" />`)\n\n      // If input is a hidden for WYSIWYG editor add it at the end\n      if (this.$input.parent().is(\".editor\")) {\n        this.$input.parent().after(this.$target);\n      }\n      // Prefix and suffix columns are wrapped in columns, so put the\n      // character counter before that.\n      else if (\n        this.$input.parent().is(\".columns\") &&\n        this.$input.parent().parent().is(\".row\")\n      ) {\n        this.$input.parent().parent().after(this.$target);\n      } else {\n        this.$input.after(this.$target);\n      }\n    }\n\n    if (this.$target.length > 0 && (this.maxCharacters > 0 || this.minCharacters > 0)) {\n      // Create the screen reader target element. We don't want to constantly\n      // announce every change to screen reader, only occasionally.\n      this.$srTarget = $(\n        `<span role=\"status\" id=\"${targetId}_sr\" class=\"show-for-sr remaining-character-count-sr\" />`\n      );\n      this.$target.before(this.$srTarget);\n      this.$target.attr(\"aria-hidden\", \"true\");\n\n      this.$userInput = this.$input;\n\n      // In WYSIWYG editors (Quill) we need to find the active editor from the\n      // DOM node. Quill has the experimental \"find\" method that should work\n      // fine in this case\n      if (Quill && this.$input.parent().is(\".editor\")) {\n        // Wait until the next javascript loop so Quill editors are created\n        setTimeout(() => {\n          this.editor = Quill.find(this.$input.siblings(\".editor-container\")[0]);\n          this.$userInput = $(this.editor.root);\n          this.initialize();\n        });\n      } else {\n        this.initialize();\n      }\n    }\n  }\n\n  initialize() {\n    this.updateInputLength();\n    this.previousInputLength = this.inputLength;\n\n    this.bindEvents();\n    this.setDescribedBy(true);\n  }\n\n  setDescribedBy(active) {\n    if (!this.describeByCounter) {\n      return;\n    }\n\n    if (active) {\n      this.$userInput.attr(\"aria-describedby\", this.$srTarget.attr(\"id\"));\n    } else {\n      this.$userInput.removeAttr(\"aria-describedby\");\n    }\n  }\n\n  bindEvents() {\n    if (this.editor) {\n      this.editor.on(\"text-change\", () => {\n        this.handleInput();\n      });\n    } else {\n      this.$userInput.on(\"input\", () => {\n        this.handleInput();\n      });\n    }\n\n    this.$userInput.on(\"keyup\", () => {\n      this.updateStatus();\n    });\n    this.$userInput.on(\"focus\", () => {\n      this.updateScreenReaderStatus();\n    });\n    this.$userInput.on(\"blur\", () => {\n      this.updateScreenReaderStatus();\n      this.setDescribedBy(true);\n    });\n    if (this.$userInput.get(0) !== null) {\n      this.$userInput.get(0).addEventListener(\"emoji.added\", () => {\n        this.updateStatus();\n      });\n    }\n    this.updateStatus();\n    this.updateScreenReaderStatus();\n  }\n\n  getInputLength() {\n    return this.inputLength;\n  }\n\n  updateInputLength() {\n    this.previousInputLength = this.inputLength;\n    if (this.editor) {\n      this.inputLength = this.editor.getLength();\n    } else {\n      this.inputLength = this.$input.val().length;\n    }\n  }\n\n  handleInput() {\n    this.updateInputLength();\n    this.checkScreenReaderUpdate();\n    // If the input is \"described by\" the character counter, some screen\n    // readers (NVDA) announce the status twice when it is updated. By\n    // removing the aria-describedby attribute while the user is typing makes\n    // the screen reader announce the status only once.\n    this.setDescribedBy(false);\n  }\n\n  /**\n   * This compares the current inputLength to the previous value and decides\n   * whether the user is currently adding or deleting characters from the view.\n   *\n   * @returns {String} The input direction either \"ins\" for insert or \"del\" for\n   *   delete.\n   */\n  getInputDirection() {\n    if (this.inputLength < this.previousInputLength) {\n      return \"del\";\n    }\n\n    return \"ins\";\n  }\n\n  getScreenReaderLength() {\n    const currentLength = this.getInputLength();\n    if (this.maxCharacters < 10) {\n      return currentLength;\n    } else if (this.maxCharacters - currentLength <= this.announceEveryThreshold) {\n      return currentLength;\n    }\n\n    const srLength = currentLength - currentLength % this.announceThreshold;\n\n    // Prevent the screen reader telling too many characters left if the user\n    // deletes a characters. This can cause confusing experience e.g. when the\n    // user is closing the maximum amount of characters, so if the previous\n    // announcement was \"10 characters left\" and the user removes one character,\n    // the screen reader would announce \"100 characters left\" next time (when\n    // they actually have only 11 characters left). Similar when they are\n    // deleting a character at 900 characters, the screen reader would announce\n    // \"1000 characters left\" even when they only have 901 characters left.\n    if (this.getInputDirection() === \"del\") {\n      // The first branch makes sure that if the SR length matches the actual\n      // length, it will be always announced.\n      if (srLength === currentLength) {\n        return srLength;\n      // The second branch checks that if we are at the final threshold, we\n      // should not announce \"0 characters left\" when the user deletes more than\n      // the \"announce after every stroke\" limit (this.announceEveryThreshold).\n      } else if (this.maxCharacters - srLength === this.announceThreshold) {\n        return this.announcedAt || currentLength;\n      // The third branch checks that when deleting characters, we should\n      // announce the next threshold to get accurate annoucement. E.g. when we\n      // have 750 characters left and the user deletes 100 characters at once,\n      // we should announce \"700 characters left\" after that deletion.\n      } else if (srLength < currentLength) {\n        return srLength + this.announceThreshold;\n      }\n    // This fixes an issue in the following situation:\n    // 1. 750 characters left\n    // 2. Delete 100 characters in a row\n    // 3. SR: \"800 characters left\" (actual 850)\n    // 4. Type one additional character\n    // 5. Without this, SR would announce \"900 characters left\" = confusing\n    } else if (srLength < this.announcedAt) {\n      return this.announcedAt;\n    }\n\n    return srLength;\n  }\n\n  getMessages(currentLength = null) {\n    const showMessages = [];\n    let inputLength = currentLength;\n    if (inputLength === null) {\n      inputLength = this.getInputLength()\n    }\n\n    if (this.minCharacters > 0) {\n      let message = MESSAGES.charactersAtLeast.other;\n      if (this.minCharacters === 1) {\n        message = MESSAGES.charactersAtLeast.one;\n      }\n      showMessages.push(message.replace(COUNT_KEY, this.minCharacters));\n    }\n\n    if (this.maxCharacters > 0) {\n      const remaining = this.maxCharacters - inputLength;\n      let message = MESSAGES.charactersLeft.other;\n      if (remaining === 1) {\n        message = MESSAGES.charactersLeft.one;\n      }\n      this.$input[0].dispatchEvent(\n        new CustomEvent(\"characterCounter\", {detail: {remaining: remaining}})\n      );\n      showMessages.push(message.replace(COUNT_KEY, remaining));\n    }\n\n    return showMessages;\n  }\n\n  updateStatus() {\n    this.$target.text(this.getMessages().join(\", \"));\n  }\n\n  checkScreenReaderUpdate() {\n    if (this.maxCharacters < 1) {\n      return;\n    }\n\n    const currentLength = this.getScreenReaderLength();\n    if (currentLength === this.announcedAt) {\n      return;\n    }\n\n    this.announcedAt = currentLength;\n    this.updateScreenReaderStatus(currentLength);\n  }\n\n  updateScreenReaderStatus(currentLength = null) {\n    this.$srTarget.text(this.getMessages(currentLength).join(\", \"));\n  }\n}\n\nconst createCharacterCounter = ($input) => {\n  if (typeof $input !== \"undefined\" && $input.length) {\n    $input.data(\"remaining-characters-counter\", new InputCharacterCounter($input));\n  }\n}\n\n$(() => {\n  $(\"input[type='text'], textarea, .editor>input[type='hidden']\").each((_i, elem) => {\n    const $input = $(elem);\n\n    if (!$input.is(\"[minlength]\") && !$input.is(\"[maxlength]\")) {\n      return;\n    }\n\n    createCharacterCounter($input);\n  });\n});\n\nexport {InputCharacterCounter, createCharacterCounter};\n","export default class SubformTogglerComponent {\n  constructor(options = {}) {\n    this.controllerSelect = options.controllerSelect;\n    this.subformWrapperClass = options.subformWrapperClass;\n    this.globalWrapperSelector = options.globalWrapperSelector;\n    this._bindEvent();\n    this._runAll();\n  }\n\n  _runAll() {\n    this.controllerSelect.each((idx, el) => {\n      this.run(el);\n    });\n  }\n\n  run(target) {\n    let $target = $(target);\n    let subformWrapperClass = this.subformWrapperClass;\n    let value = $target.val();\n\n    let $form = $target.parents(this.globalWrapperSelector);\n    let $subforms = $form.find(`.${subformWrapperClass}`);\n    let $selectedSubform = $subforms.filter(`#${subformWrapperClass}-${value}`)\n\n    $subforms.find(\"input,textarea,select\").prop(\"disabled\", true);\n    $subforms.hide();\n\n    $selectedSubform.find(\"input,textarea,select\").prop(\"disabled\", false);\n    $selectedSubform.show();\n  }\n\n  _bindEvent() {\n    this.controllerSelect.on(\"change\", (event) => {\n      this.run(event.target);\n    });\n  }\n}\n\n","/* eslint-disable no-invalid-this */\n\nimport toggleNav from \"src/decidim/admin/toggle_nav\"\nimport createSortList from \"src/decidim/admin/sort_list.component\"\nimport createQuillEditor from \"src/decidim/editor\"\nimport formDatePicker from \"src/decidim/form_datepicker\"\nimport DataPicker from \"src/decidim/data_picker\"\nimport FormFilterComponent from \"src/decidim/form_filter\"\nimport Configuration from \"src/decidim/configuration\"\nimport InputCharacterCounter from \"src/decidim/input_character_counter\"\nimport managedUsersForm from \"src/decidim/admin/managed_users\"\n\nwindow.Decidim = window.Decidim || {};\nwindow.Decidim.managedUsersForm = managedUsersForm\nwindow.Decidim.config = new Configuration()\nwindow.Decidim.InputCharacterCounter = InputCharacterCounter;\n\n$(() => {\n  window.theDataPicker = new DataPicker($(\".data-picker\"));\n\n  $(document).foundation();\n\n  toggleNav();\n\n  createSortList(\"#steps tbody\", {\n    placeholder: $('<tr style=\"border-style: dashed; border-color: #000\"><td colspan=\"4\">&nbsp;</td></tr>')[0],\n    onSortUpdate: ($children) => {\n      const sortUrl = $(\"#steps tbody\").data(\"sort-url\")\n      const order = $children.map((index, child) => $(child).data(\"id\")).toArray();\n\n      $.ajax({\n        method: \"POST\",\n        url: sortUrl,\n        contentType: \"application/json\",\n        data: JSON.stringify({ items_ids: order }) }, // eslint-disable-line camelcase\n      );\n    }\n  })\n\n  formDatePicker();\n\n  $(\".editor-container\").each((_idx, container) => {\n    createQuillEditor(container);\n  });\n\n  $(\"form.new_filter\").each(function () {\n    const formFilter = new FormFilterComponent($(this));\n\n    formFilter.mountComponent();\n  })\n});\n\n","/* eslint-disable require-jsdoc */\n\nimport SubformTogglerComponent from \"src/decidim/admin/subform_toggler.component\"\n\nexport default function managedUsersForm() {\n  const subformToggler = new SubformTogglerComponent({\n    controllerSelect: $(\"select#impersonate_user_authorization_handler_name\"),\n    subformWrapperClass: \"authorization-handler\",\n    globalWrapperSelector: \"form\"\n  });\n\n  subformToggler.run();\n}\n","export default class SubformMultiTogglerComponent {\n  constructor(options = {}) {\n    this.controllerSelect = options.controllerSelect;\n    this.subformWrapperClass = options.subformWrapperClass;\n    this.globalWrapperSelector = options.globalWrapperSelector;\n    this._bindEvent();\n    this._runAll();\n  }\n\n  _runAll() {\n    this.controllerSelect.each((idx, el) => {\n      this.run(el);\n    });\n  }\n\n  run(target) {\n    let $target = $(target);\n    let subformWrapperClass = this.subformWrapperClass;\n    let value = $target.val();\n\n    let $form = $target.parents(this.globalWrapperSelector);\n    let $selectedSubform = $form.find(`#${subformWrapperClass}-${value}`)\n\n    if ($target.prop(\"checked\")) {\n      $selectedSubform.find(\"input,textarea,select\").prop(\"disabled\", false);\n      $selectedSubform.show();\n    } else {\n      $selectedSubform.find(\"input,textarea,select\").prop(\"disabled\", true);\n      $selectedSubform.hide();\n    }\n  }\n\n  _bindEvent() {\n    this.controllerSelect.on(\"change\", (event) => {\n      this.run(event.target);\n    });\n  }\n}\n","import SubformMultiTogglerComponent from \"src/decidim/admin/subform_multi_toggler.component\"\n\n$(() => {\n  const subformMultiToggler = new SubformMultiTogglerComponent({\n    controllerSelect: $(\"input[name$=\\\\[authorization_handlers\\\\]\\\\[\\\\]]\"),\n    subformWrapperClass: \"authorization-handler\",\n    globalWrapperSelector: \"fieldset\"\n  });\n\n  subformMultiToggler.run();\n})\n","export default class BudgetRuleTogglerComponent {\n  constructor(options = {}) {\n    this.ruleCheckboxes = options.ruleCheckboxes;\n    this._runAll();\n  }\n\n  _runAll() {\n    this.ruleCheckboxes.each((_i, checkbox) => {\n      this._bindEvent(checkbox);\n      this.run(checkbox);\n    });\n  }\n\n  _bindEvent(target) {\n    $(target).on(\"change\", (event) => {\n      this.run(event.target);\n    });\n  }\n\n  run(target) {\n    this.toggleTextInput(target);\n\n    if ($(target).prop(\"checked\")) {\n      this.ruleCheckboxes.filter(\n        (_i, checkbox) => {\n          return checkbox !== target;\n        }).prop(\"checked\", false).each(\n        (_i, checkbox) => {\n          this.toggleTextInput(checkbox);\n        });\n    }\n  }\n\n  toggleTextInput(target) {\n    const container = $(target).closest(\"div\");\n    if (container.length < 1) {\n      return;\n    }\n    const containerClassPrefix = container.attr(\"class\").\n      replace(/^vote_rule_/, \"vote_\").\n      replace(/_enabled_container$/, \"\");\n    const input = $(`[class^=\"${containerClassPrefix}\"][class$=\"_container\"]`);\n\n    if ($(target).prop(\"checked\")) {\n      input.slideDown();\n    } else {\n      input.slideUp();\n    }\n  }\n}\n","import \"src/decidim/admin/scope_picker_enabler.component\"\nimport \"src/decidim/admin/proposal_infinite_edit\"\n\nimport BudgetRuleTogglerComponent from \"src/decidim/admin/budget_rule_toggler.component\"\n\n// Checks if the form contains fields with special CSS classes added in\n// Decidim::Admin::SettingsHelper and acts accordingly.\n$(() => {\n  const budgetRuleToggler = new BudgetRuleTogglerComponent({\n    ruleCheckboxes: $(\"input[id^='component_settings_vote_rule_']\")\n  });\n\n  budgetRuleToggler.run();\n\n  // Prevents readonly containers from being modified.\n  const $readonlyContainer = $(\".readonly_container input\");\n\n  $readonlyContainer.click((event) => {\n    event.preventDefault();\n    return false;\n  });\n\n  // Target fields:\n  // - amendments_wizard_help_text\n  // - amendments_visibility\n  // - amendment_creation_enabled\n  // - amendment_reaction_enabled\n  // - amendment_promotion_enabled\n\n  // (1) Hides target fields if amendments_enabled component setting is NOT checked.\n  // (2) Toggles visibilty of target fields when amendments_enabled component setting is clicked.\n  const $amendmentsEnabled = $(\"input#component_settings_amendments_enabled\");\n\n  if ($amendmentsEnabled.length > 0) {\n    const $amendmentStepSettings = $(\".amendments_wizard_help_text_container, .amendments_visibility_container, .amendment_creation_enabled_container, .amendment_reaction_enabled_container, .amendment_promotion_enabled_container\");\n\n    if ($amendmentsEnabled.is(\":not(:checked)\")) {\n      $amendmentStepSettings.hide();\n    }\n\n    $amendmentsEnabled.click(() => {\n      $amendmentStepSettings.toggle();\n    });\n  }\n});\n","export default class AutoButtonsByPositionComponent {\n  constructor(options = {}) {\n    this.listSelector = options.listSelector;\n    this.hideOnFirstSelector = options.hideOnFirstSelector;\n    this.hideOnLastSelector = options.hideOnLastSelector;\n\n    this.run();\n  }\n\n  run() {\n    const $list = $(this.listSelector);\n    const hideOnFirst = this.hideOnFirstSelector;\n    const hideOnLast = this.hideOnLastSelector;\n\n    if ($list.length === 1) {\n      const $item = $list.first();\n\n      $item.find(hideOnFirst).hide();\n      $item.find(hideOnLast).hide();\n    } else {\n      $list.each((idx, el) => {\n        if (el.id === $list.first().attr(\"id\")) {\n          $(el).find(hideOnFirst).hide();\n          $(el).find(hideOnLast).show();\n        }\n        else if (el.id === $list.last().attr(\"id\")) {\n          $(el).find(hideOnLast).hide();\n          $(el).find(hideOnFirst).show();\n        }\n        else {\n          $(el).find(hideOnLast).show();\n          $(el).find(hideOnFirst).show();\n        }\n      });\n    }\n  }\n}\n","export default class AutoLabelByPositionComponent {\n  constructor(options = {}) {\n    this.listSelector = options.listSelector;\n    this.labelSelector = options.labelSelector;\n    this.onPositionComputed = options.onPositionComputed;\n\n    this.run();\n  }\n\n  run() {\n    const $list = $(this.listSelector);\n\n    $list.each((idx, el) => {\n      const $label = $(el).find(this.labelSelector);\n      const labelContent = $label.html();\n\n      if (labelContent.match(/#(\\d+)/)) {\n        $label.html(labelContent.replace(/#(\\d+)/, `#${idx + 1}`));\n      } else {\n        $label.html(`${labelContent} #${idx + 1}`);\n      }\n\n      if (this.onPositionComputed) {\n        this.onPositionComputed(el, idx);\n      }\n    });\n  }\n}\n","/* eslint-disable require-jsdoc */\nclass DynamicFieldsComponent {\n  constructor(options = {}) {\n    this.wrapperSelector = options.wrapperSelector;\n    this.containerSelector = options.containerSelector;\n    this.fieldSelector = options.fieldSelector;\n    this.addFieldButtonSelector = options.addFieldButtonSelector;\n    this.addSeparatorButtonSelector = options.addSeparatorButtonSelector;\n    this.addTitleAndDescriptionButtonSelector = options.addTitleAndDescriptionButtonSelector;\n    this.fieldTemplateSelector = options.fieldTemplateSelector;\n    this.separatorTemplateSelector = options.separatorTemplateSelector;\n    this.TitleAndDescriptionTemplateSelector = options.TitleAndDescriptionTemplateSelector;\n    this.removeFieldButtonSelector = options.removeFieldButtonSelector;\n    this.moveUpFieldButtonSelector = options.moveUpFieldButtonSelector;\n    this.moveDownFieldButtonSelector = options.moveDownFieldButtonSelector;\n    this.onAddField = options.onAddField;\n    this.onRemoveField = options.onRemoveField;\n    this.onMoveUpField = options.onMoveUpField;\n    this.onMoveDownField = options.onMoveDownField;\n    this.placeholderId = options.placeholderId;\n    this.elementCounter = 0;\n    this._enableInterpolation();\n    this._activateFields();\n    this._bindEvents();\n  }\n\n  _enableInterpolation() {\n    $.fn.replaceAttribute = function(attribute, placeholder, value) {\n      $(this).find(`[${attribute}*=${placeholder}]`).addBack(`[${attribute}*=${placeholder}]`).each((index, element) => {\n        $(element).attr(attribute, $(element).attr(attribute).replace(placeholder, value));\n      });\n\n      return this;\n    }\n\n    $.fn.template = function(placeholder, value) {\n      // See the comment below in the `_addField()` method regarding the\n      // `<template>` tag support in IE11.\n      const $subtemplate = $(this).find(\"template, .decidim-template\");\n\n      if ($subtemplate.length > 0) {\n        $subtemplate.html((index, oldHtml) => $(oldHtml).template(placeholder, value)[0].outerHTML);\n      }\n\n      // Handle those subtemplates that are mapped with the `data-template`\n      // attribute. This is also because of the IE11 support.\n      const $subtemplateParents = $(this).find(\"[data-template]\");\n\n      if ($subtemplateParents.length > 0) {\n        $subtemplateParents.each((_i, elem) => {\n          const $self = $(elem);\n          const $tpl = $($self.data(\"template\"));\n\n          // Duplicate the sub-template with a unique ID as there may be\n          // multiple parent templates referring to the same sub-template.\n          const $subtpl = $($tpl[0].outerHTML);\n          const subtemplateId = `${$tpl.attr(\"id\")}-${value}`;\n          const subtemplateSelector = `#${subtemplateId}`;\n          $subtpl.attr(\"id\", subtemplateId);\n          $self.attr(\"data-template\", subtemplateSelector).data(\"template\", subtemplateSelector);\n          $tpl.after($subtpl);\n\n          $subtpl.html((index, oldHtml) => $(oldHtml).template(placeholder, value)[0].outerHTML);\n        });\n      }\n\n      $(this).replaceAttribute(\"id\", placeholder, value);\n      $(this).replaceAttribute(\"name\", placeholder, value);\n      $(this).replaceAttribute(\"data-tabs-content\", placeholder, value);\n      $(this).replaceAttribute(\"for\", placeholder, value);\n      $(this).replaceAttribute(\"tabs_id\", placeholder, value);\n      $(this).replaceAttribute(\"href\", placeholder, value);\n      $(this).replaceAttribute(\"value\", placeholder, value);\n\n      return this;\n    }\n  }\n\n  _bindEvents() {\n    $(this.wrapperSelector).on(\"click\", this.addFieldButtonSelector, (event) =>\n      this._bindSafeEvent(event, () => this._addField(this.fieldTemplateSelector))\n    );\n\n    if (this.addSeparatorButtonSelector) {\n      $(this.wrapperSelector).on(\"click\", this.addSeparatorButtonSelector, (event) =>\n        this._bindSafeEvent(event, () => this._addField(this.separatorTemplateSelector))\n      );\n    }\n\n    if (this.addTitleAndDescriptionButtonSelector) {\n      $(this.wrapperSelector).on(\"click\", this.addTitleAndDescriptionButtonSelector, (event) =>\n        this._bindSafeEvent(event, () => this._addField(this.TitleAndDescriptionTemplateSelector))\n      );\n    }\n\n    $(this.wrapperSelector).on(\"click\", this.removeFieldButtonSelector, (event) =>\n      this._bindSafeEvent(event, (target) => this._removeField(target))\n    );\n\n    if (this.moveUpFieldButtonSelector) {\n      $(this.wrapperSelector).on(\"click\", this.moveUpFieldButtonSelector, (event) =>\n        this._bindSafeEvent(event, (target) => this._moveUpField(target))\n      );\n    }\n\n    if (this.moveDownFieldButtonSelector) {\n      $(this.wrapperSelector).on(\"click\", this.moveDownFieldButtonSelector, (event) =>\n        this._bindSafeEvent(event, (target) => this._moveDownField(target))\n      );\n    }\n  }\n\n  _bindSafeEvent(event, cb) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    try {\n      return cb(event.target);\n    } catch (error) {\n      console.error(error); // eslint-disable-line no-console\n      return error;\n    }\n  }\n\n  // Adds a field.\n  //\n  // template - A String matching the type of the template. Expected to be\n  //  either \".decidim-question-template\" or \".decidim-separator-template\".\n  _addField(templateClass = \".decidim-template\") {\n    const $wrapper = $(this.wrapperSelector);\n    const $container = $wrapper.find(this.containerSelector);\n\n    // Allow defining the template using a `data-template` attribute on the\n    // wrapper element. This is to allow child templates which would otherwise\n    // be impossible using `<script type=\"text/template\">`. See the comment\n    // below regarding the `<template>` tag and IE11.\n    const templateSelector = $wrapper.data(\"template\");\n    let $template = null;\n    if (templateSelector) {\n      $template = $(templateSelector);\n    }\n    if ($template === null || $template.length < 1) {\n      // To preserve IE11 backwards compatibility, the views are using\n      // `<script type=\"text/template\">` with a given `class` instead of\n      // `<template>`. The `<template> tags are parsed in IE11 along with the\n      // DOM which may cause the form elements inside them to break the forms\n      // as they are submitted with them.\n      $template = $wrapper.children(`template, ${templateClass}`);\n    }\n\n    const $newField = $($template.html()).template(this.placeholderId, this._getUID());\n\n    $newField.find(\"ul.tabs\").attr(\"data-tabs\", true);\n\n    const $lastQuestion = $container.find(this.fieldSelector).last()\n    if ($lastQuestion.length > 0) {\n      $lastQuestion.after($newField);\n    } else {\n      $newField.appendTo($container);\n    }\n\n    $newField.foundation();\n\n    if (this.onAddField) {\n      this.onAddField($newField);\n    }\n  }\n\n  _removeField(target) {\n    const $target = $(target);\n    const $removedField = $target.parents(this.fieldSelector);\n    const idInput = $removedField.find(\"input\").filter((idx, input) => input.name.match(/id/));\n\n    if (idInput.length > 0) {\n      const deletedInput = $removedField.find(\"input\").filter((idx, input) => input.name.match(/delete/));\n\n      if (deletedInput.length > 0) {\n        $(deletedInput[0]).val(true);\n      }\n\n      $removedField.addClass(\"hidden\");\n      $removedField.hide();\n    } else {\n      $removedField.remove();\n    }\n\n    if (this.onRemoveField) {\n      this.onRemoveField($removedField);\n    }\n  }\n\n  _moveUpField(target) {\n    const $target = $(target);\n    const $movedUpField = $target.parents(this.fieldSelector);\n\n    $movedUpField.prev().before($movedUpField);\n\n    if (this.onMoveUpField) {\n      this.onMoveUpField($movedUpField);\n    }\n  }\n\n  _moveDownField(target) {\n    const $target = $(target);\n    const $movedDownField = $target.parents(this.fieldSelector);\n\n    $movedDownField.next().after($movedDownField);\n\n    if (this.onMoveDownField) {\n      this.onMoveDownField($movedDownField);\n    }\n  }\n\n  _activateFields() {\n    // Move the `<script type=\"text/template\">` elements to the bottom of the\n    // list container so that they will not cause the question moving\n    // functionality to break since it assumes that all children elements are\n    // the dynamic field list child items.\n    const $wrapper = $(this.wrapperSelector);\n    const $container = $wrapper.find(this.containerSelector);\n    $container.append($container.find(\"script\"));\n\n    $(this.fieldSelector).each((idx, el) => {\n      $(el).template(this.placeholderId, this._getUID());\n\n      $(el).find(\"ul.tabs\").attr(\"data-tabs\", true);\n    })\n  }\n\n  _getUID() {\n    this.elementCounter += 1;\n\n    return (new Date().getTime()) + this.elementCounter;\n  }\n}\n\nexport default function createDynamicFields(options) {\n  return new DynamicFieldsComponent(options);\n}\n","import AutoButtonsByPositionComponent from \"src/decidim/admin/auto_buttons_by_position.component\"\nimport AutoLabelByPositionComponent from \"src/decidim/admin/auto_label_by_position.component\"\nimport createDynamicFields from \"src/decidim/admin/dynamic_fields.component\"\nimport createSortList from \"src/decidim/admin/sort_list.component\"\n\n$(() => {\n  const dynamicFieldDefinitions = [\n    {\n      placeHolderId: \"external-domain-id\",\n      wrapperSelector: \".external-domains\",\n      fieldSelector: \".external-domain\",\n      addFieldSelector: \".add-external-domain\"\n    }\n  ];\n\n  dynamicFieldDefinitions.forEach((section) => {\n    const fieldSelectorSuffix = section.fieldSelector.replace(\".\", \"\");\n\n    const autoButtonsByPosition = new AutoButtonsByPositionComponent({\n      listSelector: `${section.fieldSelector}:not(.hidden)`,\n      hideOnFirstSelector: \".move-up-question\",\n      hideOnLastSelector: \".move-down-question\"\n    });\n\n    const autoLabelByPosition = new AutoLabelByPositionComponent({\n      listSelector: `${section.fieldSelector}:not(.hidden)`,\n      labelSelector: \".card-title span:first\",\n      onPositionComputed: (el, idx) => {\n        $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n      }\n    });\n\n    const createSortableList = () => {\n      createSortList(\".external-domains-list:not(.published)\", {\n        handle: \".external-domain-divider\",\n        placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n        forcePlaceholderSize: true,\n        onSortUpdate: () => {\n          autoLabelByPosition.run();\n          autoButtonsByPosition.run();\n        }\n      });\n    };\n\n    const hideDeletedItem = ($target) => {\n      const inputDeleted = $target.find(\"input[name$=\\\\[deleted\\\\]]\").val();\n\n      if (inputDeleted === \"true\") {\n        $target.addClass(\"hidden\");\n        $target.hide();\n\n        // Allows re-submitting of the form\n        $(\"input\", $target).removeAttr(\"required\");\n      }\n    };\n\n    createDynamicFields({\n      placeholderId: section.placeHolderId,\n      wrapperSelector: section.wrapperSelector,\n      containerSelector: `${section.wrapperSelector}-list`,\n      fieldSelector: section.fieldSelector,\n      addFieldButtonSelector: section.addFieldSelector,\n      removeFieldButtonSelector: `.remove-${fieldSelectorSuffix}`,\n      moveUpFieldButtonSelector: \".move-up-question\",\n      moveDownFieldButtonSelector: \".move-down-question\",\n      onAddField: () => {\n        createSortableList();\n\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n      },\n      onRemoveField: ($field) => {\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n\n        // Allows re-submitting of the form\n        $(\"input\", $field).removeAttr(\"required\");\n      },\n      onMoveUpField: () => {\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n      },\n      onMoveDownField: () => {\n        autoLabelByPosition.run();\n        autoButtonsByPosition.run();\n      }\n    });\n\n    createSortableList();\n\n    $(section.fieldSelector).each((_idx, el) => {\n      const $target = $(el);\n\n      hideDeletedItem($target);\n    });\n\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  });\n});\n","/* eslint-disable require-jsdoc */\nimport createSortList from \"src/decidim/admin/sort_list.component\"\n\nexport default function createSortableList(lists) {\n  createSortList(lists, {\n    handle: \"li\",\n    forcePlaceholderSize: true,\n    connectWith: \".js-connect\"\n  })\n}\n\n// Once in DOM\n$(() => {\n  const $draggables = $(\".draggable-list\")\n  let draggablesClassNames = []\n\n  $draggables.each((index, elem) => {\n    draggablesClassNames = [...draggablesClassNames, `.${elem.className.split(\" \").filter((name) => (/js-list.*/).test(name))[0]}`]\n  })\n\n  document.addEventListener(\"drag\", function (event) {\n    $draggables.not(event.target.parentElement).addClass(\"dragging\")\n  })\n\n  document.addEventListener(\"dragend\", function() {\n    $draggables.removeClass(\"dragging\")\n  })\n\n  createSortableList(draggablesClassNames.join(\", \"))\n})\n","/* eslint-disable no-ternary */\n\nimport createSortList from \"src/decidim/admin/sort_list.component\"\n\n// Once in DOM\n$(() => {\n  const selector = \".js-sortable\"\n  const $sortable = $(selector)\n\n  $sortable.each((index, elem) => {\n    const item = (elem.id)\n      ? `#${elem.id}`\n      : selector\n\n    createSortList(item, {\n      handle: \"li\",\n      forcePlaceholderSize: true,\n      placeholderClass: \"sort-placeholder\"\n    })\n  })\n})\n","import AutoComplete from \"src/decidim/autocomplete\";\n\n/**\n * This function can be used to create an autocomplete input automatically\n * from the following kind of div:\n *   <div data-autocomplete=\"{...}\"></div>\n *\n * The data-autocomplete attribute should contain the following configuration\n * as an encoded JSON, which is used to generate the AutoComplete options:\n * - name: assembly_member[user_id],\n * - options: [],\n * - placeholder: \"Select a participant\",\n * - searchURL: \"http://...\"\n * - selected: \"\",\n *\n * @param {HTMLElement} el The element to generate the autocomplete for.\n * @returns {AutoComplete} An instance of the AutoComplete class.\n */\nconst autoConfigure = (el) => {\n  const config = JSON.parse(el.dataset.autocomplete);\n  const searchUrl = new URL(config.searchURL);\n  const textInput = document.createElement(\"input\");\n  textInput.type = \"text\";\n  textInput.className = \"autocomplete-input\";\n  el.appendChild(textInput);\n  let mode = config.mode || \"sticky\"\n  let selected = null;\n  if (config.selected) {\n    switch (mode) {\n    case \"multi\":\n      selected = config.selected.map((item) => (\n        {\n          key: \"label\",\n          value: {\n            value: item.value,\n            label: item.label\n          }\n        }\n      ));\n      break;\n    case \"sticky\":\n      selected = { key: \"label\", value: config.options[config.options.length - 1] };\n      break;\n    default:\n      selected = config.selected;\n    }\n  }\n\n  const dataSource = (query, callback) => {\n    const params = new URLSearchParams({\n      ...Object.fromEntries(searchUrl.searchParams),\n      term: query\n    });\n    fetch(`${searchUrl.origin}${searchUrl.pathname}?${params.toString()}`, {\n      method: \"GET\",\n      headers: { \"Content-Type\": \"application/json\" }\n    }).then((response) => response.json()).then((data) => {\n      callback(data)\n    });\n  };\n\n  const ac = new AutoComplete(textInput, {\n    name: config.name,\n    placeholder: config.placeholder,\n    selected: selected,\n    mode: mode,\n    searchPrompt: true,\n    searchPromptText: config.searchPromptText,\n    threshold: 3,\n    dataMatchKeys: [\"label\"],\n    dataSource\n  });\n\n  return ac;\n}\n\n$(() => {\n  const $autocompleteDiv = $(\"[data-autocomplete]\");\n  if ($autocompleteDiv.length < 1) {\n    return;\n  }\n\n  $autocompleteDiv.each((_index, element) => {\n    autoConfigure(element);\n  })\n})\n","/* eslint no-unused-vars: 0 */\n/* eslint id-length: [\"error\", { \"exceptions\": [\"$\"] }] */\n\nimport \"core-js/stable\";\nimport \"regenerator-runtime/runtime\";\nimport $ from \"jquery\"\nimport Quill from \"quill\"\nimport Rails from \"@rails/ujs\"\n\nimport \"foundation-sites\"\nimport \"src/decidim/vendor/foundation-datepicker\"\nimport \"src/decidim/foundation_datepicker_locales\"\nimport \"jquery-serializejson\"\n\nimport \"src/decidim/admin/tab_focus\"\nimport initLanguageChangeSelect from \"src/decidim/admin/choose_language\"\nimport \"src/decidim/admin/application\"\nimport \"src/decidim/admin/resources_permissions\"\nimport \"src/decidim/admin/welcome_notification\"\nimport \"src/decidim/admin/newsletters\"\nimport \"src/decidim/admin/form\"\nimport \"src/decidim/admin/external_domain_whitelist\"\nimport \"src/decidim/confirm\"\nimport \"src/decidim/admin/draggable-list\"\nimport \"src/decidim/admin/sortable\"\nimport \"src/decidim/gallery\"\nimport \"src/decidim/admin/moderations\"\nimport \"src/decidim/input_tags\"\nimport \"src/decidim/input_hashtags\"\nimport \"src/decidim/input_mentions\"\nimport \"src/decidim/vizzs\"\nimport \"src/decidim/ajax_modals\"\nimport \"src/decidim/admin/officializations\"\nimport \"src/decidim/session_timeouter\"\nimport \"src/decidim/slug_form\"\nimport \"src/decidim/direct_uploads/upload_field\"\nimport \"src/decidim/admin/admin_autocomplete\"\n\n// CSS\nimport \"entrypoints/decidim_admin.scss\";\n\n// This needs to be loaded after confirm dialog to bind properly\nRails.start()\n\nwindow.addEventListener(\"DOMContentLoaded\", () => {\n  initLanguageChangeSelect(document.querySelectorAll(\"select.language-change\"));\n});\n","/* eslint-disable no-invalid-this */\n/* eslint-disable require-jsdoc */\n\nexport default function initLanguageChangeSelect(elements) {\n  elements.forEach((select) => {\n    select.addEventListener(\"change\", () => {\n      let targetTabPaneSelector = select.value;\n      let tabsContent = select.parentElement.parentElement.nextElementSibling;\n\n      tabsContent.querySelector(\".is-active\").classList.remove(\"is-active\");\n      tabsContent.querySelector(targetTabPaneSelector).classList.add(\"is-active\");\n    })\n  });\n}\n","$(() => {\n  const $moderationDetails = $(\".moderation-details\");\n  const $toggleContentButton = $moderationDetails.find(\".toggle-content\");\n  const $reportedContent = $moderationDetails.find(\".reported-content\");\n  const $currentContent = $reportedContent.find(\".current\");\n  const $originalContent = $reportedContent.find(\".original\");\n\n  $originalContent.hide();\n\n  $toggleContentButton.on(\"click\", () => {\n    $currentContent.toggle();\n    $originalContent.toggle();\n\n    if ($currentContent.is(\":hidden\")) {\n      $toggleContentButton.html($toggleContentButton.data(\"see-current-button-label\"));\n    } else {\n      $toggleContentButton.html($toggleContentButton.data(\"see-original-button-label\"));\n    }\n  })\n})\n","$(() => {\n  const $form = $(\".form.newsletter_deliver\");\n\n  if ($form.length > 0) {\n    const $sendNewsletterToAllUsers = $form.find(\"#send_newsletter_to_all_users\");\n    const $sendNewsletterToFollowers = $form.find(\"#send_newsletter_to_followers\");\n    const $sendNewsletterToParticipants = $form.find(\"#send_newsletter_to_participants\");\n    const $participatorySpacesForSelect = $form.find(\"#participatory_spaces_for_select\");\n\n    const checkSelectiveNewsletterFollowers = $sendNewsletterToFollowers.find(\"input[type='checkbox']\").prop(\"checked\");\n    const checkSelectiveNewsletterParticipants = $sendNewsletterToParticipants.find(\"input[type='checkbox']\").prop(\"checked\");\n\n    $sendNewsletterToAllUsers.on(\"change\", (event) => {\n      const checked = event.target.checked;\n      if (checked) {\n        $sendNewsletterToFollowers.find(\"input[type='checkbox']\").prop(\"checked\", !checked);\n        $sendNewsletterToParticipants.find(\"input[type='checkbox']\").prop(\"checked\", !checked);\n        $participatorySpacesForSelect.hide();\n      } else {\n        $sendNewsletterToFollowers.find(\"input[type='checkbox']\").prop(\"checked\", !checked);\n        $sendNewsletterToParticipants.find(\"input[type='checkbox']\").prop(\"checked\", !checked);\n        $participatorySpacesForSelect.show();\n      }\n    })\n\n    $sendNewsletterToFollowers.on(\"change\", (event) => {\n      const checked = event.target.checked;\n      const selectiveNewsletterParticipants = $sendNewsletterToParticipants.find(\"input[type='checkbox']\").prop(\"checked\");\n\n      if (checked) {\n        $sendNewsletterToAllUsers.find(\"input[type='checkbox']\").prop(\"checked\", !checked);\n        $participatorySpacesForSelect.show();\n      } else if (!selectiveNewsletterParticipants) {\n        $sendNewsletterToAllUsers.find(\"input[type='checkbox']\").prop(\"checked\", true);\n        $participatorySpacesForSelect.hide();\n      }\n    })\n\n    $sendNewsletterToParticipants.on(\"change\", (event) => {\n      const checked = event.target.checked;\n      const selectiveNewsletterFollowers = $sendNewsletterToFollowers.find(\"input[type='checkbox']\").prop(\"checked\");\n      if (checked) {\n        $sendNewsletterToAllUsers.find(\"input[type='checkbox']\").prop(\"checked\", !checked);\n        $participatorySpacesForSelect.show();\n      } else if (!selectiveNewsletterFollowers) {\n        $sendNewsletterToAllUsers.find(\"input[type='checkbox']\").prop(\"checked\", true);\n        $participatorySpacesForSelect.hide();\n      }\n    })\n\n    if (checkSelectiveNewsletterFollowers || checkSelectiveNewsletterParticipants) {\n      $participatorySpacesForSelect.show();\n    } else {\n      $participatorySpacesForSelect.hide();\n    }\n\n    $(\".form .spaces-block-tag\").each(function(_i, blockTag) {\n      const selectTag = $(blockTag).find(\".chosen-select\")\n      selectTag.change(function() {\n        let optionSelected = selectTag.find(\"option:selected\").val()\n        if (optionSelected === \"all\") {\n          selectTag.find(\"option\").not(\":first\").prop(\"selected\", true);\n          selectTag.find(\"option[value='all']\").prop(\"selected\", false);\n        } else if (optionSelected === \"\") {\n          selectTag.find(\"option\").not(\":first\").prop(\"selected\", false);\n        }\n      });\n    })\n\n    $form.on(\"change\", function() {\n      let $data = $form.serializeJSON().newsletter;\n      let $url = $form.data(\"recipients-count-newsletter-path\");\n      const $modal = $(\"#recipients_count_spinner\");\n      $modal.removeClass(\"hide\");\n      $.get($url, {data: $data}, function(recipientsCount) {\n        $(\"#recipients_count\").text(recipientsCount);\n      }).always(function() {\n        $modal.addClass(\"hide\");\n      });\n    })\n  }\n});\n","$(() => {\n  const $modal = $(\"#show-email-modal\");\n\n  if ($modal.length === 0) {\n    return\n  }\n\n  const $button = $(\"[data-open=user_email]\", $modal);\n  const $email = $(\"#user_email\", $modal);\n  const $fullName = $(\"#user_full_name\", $modal);\n\n  $(\"[data-toggle=show-email-modal]\").on(\"click\", (event) => {\n    event.preventDefault()\n\n    $button.show()\n    $button.attr(\"data-open-url\", event.currentTarget.href)\n    $fullName.text($(event.currentTarget).data(\"full-name\"))\n    $email.html(\"\")\n  })\n})\n","$(() => {\n  const $limitiedTimeLabel = $(\"label[for='component_settings_proposal_edit_time_limited']\")\n  const $limitedTimeRadioButton = $(\"#component_settings_proposal_edit_time_limited\")\n  const $infiniteTimeRadioButton = $(\"#component_settings_proposal_edit_time_infinite\")\n  const $editTimeContainer = $(\".proposal_edit_before_minutes_container\")\n\n  $editTimeContainer.detach().appendTo($limitiedTimeLabel)\n\n  if ($infiniteTimeRadioButton.is(\":checked\")) {\n    $editTimeContainer.hide();\n  }\n\n  $limitedTimeRadioButton.on(\"click\", () => {\n    $editTimeContainer.show();\n  })\n\n  $infiniteTimeRadioButton.on(\"click\", () => {\n    $editTimeContainer.hide();\n  })\n})\n","$(() => {\n  const $ComponentScopeEnabled = $(\"#component_settings_scopes_enabled\");\n  const $ComponentScopeId = $(\"#component_settings_scope_id\");\n\n  if ($(\".edit_component, .new_component\").length > 0) {\n    $ComponentScopeEnabled.on(\"change\", (event) => {\n      const checked = event.target.checked;\n      window.theDataPicker.enabled($ComponentScopeId, checked);\n    })\n    window.theDataPicker.enabled($ComponentScopeId, $ComponentScopeEnabled.prop(\"checked\"));\n  }\n});\n","/**\n * When switching tabs in i18n fields, autofocus on the input to save clicks #212\n */\n$(() => {\n  // Event launched by foundation\n  $(\"[data-tabs]\").on(\"change.zf.tabs\", (event) => {\n    const $container = $(event.target).next(\".tabs-content .tabs-panel.is-active\");\n    // Detect quilljs editor inside the tabs-panel\n    let $content = $container.find(\".editor .ql-editor\");\n    if ($content.length > 0) {\n      $content.focus();\n    // Detect if inside the tabs-panel have an input\n    } else {\n      $content = $container.find(\"input:first\");\n      if ($content.length > 0) {\n        $content.focus();\n      }\n    }\n  });\n});\n","$(() => {\n  const $scope = $(\"#welcome-notification-details\");\n\n  const $sendNotificationCheckbox = $(\n    \"#organization_send_welcome_notification\",\n    $scope\n  );\n\n  const $customizeCheckbox = $(\n    \"#organization_customize_welcome_notification\",\n    $scope\n  );\n\n  const toggleVisibility = () => {\n    if ($sendNotificationCheckbox.is(\":checked\")) {\n      $(\".send-welcome-notification-details\", $scope).show();\n    } else {\n      $(\".send-welcome-notification-details\", $scope).hide();\n    }\n\n    if ($customizeCheckbox.is(\":checked\")) {\n      $(\".customize-welcome-notification-details\", $scope).show();\n    } else {\n      $(\".customize-welcome-notification-details\", $scope).hide();\n    }\n  };\n\n  $($sendNotificationCheckbox).click(() => toggleVisibility());\n  $($customizeCheckbox).click(() => toggleVisibility());\n\n  toggleVisibility();\n});\n"],"names":["callbacks","registerCallback","callbackId","callback","unregisterCallback","pushState","url","state","arguments","length","undefined","window","history","replaceState","onpopstate","event","isTrusted","hasOwnProperty","$","$wrapper","$input","find","$target","on","html","target","value","showHideNav","evt","navMenu","document","querySelector","preventDefault","classList","toggle","SortListComponent","_createClass","sortListSelector","options","_classCallCheck","sortable","addEventListener","$children","children","onSortUpdate","createSortList","COUNT_KEY","DEFAULT_MESSAGES","charactersAtLeast","one","concat","other","charactersLeft","MESSAGES","InputCharacterCounter","input","_this","this","data","minCharacters","parseInt","attr","maxCharacters","describeByCounter","announceThreshold","Math","floor","announceEveryThreshold","targetId","random","toString","substr","parent","is","after","$srTarget","before","$userInput","Quill","setTimeout","editor","siblings","root","initialize","key","updateInputLength","previousInputLength","inputLength","bindEvents","setDescribedBy","active","removeAttr","_this2","handleInput","updateStatus","updateScreenReaderStatus","get","getLength","val","checkScreenReaderUpdate","currentLength","getInputLength","srLength","getInputDirection","announcedAt","showMessages","message","push","replace","remaining","_message","dispatchEvent","CustomEvent","detail","text","getMessages","join","getScreenReaderLength","messages","extend","each","_i","elem","createCharacterCounter","SubformTogglerComponent","controllerSelect","subformWrapperClass","globalWrapperSelector","_bindEvent","_runAll","idx","el","run","$subforms","parents","$selectedSubform","filter","prop","hide","show","Decidim","managedUsersForm","config","Configuration","navTrigger","theDataPicker","DataPicker","foundation","placeholder","sortUrl","order","map","index","child","toArray","ajax","method","contentType","JSON","stringify","items_ids","formDatePicker","_idx","container","createQuillEditor","FormFilterComponent","mountComponent","SubformMultiTogglerComponent","BudgetRuleTogglerComponent","ruleCheckboxes","checkbox","_this3","toggleTextInput","closest","containerClassPrefix","slideDown","slideUp","click","$amendmentsEnabled","$amendmentStepSettings","AutoButtonsByPositionComponent","listSelector","hideOnFirstSelector","hideOnLastSelector","$list","hideOnFirst","hideOnLast","$item","first","id","last","AutoLabelByPositionComponent","labelSelector","onPositionComputed","$label","labelContent","match","DynamicFieldsComponent","wrapperSelector","containerSelector","fieldSelector","addFieldButtonSelector","addSeparatorButtonSelector","addTitleAndDescriptionButtonSelector","fieldTemplateSelector","separatorTemplateSelector","TitleAndDescriptionTemplateSelector","removeFieldButtonSelector","moveUpFieldButtonSelector","moveDownFieldButtonSelector","onAddField","onRemoveField","onMoveUpField","onMoveDownField","placeholderId","elementCounter","_enableInterpolation","_activateFields","_bindEvents","fn","replaceAttribute","attribute","addBack","element","template","$subtemplate","oldHtml","outerHTML","$subtemplateParents","$self","$tpl","$subtpl","subtemplateId","subtemplateSelector","_bindSafeEvent","_addField","_removeField","_moveUpField","_moveDownField","cb","stopPropagation","error","console","templateClass","$container","templateSelector","$template","$newField","_getUID","$lastQuestion","appendTo","$removedField","name","deletedInput","addClass","remove","$movedUpField","prev","$movedDownField","next","append","Date","getTime","placeHolderId","addFieldSelector","forEach","section","fieldSelectorSuffix","autoButtonsByPosition","autoLabelByPosition","createSortableList","handle","forcePlaceholderSize","$field","hideDeletedItem","$draggables","draggablesClassNames","_toConsumableArray","className","split","test","not","parentElement","removeClass","connectWith","selector","placeholderClass","$autocompleteDiv","_index","parse","dataset","autocomplete","searchUrl","URL","searchURL","textInput","createElement","type","appendChild","mode","selected","item","label","AutoComplete","searchPrompt","searchPromptText","threshold","dataMatchKeys","dataSource","query","params","URLSearchParams","_objectSpread","Object","fromEntries","searchParams","term","fetch","origin","pathname","headers","then","response","json","autoConfigure","Rails","querySelectorAll","select","targetTabPaneSelector","tabsContent","nextElementSibling","add","$moderationDetails","$toggleContentButton","$reportedContent","$currentContent","$originalContent","$form","$sendNewsletterToAllUsers","$sendNewsletterToFollowers","$sendNewsletterToParticipants","$participatorySpacesForSelect","checkSelectiveNewsletterFollowers","checkSelectiveNewsletterParticipants","checked","selectiveNewsletterParticipants","selectiveNewsletterFollowers","blockTag","selectTag","change","optionSelected","$data","serializeJSON","newsletter","$url","$modal","recipientsCount","always","$button","$email","$fullName","currentTarget","href","$limitiedTimeLabel","$limitedTimeRadioButton","$infiniteTimeRadioButton","$editTimeContainer","detach","$ComponentScopeEnabled","$ComponentScopeId","enabled","$content","focus","$scope","$sendNotificationCheckbox","$customizeCheckbox","toggleVisibility"],"sourceRoot":""}