!function(){var t,e={81007:function(){L.TileLayer.HERE=L.TileLayer.extend({options:{subdomains:"1234",minZoom:2,maxZoom:18,scheme:"normal.day",resource:"maptile",mapId:"newest",format:"png8",appId:"",appCode:"",useCIT:!1,useHTTPS:!0,language:"",language2:""},initialize:function(t){var e=(t=L.setOptions(this,t)).scheme.split(".")[0];t.tileResolution=256;var o=["apiKey="+encodeURIComponent(t.apiKey)];t.apiKey||(o=["app_id="+encodeURIComponent(t.appId),"app_code="+encodeURIComponent(t.appCode)]),t.language&&o.push("lg="+encodeURIComponent(t.language)),t.language2&&o.push("lg2="+encodeURIComponent(t.language2));var n="/maptile/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}"+("?"+o.join("&")),r="/maptile/2.1/copyright/{mapId}?apiKey={apiKey}",a="maps.ls.hereapi.com";t.apiKey||(a="maps"+(t.useCIT?".cit":"")+".api.here.com",r="/maptile/2.1/copyright/{mapId}?app_id={appId}&app_code={appCode}");var i="base."+a;"satellite"!=e&&"terrain"!=e&&"hybrid"!=e||(i="aerial."+a),-1!==t.scheme.indexOf(".traffic.")&&(i="traffic"+a);var c="http"+(t.useHTTPS?"s":""),s=c+"://{s}."+i+n;this._attributionUrl=L.Util.template(c+"://1."+i+r,this.options),L.TileLayer.prototype.initialize.call(this,s,t),this._attributionText=""},onAdd:function(t){L.TileLayer.prototype.onAdd.call(this,t),this._attributionBBoxes||this._fetchAttributionBBoxes()},onRemove:function(t){this._map.attributionControl.removeAttribution(this._attributionText),this._attributionText="",this._map.off("moveend zoomend resetview",this._findCopyrightBBox,this),L.TileLayer.prototype.onRemove.call(this,t)},_fetchAttributionBBoxes:function(){var t=new XMLHttpRequest;t.onreadystatechange=L.bind((function(){4==t.readyState&&200==t.status&&this._parseAttributionBBoxes(JSON.parse(t.responseText))}),this),t.open("GET",this._attributionUrl,!0),t.send()},_parseAttributionBBoxes:function(t){if(this._map){for(var e=t[this.options.scheme.split(".")[0]]||t.normal,o=0;o<e.length;o++)if(e[o].boxes)for(var n=0;n<e[o].boxes.length;n++){var r=e[o].boxes[n];e[o].boxes[n]=L.latLngBounds([[r[0],r[1]],[r[2],r[3]]])}this._map.on("moveend zoomend resetview",this._findCopyrightBBox,this),this._attributionProviders=e,this._findCopyrightBBox()}},_findCopyrightBBox:function(){if(this._map){for(var t=this._attributionProviders,e=[],o=this._map.getZoom(),n=this._map.getBounds(),r=0;r<t.length;r++)if(t[r].minLevel<=o&&t[r].maxLevel>=o)if(t[r].boxes)for(var a=0;a<t[r].boxes.length;a++){var i=t[r].boxes[a];if(n.intersects(i)){e.push(t[r]);break}}else e.push(t[r]);var c=['<a href="https://legal.here.com/en-gb/terms" target="_blank" rel="noopener noreferrer">HERE maps</a>'];for(r=0;r<e.length;r++){var s=e[r];c.push('<abbr title="'+s.alt+'">'+s.label+"</abbr>")}var l="\xa9 "+c.join(", ")+". ";l!==this._attributionText&&(this._map.attributionControl.removeAttribution(this._attributionText),this._map.attributionControl.addAttribution(this._attributionText=l))}}}),L.tileLayer.here=function(t){return new L.TileLayer.HERE(t)}},11728:function(t,e,o){"use strict";var n=o(45243),r=L.DivIcon.extend({options:{circleText:"",className:"svg-icon",circleAnchor:null,circleColor:null,circleOpacity:null,circleFillColor:"rgb(255,255,255)",circleFillOpacity:null,circleRatio:.5,circleWeight:null,color:"rgb(0,102,255)",fillColor:null,fillOpacity:.4,fontColor:"rgb(0, 0, 0)",fontOpacity:"1",fontSize:null,fontWeight:"normal",iconAnchor:null,iconSize:L.point(32,48),opacity:1,popupAnchor:null,shadowAngle:45,shadowBlur:1,shadowColor:"rgb(0,0,10)",shadowEnable:!1,shadowLength:.75,shadowOpacity:.5,shadowTranslate:L.point(0,0),weight:2},initialize:function(t){var e=L.Util.setOptions(this,t);e.iconSize=L.point(e.iconSize),e.circleAnchor?e.circleAnchor=L.point(e.circleAnchor):e.circleAnchor=L.point(Number(e.iconSize.x)/2,Number(e.iconSize.x)/2),e.circleColor||(e.circleColor=e.color),e.circleFillOpacity||(e.circleFillOpacity=e.opacity),e.circleOpacity||(e.circleOpacity=e.opacity),e.circleWeight||(e.circleWeight=e.weight),e.fillColor||(e.fillColor=e.color),e.fontSize||(e.fontSize=Number(e.iconSize.x/4)),e.iconAnchor?e.iconAnchor=L.point(e.iconAnchor):e.iconAnchor=L.point(Number(e.iconSize.x)/2,Number(e.iconSize.y)),e.popupAnchor?e.popupAnchor=L.point(e.popupAnchor):e.popupAnchor=L.point(0,-.75*e.iconSize.y),e.html=this._createSVG()},_createCircle:function(){var t=Number(this.options.circleAnchor.x),e=Number(this.options.circleAnchor.y),o=this.options.iconSize.x/2*Number(this.options.circleRatio),n=this.options.circleFillColor,r=this.options.circleFillOpacity,a=this.options.circleColor,i=this.options.circleOpacity,c=this.options.circleWeight,s="".concat(this.options.className,"-circle");return'<circle class="'.concat(s,'" cx="').concat(t,'" cy="').concat(e,'" r="').concat(o,'" fill="').concat(n,'" fill-opacity="').concat(r,'" stroke="').concat(a,'" stroke-opacity=').concat(i,'" stroke-width="').concat(c,'"/>')},_createPathDescription:function(){var t=Number(this.options.iconSize.y),e=Number(this.options.iconSize.x),o=Number(this.options.weight),n=o/2;return"M ".concat(n," ").concat(e/2," ")+"L ".concat(e/2," ").concat(t-o," ")+"L ".concat(e-n," ").concat(e/2," ")+"A ".concat(e/4," ").concat(e/4," 0 0 0 ").concat(n," ").concat(e/2," Z")},_createPath:function(){var t=this._createPathDescription(),e=this.options.weight,o=this.options.color,n=this.options.opacity,r=this.options.fillColor,a=this.options.fillOpacity,i="".concat(this.options.className,"-path");return'<path class="'.concat(i,'" d="').concat(t,'" stroke-width="').concat(e,'" stroke="').concat(o,'" stroke-opacity="').concat(n,'" fill="').concat(r,'" fill-opacity="').concat(a,'"/>')},_createShadow:function(){var t=this._createPathDescription(),e=this.options.weight,o=this.options.shadowColor,n=this.options.shadowColor,r="".concat(this.options.className,"-shadow"),a="".concat(this.options.iconSize.x/2,"px ").concat(this.options.iconSize.y,"px"),i=this.options.shadowAngle,c=this.options.shadowLength,s=this.options.shadowOpacity,l=this.options.shadowBlur,p="".concat(this.options.shadowTranslate.x,"px, ").concat(this.options.shadowTranslate.y,"px");return"<filter id='iconShadowBlur'><feGaussianBlur in='SourceGraphic' stdDeviation='".concat(l,"'/></filter>")+'<path filter="url(#iconShadowBlur") class="'.concat(r,'" d="').concat(t,'" fill="').concat(n,'" stroke-width="').concat(e,'" stroke="').concat(o,'" style="opacity: ').concat(s,"; transform-origin: ").concat(a,"; transform: rotate(").concat(i,"deg) translate(").concat(p,") scale(1, ").concat(c,')" />')},_createSVG:function(){var t=this._createPath(),e=this._createCircle(),o=this._createText(),n="";this.options.shadowEnable&&(n=this._createShadow());var r="".concat(this.options.className,"-svg"),a=this.options.iconSize.x,i=this.options.iconSize.y;this.options.shadowEnable&&(a+=this.options.iconSize.y*this.options.shadowLength-this.options.iconSize.x/2,a=Math.max(a,32),i+=this.options.iconSize.y*this.options.shadowLength);var c="width:".concat(a,"px; height:").concat(i);return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="'.concat(r,'" style="').concat(c,'">').concat(n).concat(t).concat(e).concat(o,"</svg>")},_createText:function(){var t="".concat(this.options.fontSize,"px"),e=this.options.fontWeight,o=Number(this.options.fontSize),n=this.options.circleAnchor.x,r=this.options.circleAnchor.y+.35*o,a=this.options.circleText,i=this.options.fontColor.replace("rgb(","rgba(").replace(")",",".concat(this.options.fontOpacity,")"));return'<text text-anchor="middle" x="'.concat(n,'" y="').concat(r,'" style="font-size: ').concat(t,"; font-weight: ").concat(e,'" fill="').concat(i,'">').concat(a,"</text>")}});L.Marker.extend({options:{iconFactory:L.divIcon.svgIcon,iconOptions:{}},initialize:function(t,e){var o=L.Util.setOptions(this,e);o.icon=o.iconFactory(o.iconOptions),this._latlng=t},onAdd:function(t){L.Marker.prototype.onAdd.call(this,t)},setStyle:function(t){if(this._icon){var e=this._icon.children[0].children[0],o=this._icon.children[0].children[1];if(t.color&&!t.iconOptions){var n=t.color.replace("rgb","rgba").replace(")",",".concat(this.options.icon.options.opacity,")")),r=t.color.replace("rgb","rgba").replace(")",",".concat(this.options.icon.options.fillOpacity,")"));e.setAttribute("stroke",n),e.setAttribute("fill",r),o.setAttribute("stroke",n),this.options.icon.fillColor=r,this.options.icon.color=n,this.options.icon.circleColor=n}if(t.opacity&&this.setOpacity(t.opacity),t.iconOptions){t.color&&(t.iconOptions.color=t.color);var a=L.Util.setOptions(this.options.icon,t.iconOptions);this.setIcon(L.divIcon.svgIcon(a))}}}});n.DivIcon.SVGIcon=r,n.DivIcon.SVGIcon.DecidimIcon=n.DivIcon.SVGIcon.extend({options:{fillColor:"#ef604d",fillOpacity:1,opacity:0},_createPathDescription:function(){return"M14 1.17a11.685 11.685 0 0 0-11.685 11.685c0 11.25 10.23 20.61 10.665 21a1.5 1.5 0 0 0 2.025 0c0.435-.435 10.665-9.81 10.665-21A11.685 11.685 0 0 0 14 1.17Zm0 17.415A5.085 5.085 0 1 1 19.085 13.5 5.085 5.085 0 0 1 14 18.585Z"},_createCircle:function(){return""},_createSVG:function(){var t=this._createPath(),e=this._createCircle(),o=this._createText(),n="".concat(this.options.className,"-svg"),r="width:".concat(this.options.iconSize.x,"px; height:").concat(this.options.iconSize.y,"px;");return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="'.concat(n,'" style="').concat(r,'">').concat(t).concat(e).concat(o,"</svg>")}});o(81007),o(95732),o(54183),o(2464),o(62743);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,i=void 0,i=function(t,e){if("object"!==a(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===a(i)?i:String(i)),n)}var r,i}var c=function(){return t=function t(e){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.awesomeMap=e,this.main=n.control.layers(null,null,{position:"topleft",sortLayers:!1,collapsed:this.awesomeMap.config.collapsedMenu}),this.awesomeMap.config.hideControls&&$(this.main.getContainer()).hide(),this.$loading=$("#awesome-map .loading-spinner"),this.onHashtag=this._orderHashtags,this.awesomeMap.map.on("overlayadd",(function(){o.removeHiddenCategories()}))},(e=[{key:"attach",value:function(){var t=this;this.main.addTo(this.awesomeMap.map),this.addSearchControls(),this.awesomeMap.config.menu.categories&&this.addCategoriesControls(),$("#awesome-map").on("click",".awesome_map-title-control",(function(t){t.preventDefault(),t.stopPropagation(),$("#awesome_map-categories-control").toggleClass("active"),$("#awesome_map-hashtags-control").toggleClass("active")})),$("#awesome-map").on("change",".awesome_map-hashtags-selector",(function(e){e.preventDefault(),e.stopPropagation(),$(e.target).closest("label").data("layer")&&t.updateHashtagLayers()})),$("#awesome-map").on("click",".awesome_map-toggle_all_tags",(function(e){e.preventDefault(),e.stopPropagation(),$("#awesome-map .awesome_map-hashtags-selector").prop("checked",$("#awesome-map .awesome_map-hashtags-selector:checked").length<$("#awesome-map .awesome_map-hashtags-selector").length),t.updateHashtagLayers()}))}},{key:"addSearchControls",value:function(){$(this.main.getContainer()).contents("form").append('<div id="awesome_map-categories-control" class="active"><b class="awesome_map-title-control">'.concat(window.DecidimAwesome.texts.categories,'</b><div class="categories-container"></div></div>\n    <div id="awesome_map-hashtags-control"><b class="awesome_map-title-control">').concat(window.DecidimAwesome.texts.hashtags,'</b><div class="hashtags-container"></div><a href="#" class="awesome_map-toggle_all_tags">').concat(window.DecidimAwesome.texts.select_deselect_all,"</a></div>"))}},{key:"addCategoriesControls",value:function(){var t=this;this.awesomeMap.categories.forEach((function(e){var o='<i class="awesome_map-category_'.concat(e.id,'"></i> ').concat(e.name);t.awesomeMap.layers[e.id]={label:o,group:new n.FeatureGroup.SubGroup(t.awesomeMap.cluster)},t.awesomeMap.layers[e.id].group.addTo(t.awesomeMap.map),$("#awesome_map-categories-control .categories-container").append('<label data-layer="'.concat(e.id,'" class="awesome_map-category-').concat(e.id).concat(e.parent?" subcategory":"",'" data-parent="').concat(e.parent,'"><input type="checkbox" class="awesome_map-categories-selector" checked><span>').concat(o,"</span></label>"))})),$("#awesome-map").on("change",".awesome_map-categories-selector",(function(e){e.preventDefault(),e.stopPropagation();var o=$(e.target).closest("label").data("layer"),n=t.awesomeMap.getCategory(o);if(n){var r=t.awesomeMap.layers[n.id];e.target.checked?t.awesomeMap.map.addLayer(r.group):t.awesomeMap.map.removeLayer(r.group),t._indeterminateParentInput(n),t.updateHashtagLayers()}}))}},{key:"addHashtagsControls",value:function(t,e){var o=this;t&&t.length&&($("#awesome_map-hashtags-control").show(),t.forEach((function(t){o.awesomeMap.layers[t.tag]||(o.awesomeMap.layers[t.tag]={label:t.name,group:new n.FeatureGroup.SubGroup(o.awesomeMap.cluster)},o.awesomeMap.map.addLayer(o.awesomeMap.layers[t.tag].group),$("#awesome_map-hashtags-control .hashtags-container").append('<label data-layer="'.concat(t.tag,'" class="awesome_map-hashtag-').concat(t.tag,'"><input type="checkbox" class="awesome_map-hashtags-selector" checked><span>').concat(t.name,"</span></label>")),o.onHashtag(t,$("#awesome_map-hashtags-control .hashtags-container"))),o.awesomeMap.layers[t.tag].group.addLayer(e);var r=$("label.awesome_map-hashtag-".concat(t.tag));r.attr("title","".concat(parseInt(r.attr("title")||0,10)+1," ").concat(window.DecidimAwesome.texts.items))})))}},{key:"showCategory",value:function(t){$("#awesome_map-categories-control").show();var e=$("label.awesome_map-category-".concat(t.id)),o=$("label.awesome_map-category-".concat(t.parent));e.show(),e.attr("title","".concat(parseInt(e.attr("title")||0,10)+1," ").concat(window.DecidimAwesome.texts.items)),o.show(),o.attr("title","".concat(parseInt(o.attr("title")||0,10)+1," ").concat(window.DecidimAwesome.texts.items))}},{key:"removeHiddenComponents",value:function(){var t=this;$(".awesome_map-component").each((function(e,o){var n=t.awesomeMap.layers[$(o).data("layer")],r=$(o).closest("div").find("input:not(:checked)");n&&r.length&&(t.awesomeMap.map.addLayer(n.group),t.awesomeMap.map.removeLayer(n.group))}))}},{key:"removeHiddenCategories",value:function(){var t=this;$(".awesome_map-categories-selector:not(:checked)").each((function(e,o){var n=t.awesomeMap.layers[$(o).closest("label").data("layer")];n&&(t.awesomeMap.map.addLayer(n.group),t.awesomeMap.map.removeLayer(n.group))}))}},{key:"updateHashtagLayers",value:function(){var t=this;$(".awesome_map-hashtags-selector").each((function(e,o){var n=t.awesomeMap.layers[$(o).closest("label").data("layer")];n&&t.awesomeMap.map.removeLayer(n.group)})),$(".awesome_map-hashtags-selector:checked").each((function(e,o){var n=t.awesomeMap.layers[$(o).closest("label").data("layer")];n&&t.awesomeMap.map.addLayer(n.group)})),this.removeHiddenComponents(),this.removeHiddenCategories()}},{key:"updateStats",value:function(t,e){$("#awesome_map-".concat(t)).attr("title","".concat(e," ").concat(window.DecidimAwesome.texts.items))}},{key:"_indeterminateParentInput",value:function(t){if(t.parent){var e=$(".awesome_map-category-".concat(t.parent)).contents("input"),o=$('[class^="awesome_map-category-"][data-parent="'.concat(t.parent,'"]:visible')),n=o.contents("input:checked").length;e.prop("indeterminate",n!==o.length&&0!==n)}}},{key:"_orderHashtags",value:function(t,e){var o=e.contents("label:last");o.prev("label").length&&e.contents("label").each((function(t,e){$(e).text().localeCompare(o.text())>0&&$(e).before(o)}))}}])&&i(t.prototype,e),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,o}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,a=void 0,a=function(t,e){if("object"!==s(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===s(a)?a:String(a)),n)}var r,a}var p=function(){return t=function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.awesomeMap=e,this.component=o,this.templateId="marker-meeting-popup",this.controls={label:this.getLabel(),group:new n.FeatureGroup.SubGroup(this.awesomeMap.cluster)},this.onFinished=function(){},this.allNodes=[]},e=[{key:"getLabel",value:function(){var t=this.awesomeMap.config.menu.mergeComponents||this.component.name;return t||(t=window.DecidimAwesome.texts[this.component.type]),'<span class="awesome_map-component" id="awesome_map-component_'.concat(this.component.id,'" title="0" data-layer="').concat(this.component.type,'">').concat(t,"</span>")}},{key:"setFetcher",value:function(t){var e=this;this.fetcher=new t(this),this.fetcher.onFinished=function(){e._onFinished()},this.fetcher.onCollection=function(t){if(t&&t.edges){var o=[];o="meetings"===e.fetcher.collection?t.edges.filter((function(t){return t.node.coordinates&&t.node.coordinates.latitude&&t.node.coordinates.longitude})):t.edges.filter((function(t){return t.node.coordinates&&t.node.coordinates.latitude&&t.node.coordinates.longitude&&(o=t.node,e.awesomeMap.config.show[o.state||"notAnswered"]);var o}));try{e.awesomeMap.cluster.addLayers(o.map((function(t){return t.node.marker})))}catch(n){console.error("Failed marker collection assignation",o,"error",n)}o.forEach((function(t){e.awesomeMap.layers[e.component.type].group.addLayer(t.node.marker),e.addMarkerCategory(t.node.marker,t.node.category),e.addMarkerHashtags(t.node.marker,t.node.hashtags)}))}}}},{key:"addControls",value:function(){this.awesomeMap.controls.main.addOverlay(this.controls.group,this.controls.label),this.controls.group.addTo(this.awesomeMap.map),this.awesomeMap.layers[this.component.type]=this.controls}},{key:"loadNodes",value:function(){}},{key:"addMarker",value:function(t,e){var o=this;t.on("click",(function(){var r=document.createElement("div");r.innerHTML=$.templates("#".concat(o.templateId)).render(e);var a=n.popup({maxwidth:640,minWidth:500,keepInView:!0,className:"map-info"}).setLatLng(t.getLatLng()).setContent(r);o.awesomeMap.map.addLayer(a)})),e.marker=t,e.component=this.component,this.allNodes.push(e)}},{key:"addMarkerCategory",value:function(t,e){var o=this.awesomeMap.getCategory(e);if(this.awesomeMap.layers[o.id])try{this.awesomeMap.layers[o.id].group.addLayer(t),this.awesomeMap.controls.showCategory(o)}catch(n){console.error("Failed category marker assignation",t,n.message)}}},{key:"addMarkerHashtags",value:function(t,e){if(this.awesomeMap.config.menu.hashtags)try{this.awesomeMap.controls.addHashtagsControls(e,t)}catch(o){console.error("Failed hashtags marker assignation",t,o.message)}}},{key:"_onFinished",value:function(){this.awesomeMap.controls.updateStats("component_".concat(this.component.id),this.allNodes.length),this.onFinished()}},{key:"createIcon",value:function(t,e){return new t({color:"#000000",fillColor:e,circleFillColor:e,weight:1,stroke:e,fillOpacity:.9})}}],e&&l(t.prototype,e),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,o}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function f(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,a=void 0,a=function(t,e){if("object"!==u(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===u(a)?a:String(a)),n)}var r,a}var h=function(){return t=function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.query=e,this.variables=o},(e=[{key:"fetch",value:function(t){$.ajax({method:"POST",url:"/api",contentType:"application/json",data:JSON.stringify({query:this.query,variables:this.variables})}).done((function(e){t(e.data)}))}},{key:"fetchAll",value:function(t){this.fetch(t)}}])&&f(t.prototype,e),o&&f(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,o}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,a=void 0,a=function(t,e){if("object"!==m(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===m(a)?a:String(a)),n)}var r,a}var y=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controller=e,this.config={length:e.awesomeMap.config.length||255},this.onFinished=function(){},this.onNode=function(){},this.onCollection=function(){},this.hashtags=[],this.collection=this.controller.component.type,this.query="query ($id: ID!, $after: String!) {\n        component(id: $id) {\n          id\n          __typename\n        }\n      }"},e=[{key:"fetch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o={id:this.controller.component.id,after:e};new h(this.query,o).fetchAll((function(e){if(e){var o=e.component[t.collection];o.edges.forEach((function(e){var o=e.node;o&&o.coordinates&&o.coordinates.latitude&&o.coordinates.longitude&&(t.decorateNode(o),t.onNode(o))})),t.onCollection(o),o.pageInfo.hasNextPage?t.fetch(o.pageInfo.endCursor):t.onFinished()}}))}},{key:"decorateNode",value:function(t){var e=this.findTranslation(t.body.translations),o=this.findTranslation(t.title.translations);t.hashtags=this.collectHashtags(o),t.hashtags=t.hashtags.concat(this.collectHashtags(e)),t.title.translation=this.replaceHashtags(o,t.hashtags),t.body.translation=this.appendHtmlHashtags(this.truncate(this.removeHashtags(e)).replace(/\n/g,"<br>"),t.hashtags),t.link="".concat(this.controller.component.url,"/").concat(this.collection,"/").concat(t.id)}},{key:"findTranslation",value:function(t){var e=document.querySelector("html").getAttribute("lang"),o="";return t.forEach((function(t){t.text&&(o&&t.locale!==e||(o=t.text))})),o}},{key:"collectHashtags",value:function(t){var e=this,o=[];if(t){var n=t.match(/gid:\/\/[^\s<&]+/g);n&&(o=n.filter((function(t){return-1!==t.indexOf("/Decidim::Hashtag/")})).map((function(t){var o=t.split("/"),n="_"===o[5].charAt(0),r=n?o[5].substr(1):o[5],a="#".concat(r),i='<a href="/search?term='.concat(a,'">').concat(a,"</a>"),c={color:getComputedStyle(document.documentElement).getPropertyValue("--secondary"),gid:t,id:parseInt(o[4],10),fromSelector:n,tag:r,name:a,html:i};return e.hashtags.push(c),c})))}return o}},{key:"replaceHashtags",value:function(t,e){var o=t;return e.forEach((function(t){o=o.replace(t.gid,t.name)})),o}},{key:"removeHashtags",value:function(t){return t.replace(/gid:\/\/[^\s<&]+/g,"")}},{key:"appendHtmlHashtags",value:function(t,e){var o=t;return e.forEach((function(t){o+=" ".concat(t.html)})),o}},{key:"truncate",value:function(t){return $.truncate(t,this.config)}}],e&&d(t.prototype,e),o&&d(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,o}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function v(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,a=void 0,a=function(t,e){if("object"!==g(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===g(a)?a:String(a)),n)}var r,a}function b(t,e,o){return e=w(e),function(t,e){if(e&&("object"===g(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,o||[],w(t).constructor):e.apply(t,o))}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}var S=function(t){function e(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=b(this,e,[t])).query="query ($id: ID!, $after: String!) {\n      component(id: $id) {\n          id\n          __typename\n          ... on Proposals {\n            proposals(first: 50, after: $after){\n              pageInfo {\n                hasNextPage\n                endCursor\n              }\n              edges {\n                node {\n                  id\n                  state\n                  title {\n                    translations {\n                      text\n                      locale\n                    }\n                  }\n                  body {\n                    translations {\n                      text\n                      locale\n                    }\n                  }\n                  address\n                  coordinates {\n                    latitude\n                    longitude\n                  }\n                  amendments {\n                    emendation {\n                      id\n                    }\n                  }\n                  category {\n                    id\n                  }\n                }\n              }\n            }\n          }\n        }\n      }",o}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(e,t),o=e,n&&v(o.prototype,n),r&&v(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}(y);function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function k(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,a=void 0,a=function(t,e){if("object"!==O(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===O(a)?a:String(a)),n)}var r,a}function x(t,e,o){return e=M(e),function(t,e){if(e&&("object"===O(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,o||[],M(t).constructor):e.apply(t,o))}function C(){return C="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,o){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:o):r.value}},C.apply(this,arguments)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}var j=n.DivIcon.SVGIcon.DecidimIcon.extend({options:{fillColor:"#ef604d",fillOpacity:.8,strokeWidth:1,strokeOpcacity:1}}),T=function(t){function e(t,o){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=x(this,e,[t,o])).templateId="marker-proposal-popup",n.amendments={},n.setFetcher(S),n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(e,t),o=e,(r=[{key:"addControls",value:function(){C(M(e.prototype),"addControls",this).call(this),this.awesomeMap.config.menu.amendments&&this.component.amendments&&!this.awesomeMap.layers.amendments&&(this.awesomeMap.layers.amendments={label:'<span class="awesome_map-component" id="awesome_map-amendments_'.concat(this.component.id,'" title="0" data-layer="amendments">').concat(window.DecidimAwesome.texts.amendments,"</span>"),group:new n.FeatureGroup.SubGroup(this.awesomeMap.cluster)},this.awesomeMap.controls.main.addOverlay(this.awesomeMap.layers.amendments.group,this.awesomeMap.layers.amendments.label),this.awesomeMap.layers.amendments.group.addTo(this.awesomeMap.map))}},{key:"loadNodes",value:function(){var t=this;this.fetcher.onNode=function(e){var o=new n.Marker([e.coordinates.latitude,e.coordinates.longitude],{icon:t.createIcon(j,t.awesomeMap.getCategory(e.category).color),title:e.title.translation});e.amendments&&e.amendments.length&&e.amendments.forEach((function(o){t.amendments[o.emendation.id]=e})),t.addMarker(o,e)},this.fetcher.fetch()}},{key:"_onFinished",value:function(){var t=this,e=Object.entries(this.amendments);this.awesomeMap.controls.updateStats("component_".concat(this.component.id),this.allNodes.length-e.length),this.awesomeMap.controls.updateStats("amendments_".concat(this.component.id),e.length),e.forEach((function(e){var o=t.allNodes.find((function(t){return t.id===e[0]})),n=e[1];if(o){try{o.marker.removeFrom(t.controls.group)}catch(r){console.error("error removeFrom marker",o,"layer",t.controls.group,r)}t.awesomeMap.config.menu.amendments&&(o.marker.addTo(t.awesomeMap.layers.amendments.group),n.category&&(o.marker.setIcon(t.createIcon(j,t.awesomeMap.getCategory(n.category).color)),t.addMarkerCategory(o.marker,n.category)))}})),this.onFinished()}}])&&k(o.prototype,r),a&&k(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r,a}(p);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function I(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,a=void 0,a=function(t,e){if("object"!==A(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===A(a)?a:String(a)),n)}var r,a}function E(t,e,o){return e=N(e),function(t,e){if(e&&("object"===A(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,o||[],N(t).constructor):e.apply(t,o))}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}var z=function(t){function e(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=E(this,e,[t])).query="query ($id: ID!, $after: String!) {\n    component(id: $id) {\n        id\n        __typename\n        ... on Meetings {\n          meetings(first: 50, after: $after) {\n            pageInfo {\n              hasNextPage\n              endCursor\n            }\n            edges {\n              node {\n                id\n                title {\n                  translations {\n                    text\n                    locale\n                  }\n                }\n                body: description {\n                  translations {\n                    text\n                    locale\n                  }\n                }\n                startTime\n                location {\n                  translations {\n                    text\n                    locale\n                  }\n                }\n                address\n                locationHints {\n                  translations {\n                    text\n                    locale\n                  }\n                }\n                coordinates {\n                  latitude\n                  longitude\n                }\n                category {\n                  id\n                }\n              }\n            }\n          }\n        }\n      }\n    }",o}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e)}(e,t),o=e,n&&I(o.prototype,n),r&&I(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}(y);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function H(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,a=void 0,a=function(t,e){if("object"!==B(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===B(a)?a:String(a)),n)}var r,a}function D(t,e,o){return e=F(e),function(t,e){if(e&&("object"===B(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,o||[],F(t).constructor):e.apply(t,o))}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}function G(t,e){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G(t,e)}var V=n.DivIcon.SVGIcon.DecidimIcon.extend({_createPathDescription:function(){return"M 15.991543,4 C 7.3956015,4 2.9250351,10.5 3.000951,16.999999 3.1063486,26.460968 12.747693,30.000004 15.991543,43 19.242091,30.000004 29,26.255134 29,16.999999 29,10.5 23.951131,4 15.996007,4 m -0.153508,2.6000001 a 2.1720294,2.1076698 0 0 1 2.330514,2.1124998 2.177008,2.1125006 0 0 1 -4.354016,0 2.1720294,2.1076698 0 0 1 2.023502,-2.1124998 m -2.651707,4.8056679 h 5.610202 l 3.935584,7.569899 -1.926038,0.934266 -2.009546,-3.859265 v 14.557403 h -2.484243 v -9.126003 h -0.642162 v 9.126003 H 13.190347 V 16.050568 l -2.009545,3.859265 -1.926036,-0.934266 3.935581,-7.569899"}}),W=function(t){function e(t,o){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=D(this,e,[t,o])).templateId="marker-meeting-popup",n.setFetcher(z),n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(e,t),o=e,(r=[{key:"loadNodes",value:function(){var t=this;this.fetcher.onNode=function(e){var o=new n.Marker([e.coordinates.latitude,e.coordinates.longitude],{icon:t.createIcon(V,t.awesomeMap.getCategory(e.category).color),title:e.title.translation});t.addMarker(o,e)},this.fetcher.fetch()}}])&&H(o.prototype,r),a&&H(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r,a}(p);function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function U(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,a=void 0,a=function(t,e){if("object"!==q(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===q(a)?a:String(a)),n)}var r,a}var K=function(){return t=function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.categories=window.AwesomeMap&&window.AwesomeMap.categories||[],this.config=$.extend({length:255,center:null,zoom:8,menu:{amendments:!1,meetings:!1,categories:!0,hashtags:!1,mergeComponents:!1},show:{withdrawn:!1,accepted:!1,evaluating:!1,notAnswered:!1,rejected:!1},hideControls:!1,collapsedMenu:!1,components:[]},o),this.layers={},this.cluster=new n.MarkerClusterGroup,this.map.addLayer(this.cluster),this.controls=new c(this),this.onFinished=function(){},this.controllers={},this.loading=[],this._firstController={}},(e=[{key:"loadControllers",value:function(){var t=this;this.autoResize(),this.controls.attach(),this.config.components.forEach((function(e){var o=t._getController(e);o&&(o.loadNodes(),t.loading.push(e.type),o.onFinished=function(){t.loading.pop(),t.autoResize(),0===t.loading.length&&(t.controls.$loading.hide(),t.onFinished())})}))}},{key:"autoResize",value:function(){var t=this.cluster.getBounds();this.config.center&&this.config.zoom?this.map.setView(this.config.center,this.config.zoom):t.isValid()&&this.map.fitBounds([[t.getNorth(),t.getEast()],[t.getSouth(),t.getWest()]],{padding:[50,50]})}},{key:"getCategory",value:function(t){var e=this,o={color:getComputedStyle(document.documentElement).getPropertyValue("--primary"),children:function(){},parent:null,name:null};if(t){var n=t.id?parseInt(t.id,10):parseInt(t,10),r=this.categories.find((function(t){return t.id===n}));if(r)return r.children=function(){return e.categories.filter((function(t){return t.parent===r.id}))},r}return o}},{key:"_getController",value:function(t){var e=null;return"proposals"===t.type&&(e=new T(this,t)),"meetings"===t.type&&this.config.menu.meetings&&(e=new W(this,t)),e?(this._firstController[t.type]&&this.config.menu.mergeComponents?e.controls=this._firstController[t.type].controls:e.addControls(),this._firstController[t.type]=this._firstController[t.type]||e,this.controllers[t.type]=e,this.controllers[t.type]):null}}])&&U(t.prototype,e),o&&U(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,o}();$((function(){var t={length:$("#awesome-map").data("truncate")||254,center:function(t){if(t){var e=t.split(",");if(e.length>=2){var o=parseFloat(e[0]),n=parseFloat(e[1]);if(o&&n)return[o,n]}}return null}($("#awesome-map").data("map-center")),zoom:$("#awesome-map").data("map-zoom"),menu:{amendments:$("#awesome-map").data("menu-amendments"),meetings:$("#awesome-map").data("menu-meetings"),categories:$("#awesome-map").data("menu-categories"),hashtags:$("#awesome-map").data("menu-hashtags"),mergeComponents:$("#awesome-map").data("menu-merge-components")},show:{withdrawn:$("#awesome-map").data("show-withdrawn"),accepted:$("#awesome-map").data("show-accepted"),evaluating:$("#awesome-map").data("show-evaluating"),notAnswered:$("#awesome-map").data("show-not-answered"),rejected:$("#awesome-map").data("show-rejected")},hideControls:$("#awesome-map").data("hide-controls"),collapsedMenu:$("#awesome-map").data("collapsed"),components:$("#awesome-map").data("components")};$("#awesome-map .google-map").on("ready.decidim",(function(e,o){o.off("popupopen"),o.off("popupclose"),window.AwesomeMap=new K(o,t),window.AwesomeMap.loadControllers()}))}))},2464:function(){!function(t){var e=/(\s*\S+|\s)$/,o=/^(\S*)/;t.truncate=function(e,o){return t("<div></div>").append(e).truncate(o).html()},t.fn.truncate=function(n){t.isNumeric(n)&&(n={length:n});var r=t.extend({},t.truncate.defaults,n);return this.each((function(){var n=t(this);r.noBreaks&&n.find("br").replaceWith(" ");var a=n.text(),i=a.length-r.length;if(r.stripTags&&n.text(a),r.words&&i>0){var c=a.slice(0,r.length).replace(e,"").length;i=r.keepFirstWord&&0===c?a.length-o.exec(a)[0].length-1:a.length-c-1}i<0||!i&&!r.truncated||t.each(n.contents().get().reverse(),(function(e,o){var n=t(o),a=n.text().length;return a<=i?(r.truncated=!0,i-=a,void n.remove()):3===o.nodeType?(r.finishBlock?t(o.splitText(a)).replaceWith(r.ellipsis):t(o.splitText(a-i-1)).replaceWith(r.ellipsis),!1):(n.truncate(t.extend(r,{length:a-i})),!1)}))}))},t.truncate.defaults={stripTags:!1,words:!1,keepFirstWord:!1,noBreaks:!1,finishBlock:!1,length:1/0,ellipsis:"\u2026"}}(jQuery)}},o={};function n(t){var r=o[t];if(void 0!==r)return r.exports;var a=o[t]={exports:{}};return e[t].call(a.exports,a,a.exports,n),a.exports}n.m=e,t=[],n.O=function(e,o,r,a){if(!o){var i=1/0;for(p=0;p<t.length;p++){o=t[p][0],r=t[p][1],a=t[p][2];for(var c=!0,s=0;s<o.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[s])}))?o.splice(s--,1):(c=!1,a<i&&(i=a));if(c){t.splice(p--,1);var l=r();void 0!==l&&(e=l)}}return e}a=a||0;for(var p=t.length;p>0&&t[p-1][2]>a;p--)t[p]=t[p-1];t[p]=[o,r,a]},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={8981:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,a,i=o[0],c=o[1],s=o[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(r in c)n.o(c,r)&&(n.m[r]=c[r]);if(s)var p=s(n)}for(e&&e(o);l<i.length;l++)a=i[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(p)},o=self.webpackChunkdecidim_app=self.webpackChunkdecidim_app||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var r=n.O(void 0,[1542,8270],(function(){return n(11728)}));r=n.O(r)}();
//# sourceMappingURL=decidim_decidim_awesome_map-4ff46c516e405e2fc7c6.js.map