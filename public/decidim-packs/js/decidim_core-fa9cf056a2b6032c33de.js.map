{"version":3,"file":"js/decidim_core-fa9cf056a2b6032c33de.js","mappings":";gBAAIA,sBCyEJC,GAAE,YAnE4B,WAC5B,IAAMC,EAAeC,SAASC,cAAc,kBAC5C,GAAKF,EAAL,CAIA,IAAMG,EAAiBH,EAAaE,cAAc,mBAClD,GAAKC,EAAL,CAIA,IAAMC,EAAiBD,EAAeE,iBAAiB,0BACvD,KAAID,EAAeE,OAAS,GAA5B,CAMA,IAAMC,EAAgC,SAACC,GACrCT,EAAEK,GAAgBK,KAAK,WAAYD,GAE9BA,GACHJ,EAAeM,SAAQ,SAACC,GAAK,OAAMA,EAAMC,MAAQ,EAAE,GAEvD,EAEAb,EAAEI,GAAgBU,GAAG,iBAAiB,WACpCN,GAA8B,EAChC,IACAR,EAAEI,GAAgBU,GAAG,kBAAkB,WACrCN,GAA8B,EAChC,IACAA,GAA8B,EAlB9B,CALA,CALA,CA6BF,CAmCEO,GA3B8B,WAC9B,IAAMC,EAAqBhB,EAAE,mBACvBiB,EAA0BjB,EAAE,yBAElC,KAAIgB,EAAmBT,OAAS,GAAhC,CAIA,IAAMW,EAAmBlB,EAAE,sBACrBmB,EAASnB,EAAE,kBAEjBkB,EAAiBJ,GAAG,SAAS,SAACM,GAC5B,IACE,IAAMC,EAAcL,EAAmBM,KAAK,yCAAyCC,MACrFN,EAAwBK,KAAK,sCAAsCC,IAAIF,GACvEF,EAAOK,WAAW,OACpB,CAAE,MAAOC,GACPC,QAAQD,MAAMA,EAChB,CAIA,OAFAL,EAAMO,iBACNP,EAAMQ,mBACC,CACT,GAjBA,CAkBF,CAIEC,EACF,sBCtDA7B,GAAE,WAgCAA,EAAEE,UAAUY,GAAG,oBAAoB,SAACM,GAClC,IAAMU,EAAM,IAAAC,OAAO/B,EAAEoB,EAAMU,QAAQE,KAAK,SAClCC,EAAcjC,EAAEoB,EAAMU,QAAQE,KAAK,eAErCF,GAAUG,IACZjC,EAAE,2BACAU,KAAK,KAAM,gBACXA,KAAK,OAAQ,gBACbA,KAAK,QAASuB,GACdC,SAAS,GAADH,OAAID,EAAM,UAEpB9B,EAAE,GAAD+B,OAAID,EAAM,OAAMpB,KAAK,QAAQ,SAACyB,EAAOC,GACpC,IAAMC,EAAcC,OAAOC,MAAM,CAAC,aAAgBN,IAClD,OAAOG,GAAQA,EAAKI,MAAM,MAAQ,IAAM,KAAOH,CACjD,IAEJ,IAEArC,EAAEE,UAAUY,GAAG,oBAAoB,SAACM,GAClCpB,EAAE,gBAAiBoB,EAAMU,QAAQW,SACjCzC,EAAE,IAAKoB,EAAMU,QAAQpB,KAAK,QAAQ,SAACyB,EAAOC,GACxC,OAAIA,IAA0C,IAAlCA,EAAKM,QAAQ,gBApDF,SAACC,EAAKC,GAC/B,IAAMC,EAAWF,EAAIG,MAAM,KAE3B,GAAID,EAAStC,QAAU,EAAG,CAWxB,IATA,IAAMwC,EAAUF,EAASG,QAGnBC,EAAcJ,EAASK,KAAK,KAE5BC,EAAM,GAAApB,OAAMqB,mBAAmBR,GAAU,KACzCS,EAAQJ,EAAYH,MAAM,SAGvBX,EAAQkB,EAAM9C,OAAS,EAAG4B,GAAS,EAAGA,GAAS,GAET,IAAzCkB,EAAMlB,GAAOmB,YAAYH,EAAQ,IACnCE,EAAME,OAAOpB,EAAO,GAIxB,OAAqB,IAAjBkB,EAAM9C,OACDwC,EAGH,GAANhB,OAAUgB,EAAO,KAAAhB,OAAIsB,EAAMH,KAAK,KAClC,CAEA,OAAOP,CACT,CAwBaa,CAAmBpB,EAAM,gBAG3BA,CACT,GACF,GACF,qBC5EApC,GAAE,WACA,IAAMyD,EAAWzD,EAAE,gCACfyD,EAASlD,OAAS,GACpBmD,YAAW,WAGTD,EAAS/C,KAAK,WAAY,KAAKiD,QAAQC,KAAK,GAAD7B,OAAI0B,EAASG,OAAM,UAChE,GAAG,IAEP,sBCDA5D,EAAEE,UAAU2D,OAAM,WARZ7D,EAAE,2BAA2BO,OAAS,GACxCuD,OAAOC,SAAS,CACdC,IAAKhE,EAAE,iCAAiCiE,SAASD,IACjDE,SAAU,UAOhB,sBChBAlE,GAAE,WACA,IAAMmE,EAAgBnE,EAAE,kBAExBA,EAAEE,UAAUY,GAAG,QAAS,kCAAkC,SAACM,GACzDA,EAAMO,iBACN,IAAMyC,EAAUpE,EAAEoB,EAAMU,QACpBuC,EAAO,UACLC,EAAYF,EAAQG,QAAQ,+BAA+BjD,KAAK,uBAClEgD,EAAUE,OAAOC,SAAWL,EAAQI,OAAOC,SAI/CH,EAAUE,KAAKJ,EAAQI,QAEI,sBAAvBJ,EAAQ1D,KAAK,QACXV,EAAE,gCAAgC0E,SAAS,UAC7CL,EAAO,aAGTF,EAAcQ,SAAS,QACvB3E,EAAE,0BAAD+B,OAA2BsC,IAAQO,YAAY,SAEvB,oBAAvBR,EAAQ1D,KAAK,QACXV,EAAE,kCAAkC0E,SAAS,UAC/CL,EAAO,aAGTF,EAAcQ,SAAS,QACvB3E,EAAE,wBAAD+B,OAAyBsC,IAAQO,YAAY,SAElD,IAEA5E,EAAEE,UAAUY,GAAG,QAAS,kCAAkC,SAACM,GACzDA,EAAMO,iBACN,IAAMyC,EAAUpE,EAAEoB,EAAMU,QACxBsC,EAAQG,QAAQ,+BAA+BjD,KAAK,4BAA4BkD,KAAKJ,EAAQI,QAC7F,IAAMK,EAAsBV,EAAcW,IAAI,SAASC,QAAQrE,KAAK,MAAMoC,MAAM,KAAKkC,MAAM,GAAI,GAAG9B,KAAK,KACjG+B,EAAoBd,EAAce,OAAO,QAADnD,OAAS8C,EAAmB,MAE/C,2BAAvBT,EAAQ1D,KAAK,QACfuE,EAAkBC,OAAO,oBAAoBP,SAAS,QACtDM,EAAkBC,OAAO,kBAAkBN,YAAY,SAE9B,6BAAvBR,EAAQ1D,KAAK,QACfuE,EAAkBC,OAAO,kBAAkBP,SAAS,QACpDM,EAAkBC,OAAO,oBAAoBN,YAAY,QAE7D,GACF,qxBChDA5E,GAAE,WACA,GAAK8D,OAAOqB,aAAZ,CAIA,IAAIC,EAAsB,WACxB,IAAIC,EAAaF,aAAaG,QAAQ,oBACtC,OAAKD,EAIEA,EAAWvC,MAAM,KAHf,EAIX,EAaIyC,EAAmBH,IAEvBpF,EAAE,8BAA8BwF,MAAK,SAACC,EAAQC,GAC5C,IAAIC,EAAK3F,EAAE0F,GAAM1D,KAAK,WAEtBhC,EACE,6DACA0F,GACA5E,GAAG,SAAS,SAAC8E,GACbA,EAAGjE,gBACL,IAEK4D,EAAiBM,SAASF,KAC7B3F,EAAE,mBAAoB0F,GAAMlE,WAAW,UACvCxB,EAAE,4BAA6B0F,GAAMlE,WAAW,UAEhDxB,EAAE,mBAAoB0F,GAAM5E,GAAG,kBAAkB,YA3B5B,SAAC6E,GACxB,IAAIJ,EAAmBH,IAElBG,EAAiBM,SAASF,IAC7BR,aAAaW,QACX,mBACA,GAAA/D,OAAAgE,EAAIR,GAAgB,CAAEI,IAAIzC,KAAK,KAGrC,CAmBM8C,CAAmBL,EACrB,IAEJ,GA1CA,CA2CF,sBC9CA3F,GAAE,WACAA,EAAE,+BAA+Bc,GAAG,qBAAqB,SAACM,GACxDpB,EAAEoB,EAAMU,QAAQW,QAClB,GACF,yKCDA,IAAIwD,EAAY,CAAC,EAEF,SAASC,EAAiBC,EAAYC,GACnDH,EAAUE,GAAcC,CAC1B,CAEA,IAAMC,EAAqB,SAACF,GAC1BF,EAAUE,GAAc,IAC1B,EAEMG,EAAY,SAAC3D,GAAuB,IAAlB4D,EAAKC,UAAAjG,OAAA,QAAAkG,IAAAD,UAAA,GAAAA,UAAA,GAAG,KAC1B1C,OAAO4C,SACT5C,OAAO4C,QAAQJ,UAAUC,EAAO,KAAM5D,EAE1C,EAEMgE,EAAe,SAAChE,GAAuB,IAAlB4D,EAAKC,UAAAjG,OAAA,QAAAkG,IAAAD,UAAA,GAAAA,UAAA,GAAG,KAC7B1C,OAAO4C,SACT5C,OAAO4C,QAAQC,aAAaJ,EAAO,KAAO5D,EAE9C,EAEM4D,EAAQ,WACZ,OAAIzC,OAAO4C,QACF5C,OAAO4C,QAAQH,MAEjB,IACT,EAEAzC,OAAO8C,WAAa,SAACxF,GAEnB,GAAIA,EAAMyF,UACR,IAAK,IAAIV,KAAcF,EACjBA,EAAUa,eAAeX,IAC3BF,EAAUE,GAAY/E,EAAMmF,MAIpC,oBCpCAvG,GAAE,WACA,IAAI+G,EAAS/G,EAAE,2BACXgH,EAAgB,KAChBC,EAAuBjH,EAAE,oBAEzBiH,EAAqB1G,SACvByG,EAAgBC,EAAqBjF,KAAK,yBAE1C+E,EAAOG,OAAM,WACXlH,EAAEmH,KAAKH,GAAeI,MAAK,SAASC,GAClCJ,EAAqBrD,KAAKyD,GAAU7F,WAAW,QAC/CuF,EAAOO,QAAQ,eACjB,GACF,IAEJ,IAOAtH,GAAE,WACAA,EAAE,2BAA2Bc,GAAG,gBAAgB,WAE9Cd,EAAE,uCAAuCwF,MAAK,SAASrD,EAAOuD,GAC5D,IAAI6B,EAAQvH,EAAE0F,GACd6B,EAAMzG,GAAG,SAAS,WAChB,IAAI0G,EAASD,EAAMvF,KAAK,UACpByF,EAAc,KAEhBA,EADa,SAAXD,EACY,aAEA,cAEhBxH,EAAEmH,KAAK,CACLxE,IAAK4E,EAAMvF,KAAKyF,GAChBD,OAAQA,EACRE,SAAU,SACVC,QAAS,WACHJ,EAAM7C,SAAS,aACjB6C,EAAM3C,YAAY,YAClB2C,EAAMjG,KAAK,uBAAuBqD,SAAS,aAC3C4C,EAAMvF,KAAK,SAAU,UAErBuF,EAAM5C,SAAS,YACf4C,EAAMjG,KAAK,uBAAuBsD,YAAY,aAC9C2C,EAAMvF,KAAK,SAAU,UAEzB,GAEJ,GACF,GACF,GACF,sBC3DAhC,GAAE,WACA,IAAM4H,EAAU5H,EAAE,wBAIlB4H,EAAQ9G,GAAG,WAAW,SAACM,GAEjBA,EAAMU,OAAO+F,iBAAmBzG,EAAMU,OAAOgG,eAIV,IAAnC1G,EAAM2G,cAAcC,IAAIzH,QAAgBa,EAAMU,OAAOmG,QAAQC,SAE7D9G,EAAMU,OAAOjB,MAAMN,SACnB4H,SAAS/G,EAAMU,OAAOmG,QAAQG,UAAW,MAEzChH,EAAMO,iBACN+B,YAAW,WACT,IAAM2E,EAAOrI,EAAEoB,EAAMU,OAAOmG,QAAQC,UACpCG,EAAK9G,IAAIH,EAAM2G,cAAcC,KAC7BK,EAAKf,QAAQ,QACf,GAAG,IAnBe,IAsBpBlG,EAAM2G,cAAcO,SACpBlH,EAAMU,OAAOmG,QAAQM,UAEa,IAA9BnH,EAAMU,OAAOjB,MAAMN,SACrBa,EAAMO,iBACN+B,YAAW,WACT,IAAM8E,EAAOxI,EAAEoB,EAAMU,OAAOmG,QAAQM,UACpCC,EAAKjH,IAAIiH,EAAKjH,MAAMyD,MAAM,GAAI,IAC9BwD,EAAKlB,QAAQ,QACf,GAAG,IAGT,GACF,sBCrCAtH,GAAE,WACA,IAAMyI,EAAyBzI,EAAE,qCAC3B0I,EAAW1I,EAAE,YACb2I,EAAWD,EAASpH,KAAK,kBACzBsH,EAAuB5I,EAAE,wBACzB6I,EAAcH,EAASpH,KAAK,iBAI5BwH,EAAqB,WADIJ,EAASpH,KAAK,iBAAiBf,OAAS,IAGnEoI,EAASlG,SACTmG,EAAqBhE,YAAY,QAErC,EAEA+D,EAAS7H,GAAG,QAAS,wBAAwB,SAACM,GAC5C,IAAM2H,EAAQ/I,EAAEoB,EAAMU,QAAQyC,QAAQ,iBACtCwE,EAAMC,QAZa,KAYS,WAC1BD,EAAMtG,SACNqG,GACF,GACF,IAEAJ,EAAS5H,GAAG,QAAS,4BAA4B,WAC/C6H,EAASK,QAnBU,KAmBY,WAC7BH,EAAYpG,SACZgG,EAAuB7D,YAAY,aACnC8D,EAASpH,KAAK,iBAAiBmB,SAC/BqG,GACF,GACF,IAEAA,GACF,sBClCA9I,GAAE,WACA,IAAMiJ,EAAYjJ,EAAE,yBAAyBsB,KAAK,oBAC5C4H,EAAmBlJ,EAAE,sBAE3BiJ,EAAU/B,OAAM,WACEgC,EAAiB5H,KAAK,UAEzBC,OACX2H,EAAiBC,SAGfD,EAAiBE,GAAG,YACtBH,EAAUI,KAAK,WAAW,GAE1BJ,EAAUI,KAAK,WAAW,EAE9B,GACF,qBCjBArJ,GAAE,WACA,IAAMsJ,EAAsBtJ,EAAE,yBAE9BsJ,EAAoBpC,OAAM,SAAC9F,GACkB,OAAvCA,EAAMU,OAAOyH,QAAQ,gBACvBnI,EAAMO,iBACFmC,OAAO0F,YAAc,KACvBF,EAAoBG,YAAY,YAGtC,GACF,sBCTAzJ,GAAE,WACA,GAAK0B,QAAL,CAIIgI,EAIJ,IAAMC,EAAc7F,OAAO8F,QAAQC,OAAOC,IAAI,YAC9C,GAAKH,EAAL,CAGA,IAAMI,EAAWJ,EAAYK,eAE7BtI,QAAQuI,IAAI,KAADlI,OAAMgI,EAASG,OAAS,+CACnCxI,QAAQuI,IAAI,KAADlI,OAAMgI,EAASI,aAAe,kBAJzC,CATA,CAcF,sBCnBAnK,GAAE,WACA,IAAIoK,EAA6BpK,EAAE,iCAC/B+G,EAAS/G,EAAE,qCAGf,GAAIoK,EAA2B7J,OAAQ,CACpB6J,EAA2BpI,KAAK,eAEjD+E,EAAOG,OAAM,WACXkD,EAA2B5I,WAAW,OACxC,GACF,CACF,sBCVAxB,GAAE,WAGA0D,YAAW,WAES1D,EAAE,YAGlBc,GAAG,aAAa,WACdd,EAAE,4CAAD+B,OAA6CsI,KAAK1E,GAAE,OAAMnE,WAAW,OACxE,IACAV,GAAG,YAAY,WACbd,EAAE,4CAAD+B,OAA6CsI,KAAK1E,GAAE,OAAMnE,WAAW,OACxE,GACJ,GAAG,EACL,sBCjBAxB,GAAE,WACA,IAAMsK,EAAwBtK,EAAE,kBAC1BkJ,EAAwBoB,EAAsBhJ,KAAK,sBACnDiJ,EAAwB,iCACxBC,EAAwB,kDACxBC,EAAwBzK,EAAE,6BAG1B0K,EAA2B,SAAC7J,GAClB,SAAVA,EACFqI,EAAiByB,OAEjBzB,EAAiB0B,MAErB,EASAF,EAAyBJ,EAAsBhJ,KAAK,GAADS,OAAIwI,EAAa,aAAYhJ,OAEhF+I,EAAsBxJ,GAAG,SAAUyJ,GAAe,SAACnJ,GACjD,IAAMP,EAAQO,EAAMU,OAAOjB,MAE3B6J,EAAyB7J,EAC3B,IAEAyJ,EAAsBxJ,GAAG,UAAU,SAACM,GAClC,IAAMyJ,EAAoBP,EAAsBhJ,KAAKkJ,GAChDC,EAAiBzI,KAAK,aACpB6I,EAAkBxB,KAAK,aAC1BjI,EAAMO,iBACN8I,EAAiBjJ,WAAW,QAGlC,IAEAiJ,EAAiBnJ,KAAK,qBAAqBR,GAAG,SAAS,SAACM,GAzBhC,IAAC0J,IA0BP9K,EAAEoB,EAAMU,QAAQE,KAAK,SAzBrCsI,EAAsBhJ,KAAKkJ,GAAoBnB,KAAK,UAAWyB,GAC/DL,EAAiBzI,KAAK,YAAY,GAClCyI,EAAiBjJ,WAAW,SAC5B8I,EAAsBS,QAuBxB,GACF,6PCxCC,SAASC,EAAEC,EAAEC,GAAG,SAASC,EAAEH,EAAEC,GAAG,OAAOG,EAAOJ,KAAIC,CAAC,CAAszB,IAAII,EAAE,GAAGC,EAAE,GAAGC,EAAE,CAACC,SAAS,QAAQC,QAAQ,CAACC,YAAY,GAAGC,eAAc,EAAGC,eAAc,EAAGC,aAAY,GAAIC,GAAG,GAAGhL,GAAG,SAASkK,EAAEC,GAAG,IAAIC,EAAEb,KAAK3G,YAAW,WAAWuH,EAAEC,EAAEF,GAAG,GAAE,EAAE,EAAEe,QAAQ,SAASf,EAAEC,EAAEC,GAAGI,EAAEU,KAAK,CAACC,KAAKjB,EAAEkB,GAAGjB,EAAEkB,QAAQjB,GAAG,EAAEkB,aAAa,SAASpB,GAAGM,EAAEU,KAAK,CAACC,KAAK,KAAKC,GAAGlB,GAAG,GAAGqB,EAAU,WAAW,EAAEA,EAAUC,UAAUf,EAAEc,EAAU,IAAIA,EAAU,IAAIE,EAAEtB,EAAEuB,gBAAgBC,EAAE,QAAQF,EAAEG,SAASC,eAArsC,WAAa,IAAI3B,EAAEC,EAAEC,EAAE0B,EAAEC,EAAIN,EAAE,IAAI,IAAIE,KAAKnB,EAAE,GAAGA,EAAExE,eAAe2F,GAAG,CAAC,GAAGzB,EAAE,IAAGC,EAAEK,EAAEmB,IAAKR,OAAOjB,EAAEgB,KAAKf,EAAEgB,KAAKU,eAAe1B,EAAEkB,SAASlB,EAAEkB,QAAQW,SAAS7B,EAAEkB,QAAQW,QAAQvM,QAAQ,IAAI2K,EAAE,EAAEA,EAAED,EAAEkB,QAAQW,QAAQvM,OAAO2K,IAAIF,EAAEgB,KAAKf,EAAEkB,QAAQW,QAAQ5B,GAAGyB,eAAe,IAAIC,EAAEzB,EAAEF,EAAEiB,GAAG,YAAYjB,EAAEiB,KAAKjB,EAAEiB,GAAGW,EAAE,EAAEA,EAAE7B,EAAEzK,OAAOsM,IAA0B,KAAfN,EAALvB,EAAE6B,GAAO/J,MAAM,MAAWvC,OAAO8L,EAAUE,EAAE,IAAIK,IAAIP,EAAUE,EAAE,KAAKF,EAAUE,EAAE,cAAcQ,UAAUV,EAAUE,EAAE,IAAI,IAAIQ,QAAQV,EAAUE,EAAE,MAAMF,EAAUE,EAAE,IAAIA,EAAE,IAAIK,GAAGvB,EAAEW,MAAMY,EAAE,GAAG,OAAOL,EAAErJ,KAAK,KAAK,CAAC,EAAksB0J,GAAjsB,SAAW5B,GAAG,IAAIC,EAAEsB,EAAES,UAAU9B,EAAEmB,EAAUZ,QAAQC,aAAa,GAAG,GAAGe,IAAIxB,EAAEA,EAAEgC,SAASZ,EAAUZ,QAAQG,cAAc,CAAC,IAAIT,EAAE,IAAI+B,OAAO,UAAUhC,EAAE,gBAAgBD,EAAEA,EAAEkC,QAAQhC,EAAE,KAAKD,EAAE,OAAO,CAACmB,EAAUZ,QAAQE,gBAAgBV,GAAG,IAAIC,EAAEF,EAAE9H,KAAK,IAAIgI,GAAGuB,EAAEF,EAAES,UAAUC,QAAQhC,EAAEsB,EAAES,UAAU/B,EAAE,CAAma4B,CAAExB,UAAUE,EAAEQ,eAAeR,EAAEa,aAAa,IAAI,IAAIgB,EAAE,EAAEA,EAAEf,EAAUP,GAAGvL,OAAO6M,IAAIf,EAAUP,GAAGsB,KAAKpC,EAAEqB,UAAUA,CAAS,CAAp4C,CAAs4CvI,OAAO5D,4BCc94C4D,OAAOuJ,kBAAoB,CACzBC,QAAO,SAAC3K,EAAK4K,EAAOC,GACJ,OAAVD,IACFA,EAAQ,KAEK,OAAXC,IACFA,EAAS,KAEX,IAAMC,EAAQC,OAAOH,MAAQ,EAAMA,EAAQ,EACrCvJ,EAAuB,GAAhB0J,OAAOF,OAAiBA,EAAS,EACxCG,EAAG,SAAA5L,OAAYwL,EAAK,YAAAxL,OAAWyL,EAAM,UAAAzL,OAAS0L,EAAI,SAAA1L,OAAQiC,EAAG,qCAEnE,OADAF,OAAO8J,KAAKjL,EAAK,QAASgL,IACnB,CACT,EAEAE,MAAK,SAACC,GACoB,OAApBA,EAAGC,eACLD,EAAK5N,SAASC,cAAc2N,IAG9B,IAoFUE,EAEAC,EAtFJC,EAAOJ,EAAGC,aAAa,aACvBI,EAASL,EAAGC,aAAa,gBAAkB,GAC3CK,EAAUN,EAAGO,WACfnE,EAAQ9G,mBAAmB0K,EAAGC,aAAa,QAADhM,OAASmM,EAAI,YAAaE,EAAQL,aAAa,eAAiB,IACxGO,EAAMlL,mBAAmBgL,EAAQL,aAAa,aAAe,IAC/DpL,EAAMS,mBAAmBgL,EAAQL,aAAa,aAAe,IAC3DQ,EAAMnL,mBAAmBgL,EAAQL,aAAa,aAAe,IAC7DS,EAAOpL,mBAAmBgL,EAAQL,aAAa,cAAgB,KAG/DU,EAAK3K,OAAOA,OAAO4K,uBAAyB,MAQlD,OAPkB,oBAAPD,GACTA,EAAG,OAAQ,QAAS,sBAAuB,QAASP,GAGnC,IAAfvL,EAAIpC,SACNoC,EAAMS,mBAAmBuL,SAASvM,OAE5B8L,GACR,IAAK,QACHS,SAASvM,KAAI,mBAAAL,OAAsBmI,EAAK,UAAAnI,OAASY,GACjD,MACF,IAAK,QACH0H,KAAKiD,QAAQ,gDAADvL,OAAiDY,EAAG,gBAAAZ,OAAeuM,EAAG,WAAAvM,OAAUmI,EAAK,YAAAnI,OAAWoM,GAAU,IAAK,KAC3H,MACF,IAAK,UACH,IAAIS,EAAWxL,mBAAmB0K,EAAGC,aAAa,QAADhM,OAASmM,EAAI,eAAgBE,EAAQL,aAAa,kBAAoB,IACnHc,EAAS,GACTN,EAAIhO,OAAS,IACfsO,EAAM,QAAA9M,OAAWwM,IAEnBlE,KAAKiD,QAAQ,wCAADvL,OAAyCY,EAAG,UAAAZ,OAASmI,EAAK,cAAAnI,OAAa6M,GAAQ7M,OAAG8M,GAAU,IAAK,KAC7G,MAEF,IAAK,SACHxE,KAAKiD,QAAQ,8CAADvL,OAA+CY,EAAG,UAAAZ,OAASmI,EAAK,WAAAnI,OAAUuM,EAAG,SAAAvM,OAAQyM,GAAQ,IAAK,KAC9G,MACF,IAAK,WACHnE,KAAKiD,QAAQ,+CAADvL,OAAgDY,GAAO,IAAK,KACxE,MACF,IAAK,KACH0H,KAAKiD,QAAQ,kEAADvL,OAAmEY,EAAG,WAAAZ,OAAUmI,EAAK,UAAAnI,OAASuM,EAAG,aAAAvM,OAAYyM,EAAI,UAAAzM,OAASoM,IACtI,MACF,IAAK,kBACH9D,KAAKiD,QAAQ,mEAADvL,OAAoEY,EAAG,WAAAZ,OAAUmI,IAC7F,MACF,IAAK,YACHG,KAAKiD,QAAQ,gCAADvL,OAAiCY,EAAG,WAAAZ,OAAUmI,EAAK,kBAAAnI,OAAiBuM,IAChF,MACF,IAAK,YACHjE,KAAKiD,QAAQ,mDAADvL,OAAoDY,EAAG,WAAAZ,OAAUuM,EAAG,iBAAAvM,OAAgBmI,IAChG,MACF,IAAK,WACHG,KAAKiD,QAAQ,uDAADvL,OAAwDY,EAAG,WAAAZ,OAAUmI,EAAK,aAAAnI,OAAYyM,IAClG,MACF,IAAK,OACHnE,KAAKiD,QAAQ,2CAADvL,OAA4CY,IACxD,MACF,IAAK,YACH0H,KAAKiD,QAAQ,+BAADvL,OAAgCY,EAAG,WAAAZ,OAAUmI,EAAK,WAAAnI,OAAUuM,IACxE,MACF,IAAK,gBACHjE,KAAKiD,QAAQ,mCAADvL,OAAoCY,EAAG,WAAAZ,OAAUmI,EAAK,iBAAAnI,OAAgByM,EAAI,cAAAzM,OAAauM,IACnG,MACF,IAAK,SACH,IAAKxK,OAAOgL,wBACV,MAAM,IAAIC,MAAM,wEAElBjL,OAAOgL,wBAAwBE,OAAO,CACpCrM,IAAKsM,mBAAmBtM,GACxBuM,OAAQpB,EAAGC,aAAa,SACxBoB,OAAQrB,EAAGC,aAAa,wBAE1B,MAEF,IAAK,SACH,IAAIqB,EAAiB,SAAC7M,GACpB,IAAM8M,EAAYvB,EAAGC,aAAa,QAADhM,OAASQ,IAC1C,GAAI8M,EACF,OAAOjM,mBAAmBiM,EAE9B,EA+BAhF,KAAKiD,QAAQ,8BAADvL,QA5BJiM,EAAOoB,EAAe,SAAW,OAEjCnB,EAAU,WACd,OAAQD,GACR,IAAK,OAEH,OADA9D,EAAQkF,EAAe,UAAYlF,EAC7B,SAANnI,OAAgBmI,GAElB,IAAK,QACHA,EAAQkF,EAAe,YAAclF,EACrC,IAAIoF,EAASF,EAAe,WAAad,EACzC,MAAM,WAANvM,OAAkBmI,EAAK,YAAAnI,OAAWuN,GAEpC,IAAK,QACH,IAAIC,EAAQH,EAAe,UAAYlF,EACnCsF,EAASJ,EAAe,WAAa,GACzC,MAAM,SAANrN,OAAgBwN,EAAK,YAAAxN,OAAWyN,GAGlC,QAGE,OAFAtF,EAAQkF,EAAe,UAAYlF,EACnCvH,EAAMyM,EAAe,QAAUzM,EACzB,QAANZ,OAAemI,EAAK,SAAAnI,OAAQY,GAC3B,CArBW,GAuBV,IAANZ,OAAWiM,EAAI,KAAAjM,OAAIkM,MAIrB,MAEF,IAAK,SACH5D,KAAKiD,QAAQ,oCAADvL,OAAqCY,EAAG,gBAAgB,IAAK,KACzE,MACF,IAAK,cACH0H,KAAKiD,QAAQ,4CAADvL,OAA6CY,EAAG,OAAAZ,OAAMmI,GAAS,IAAK,KAChF,MACF,IAAK,WACHG,KAAKiD,QAAQ,sCAADvL,OAAuCmI,EAAK,SAAAnI,OAAQY,IAChE,MACF,IAAK,eACH,IAAI8M,EAAc,wBAAA1N,OAA2BmI,EAAK,OAAAnI,OAAMY,GACxDmB,OAAO8J,KAAK6B,EAAgB,QAC5B,MAEF,IAAK,eACHpF,KAAKiD,QAAQ,sCAADvL,OAAuCmI,EAAK,OAAAnI,OAAMY,IAGhE,OAAO,CACT,oMC1KI+M,EAAqB,SAACC,EAAiBC,GAC3C,IAAMC,EAAQF,EAAgBpG,QAAQ,QACtC,KAAIsG,EAAMtP,OAAS,GAAnB,CAIA,IAAMuP,EAAgBD,EAAMvO,KAAK,yBACQ,IAArCsO,EAAeG,WAAWxP,OAC5BuP,EAAczG,KAAK,YAAY,GAE/ByG,EAAczG,KAAK,YAAY,EANjC,CAQF,+sBAEArJ,GAAE,WACA,IAAM2P,EAAkB3P,EAAE,sBAC1B,KAAI2P,EAAgBpP,OAAS,GAA7B,CAIA,IACMwJ,EADcjG,OAAO8F,QAAQC,OAAOC,IAAI,YACjBkG,eAAiB,CAAC,EAEzCC,EAAejQ,EAAE,QAAS2P,GAC1BC,EAAiB5P,EAAE,MAAD+B,OAAOkO,EAAajO,OAAOkO,WAC7C/D,EAAUwD,EAAgB3N,OAC5BkO,EAAW,GACTC,EAAYrM,OAAO8F,QAAQC,OAAOC,IAAI,cACtCsG,EAAcrG,EAASsG,iBAAmB,0BAE5CC,EAAoBX,EAAgB,GAAGxP,cAAc,eACpDmQ,KACHA,EAAoBpQ,SAASqQ,cAAc,QACzBC,SAAW,KAC7BF,EAAkBtD,UAAY,aAC9B4C,EAAea,OAAOH,IAGxBZ,EAAmBC,EAAiBC,GACpC,IAAMc,EAAe,IAAIC,EAAAA,EAAaV,EAAa,GAAI,CACrDW,cAAe,CAAC,OAAQ,YACxBC,WAAY,SAACC,EAAO1K,GAClBpG,EAAE+Q,KAAK,OAAQ,CACb,MAAQ,sDAADhP,OAEuB+O,EAAK,mOAOlCE,MAAK,SAAC3J,GACPjB,EAASiB,EAASrF,KAAKiP,MACzB,GACF,EACAC,WAAY,SAACC,GACX,OAAOA,EAAKjM,QACV,SAACkM,GAAI,OAAMlB,EAASrK,SAASuL,EAAKvQ,MAAM8E,GAAG,GAE/C,EACA0L,aAAc,SAACC,EAASzQ,GACtBb,EAAEsR,GAAS1N,KAAK,oDAAD7B,OAC4BlB,EAAM0Q,UAAS,WAAAxP,OAAUlB,EAAMoL,KAAI,+BAAAlK,OAClElB,EAAM2Q,SAAQ,8BAAAzP,OACflB,EAAMoL,KAAI,qBAEe,UAAhCpL,EAAM4Q,wBACRzR,EAAEsR,GAAS3M,SAAS,YACpB3E,EAAEsR,GAASI,OAAO,SAAD3P,OAAUkO,EAAajO,OAAO2P,uBAAsB,aAEnE9Q,EAAM+Q,cACR5R,EAAEsR,GAASI,OAAO,0BAAD3P,OAA2BlB,EAAM+Q,aAAY,iDAAA7P,OAAgDoO,EAAS,iCAE3H,IAGFF,EAAanP,GAAG,aAAa,SAACM,GAC5B,IACMyQ,EADWzQ,EAAM0Q,OACID,UACrBlM,EAAKkM,EAAUhR,MAAM8E,GAC3B,KAAIuK,EAAS3P,QAAU,GAA+C,UAA1CsR,EAAUhR,MAAM4Q,uBAA5C,CAIA,IAAMM,EAAQ3B,EAAYjD,QAAQ,SAAU0E,EAAUhR,MAAMoL,MAC5D2D,EAAe8B,OAAO,kEAAD3P,OAEYoK,EAAQF,KAAI,aAAAlK,OAAY4D,EAAE,0BAAA5D,OAC3C8P,EAAUhR,MAAM0Q,UAAS,kCAAAxP,OAAiC8P,EAAUhR,MAAMoL,KAAI,mBAAAlK,OACrF8P,EAAUhR,MAAMoL,KAAI,yEAAAlK,OACgC4D,EAAE,iDAAA5D,OAAgDgQ,EAAK,0CAIpHrB,EAAasB,SAAS,IACtB9B,EAASlE,KAAKrG,GACd+J,EAAmBC,EAAiBC,GAEpCA,EAAetO,KAAK,kBAADS,OAAmB4D,EAAE,OAAM7E,GAAG,kBAAkB,SAACmR,GAClE,IAAMnQ,EAASmQ,EAAInQ,OAAOuM,WAC1B,GAAuB,OAAnBvM,EAAOoQ,QAAkB,CAC3B,IAAMC,EAAerQ,EAAOsQ,oBAAsBtQ,EAAOuQ,wBAA0B/B,EAEnFJ,EAAWA,EAAShL,QAAO,SAACoN,GAAU,OAAKA,IAAe3M,CAAE,IAC5D7D,EAAOW,SAEPiN,EAAmBC,EAAiBC,GACpCuC,EAAaxO,OACf,CACF,GA3BA,CA4BF,GA7FA,CA8FF,IChHA,IAAM4O,EAAY,UAWZC,EAAmB,CACvBC,kBAAmB,CACjBC,IAAI,YAAD3Q,OAAcwQ,EAAS,cAC1BI,MAAM,YAAD5Q,OAAcwQ,EAAS,gBAE9BK,eAAgB,CACdF,IAAI,GAAD3Q,OAAKwQ,EAAS,mBACjBI,MAAM,GAAD5Q,OAAKwQ,EAAS,sBAGnBM,EAAWL,EAEMM,EAAqB,WAkFvC,SA7ED,SAAAA,EAAYC,GAAQ,IAADC,EAAA,kGAAAC,CAAA,KAAAH,GACjBzI,KAAK6I,OAASH,EACd1I,KAAKjG,QAAUpE,EAAEqK,KAAK6I,OAAOlR,KAAK,yBAClCqI,KAAK8I,cAAgBhL,SAASkC,KAAK6I,OAAOxS,KAAK,aAAc,IAC7D2J,KAAK+I,cAAgBjL,SAASkC,KAAK6I,OAAOxS,KAAK,aAAc,IAC7D2J,KAAKgJ,kBAAoE,qBAAzChJ,KAAK6I,OAAOxS,KAAK,oBAG7C2J,KAAK+I,cAAgB,IACnB/I,KAAK+I,cAAgB,IACvB/I,KAAKiJ,kBAAoBC,KAAKC,MA9BF,GA8BQnJ,KAAK+I,eAEzC/I,KAAKiJ,kBAAoB,GAI3BjJ,KAAKoJ,uBAlCyB,KAoC9BpJ,KAAKiJ,kBAAoB,EACzBjJ,KAAKoJ,uBAAyB,GAGhC,IAAIC,EAAWrJ,KAAKjG,QAAQ1D,KAAK,MACT,qBAAbgT,IAEPA,EADErJ,KAAK6I,OAAOxS,KAAK,OAAS2J,KAAK6I,OAAOxS,KAAK,MAAMH,OAAS,EACpD,GAAAwB,OAAMsI,KAAK6I,OAAOxS,KAAK,MAAK,eAE5B,cAAAqB,OAAiBwR,KAAKI,SAASC,SAAS,IAAIC,OAAO,EAAG,KAI9DxJ,KAAKjG,QAAQ7D,OAAS,EACxB8J,KAAKjG,QAAQ1D,KAAK,KAAMgT,IAExBrJ,KAAKjG,QAAUpE,EAAE,aAAD+B,OAAc2R,EAAQ,yCAGlCrJ,KAAK6I,OAAOY,SAAS1K,GAAG,WAC1BiB,KAAK6I,OAAOY,SAASC,MAAM1J,KAAKjG,SAKhCiG,KAAK6I,OAAOY,SAAS1K,GAAG,aACxBiB,KAAK6I,OAAOY,SAASA,SAAS1K,GAAG,QAEjCiB,KAAK6I,OAAOY,SAASA,SAASC,MAAM1J,KAAKjG,SAEzCiG,KAAK6I,OAAOa,MAAM1J,KAAKjG,UAIvBiG,KAAKjG,QAAQ7D,OAAS,IAAM8J,KAAK+I,cAAgB,GAAK/I,KAAK8I,cAAgB,KAG7E9I,KAAK2J,UAAYhU,EAAE,2BAAD+B,OACW2R,EAAQ,6DAErCrJ,KAAKjG,QAAQqM,OAAOpG,KAAK2J,WACzB3J,KAAKjG,QAAQ1D,KAAK,cAAe,QAEjC2J,KAAK4J,WAAa5J,KAAK6I,OAKnBgB,OAAS7J,KAAK6I,OAAOY,SAAS1K,GAAG,WAEnC1F,YAAW,WACTsP,EAAKmB,OAASD,MAAM5S,KAAK0R,EAAKE,OAAOkB,SAAS,qBAAqB,IACnEpB,EAAKiB,WAAajU,EAAEgT,EAAKmB,OAAOE,MAChCrB,EAAKsB,YACP,IAEAjK,KAAKiK,aAGX,IAAC,EAAAtM,IAAA,aAAAnH,MAED,WACEwJ,KAAKkK,oBACLlK,KAAKmK,oBAAsBnK,KAAKoK,YAEhCpK,KAAKqK,aACLrK,KAAKsK,gBAAe,EACtB,GAAC,CAAA3M,IAAA,iBAAAnH,MAED,SAAe+T,GACRvK,KAAKgJ,oBAINuB,EACFvK,KAAK4J,WAAWvT,KAAK,mBAAoB2J,KAAK2J,UAAUtT,KAAK,OAE7D2J,KAAK4J,WAAWY,WAAW,oBAE/B,GAAC,CAAA7M,IAAA,aAAAnH,MAED,WAAc,IAADiU,EAAA,KACPzK,KAAK8J,OACP9J,KAAK8J,OAAOrT,GAAG,eAAe,WAC5BgU,EAAKC,aACP,IAEA1K,KAAK4J,WAAWnT,GAAG,SAAS,WAC1BgU,EAAKC,aACP,IAGF1K,KAAK4J,WAAWnT,GAAG,SAAS,WAC1BgU,EAAKE,cACP,IACA3K,KAAK4J,WAAWnT,GAAG,SAAS,WAC1BgU,EAAKG,0BACP,IACA5K,KAAK4J,WAAWnT,GAAG,QAAQ,WACzBgU,EAAKG,2BACLH,EAAKH,gBAAe,EACtB,IAC+B,OAA3BtK,KAAK4J,WAAWnK,IAAI,IACtBO,KAAK4J,WAAWnK,IAAI,GAAGoL,iBAAiB,eAAe,WACrDJ,EAAKE,cACP,IAEF3K,KAAK2K,eACL3K,KAAK4K,0BACP,GAAC,CAAAjN,IAAA,iBAAAnH,MAED,WACE,OAAOwJ,KAAKoK,WACd,GAAC,CAAAzM,IAAA,oBAAAnH,MAED,WACEwJ,KAAKmK,oBAAsBnK,KAAKoK,YAC5BpK,KAAK8J,OACP9J,KAAKoK,YAAcpK,KAAK8J,OAAOgB,YAE/B9K,KAAKoK,YAAcpK,KAAK6I,OAAO3R,MAAMhB,MAEzC,GAAC,CAAAyH,IAAA,cAAAnH,MAED,WACEwJ,KAAKkK,oBACLlK,KAAK+K,0BAKL/K,KAAKsK,gBAAe,EACtB,GAEA,CAAA3M,IAAA,oBAAAnH,MAOA,WACE,OAAIwJ,KAAKoK,YAAcpK,KAAKmK,oBACnB,MAGF,KACT,GAAC,CAAAxM,IAAA,wBAAAnH,MAED,WACE,IAAMwU,EAAgBhL,KAAKiL,iBAC3B,GAAIjL,KAAK+I,cAAgB,GACvB,OAAOiC,EACF,GAAIhL,KAAK+I,cAAgBiC,GAAiBhL,KAAKoJ,uBACpD,OAAO4B,EAGT,IAAME,EAAWF,EAAgBA,EAAgBhL,KAAKiJ,kBAUtD,GAAiC,QAA7BjJ,KAAKmL,oBAA+B,CAGtC,GAAID,IAAaF,EACf,OAAOE,EAIF,GAAIlL,KAAK+I,cAAgBmC,IAAalL,KAAKiJ,kBAChD,OAAOjJ,KAAKoL,aAAeJ,EAKtB,GAAIE,EAAWF,EACpB,OAAOE,EAAWlL,KAAKiJ,iBAQ3B,MAAO,GAAIiC,EAAWlL,KAAKoL,YACzB,OAAOpL,KAAKoL,YAGd,OAAOF,CACT,GAAC,CAAAvN,IAAA,cAAAnH,MAED,WAAmC,IAC3B6U,EAAe,GACjBjB,EAFmBjO,UAAAjG,OAAA,QAAAkG,IAAAD,UAAA,GAAAA,UAAA,GAAG,KAO1B,GAJoB,OAAhBiO,IACFA,EAAcpK,KAAKiL,kBAGjBjL,KAAK8I,cAAgB,EAAG,CAC1B,IAAIwC,EAAU9C,EAASJ,kBAAkBE,MACd,IAAvBtI,KAAK8I,gBACPwC,EAAU9C,EAASJ,kBAAkBC,KAEvCgD,EAAa1J,KAAK2J,EAAQxI,QAAQoF,EAAWlI,KAAK8I,eACpD,CAEA,GAAI9I,KAAK+I,cAAgB,EAAG,CAC1B,IAAMwC,EAAYvL,KAAK+I,cAAgBqB,EACnCoB,EAAUhD,EAASD,eAAeD,MACpB,IAAdiD,IACFC,EAAUhD,EAASD,eAAeF,KAEpCrI,KAAK6I,OAAO,GAAG4C,cACb,IAAIC,YAAY,mBAAoB,CAACjE,OAAQ,CAAC8D,UAAWA,MAE3DF,EAAa1J,KAAK6J,EAAQ1I,QAAQoF,EAAWqD,GAC/C,CAEA,OAAOF,CACT,GAAC,CAAA1N,IAAA,eAAAnH,MAED,WACEwJ,KAAKjG,QAAQI,KAAK6F,KAAK2L,cAAc9S,KAAK,MAC5C,GAAC,CAAA8E,IAAA,0BAAAnH,MAED,WACE,KAAIwJ,KAAK+I,cAAgB,GAAzB,CAIA,IAAMiC,EAAgBhL,KAAK4L,wBACvBZ,IAAkBhL,KAAKoL,cAI3BpL,KAAKoL,YAAcJ,EACnBhL,KAAK4K,yBAAyBI,GAR9B,CASF,GAAC,CAAArN,IAAA,2BAAAnH,MAED,WAAgD,IAAvBwU,EAAa7O,UAAAjG,OAAA,QAAAkG,IAAAD,UAAA,GAAAA,UAAA,GAAG,KACvC6D,KAAK2J,UAAUxP,KAAK6F,KAAK2L,YAAYX,GAAenS,KAAK,MAC3D,MAAC,EAAA8E,IAAA,oBAAAnH,MA7QD,SAAyBkJ,GACvB8I,EAAW7S,EAAEkW,OAAO1D,EAAkBzI,EACxC,gGAAC,CAHuC,GAiRpCoM,EAAyB,SAACjD,GACR,qBAAXA,GAA0BA,EAAO3S,QAC1C2S,EAAOlR,KAAK,+BAAgC,IAAI8Q,EAAsBI,GAE1E,EAEAlT,GAAE,WACAA,EAAE,8DAA8DwF,MAAK,SAAC4Q,EAAI1Q,GACxE,IAAMwN,EAASlT,EAAE0F,IAEZwN,EAAO9J,GAAG,gBAAmB8J,EAAO9J,GAAG,iBAI5C+M,EAAuBjD,EACzB,GACF,gDCjSAlT,GAAE,WACAA,EAAE,wBAAwBc,GAAG,wBAAwB,SAACsV,EAAI9E,GACxDtR,EAAE,eAAgBsR,GAAS3N,OAC7B,GACF,6BC7BM0S,EAAqB,CACzBC,KAAM,MACN,cAAe,qtBCAjB,IAAMC,EAAkB,CACtB,yBACA,sBACA,iBAEIC,EAA2B,CAC/B,oBAEIC,EAAc,CAAC,UAAW,WAE1BjE,EAAmB,CACvBkE,aAAc,iBAEZ7D,EAAWL,EAEMmE,EAAY,WAS9B,SAJD,SAAAA,EAAYC,gGAAM3D,CAAA,KAAA0D,GAChBtM,KAAKwM,MAAQD,EAEbvM,KAAKyM,OACP,IAAC,EAAA9O,IAAA,QAAAnH,MAED,WAAS,IAADmS,EAAA,KACN,IAAIuD,EAAgBQ,MAAK,SAACC,GAAG,OAAKhE,EAAK6D,MAAMnS,SAASsS,EAAI,MAGtDR,EAAyBO,MAAK,SAACC,GAAG,OAAKhE,EAAK6D,MAAMtS,UAAUG,SAASsS,EAAI,MAI3EP,EAAYM,MAAK,SAACE,GAEhB,MADiB,GAAAlV,OAAGiR,EAAK6D,MAAMnW,KAAK,QAASoC,MAAM,KACnCJ,QAAQuU,IAAQ,CAClC,IAJF,CASA,IAAI7S,EAAUiG,KAAKwM,MACfxM,KAAKwM,MAAM,GAAGK,aAAa,+BAC7B9S,EAAUpE,EAAEqK,KAAKwM,MAAM7U,KAAK,wBAAyBqI,KAAKwM,QAC9CtW,OAAS,IACnB6D,EAAUiG,KAAKwM,OAInBzS,EAAQO,SAAS,2BACjB,IAAIwS,EAAS,SACT9M,KAAKwM,MAAM,GAAGK,aAAa,6BAC7BC,EAAS9M,KAAKwM,MAAM7U,KAAK,wBAChBoC,EAAQI,OAAOC,OAAOlE,OAAS,IAExC4W,EAAS,IAGX/S,EAAQsN,OAAO,GAAD3P,OAAIoV,GAAMpV,OAAGsI,KAAK+M,mBAnBhC,CAoBF,GAAC,CAAApP,IAAA,kBAAAnH,MAED,WACE,IAAIwW,EAAO,GAAAtV,OAAMsI,KAAKiN,gBAAcvV,OAAGsI,KAAKkN,6BAE5C,MAAM,yCAANxV,OAAgDsV,EAAO,UACzD,GAAC,CAAArP,IAAA,eAAAnH,MAED,WACE,OD1DW,SAAc2W,GAA2B,IAAlBC,EAAUjR,UAAAjG,OAAA,QAAAkG,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC5CkR,EAAiB1X,EAAEkW,OAAOG,EAAoBoB,GAC9CvN,EAAQwN,EAAexN,OAASwN,EAAeC,UACrDC,QAAQC,eAAeH,EAAgB,SAEvC,IAAMI,EAAiB,CACrB,MAAQ,cAAD/V,OAAgByV,IAEzBO,OAAOC,KAAKN,GAAgB/W,SAAQ,SAACqH,GAEnC,IAAMiQ,EAASjQ,EAAImF,QAAQ,YAAY,SAAC+K,GAAG,UAAAnW,OAASmW,EAAI,GAAGvL,cAAa,IACrC,qBAAxBmL,EAAe9P,GACxB8P,EAAeG,GAAUP,EAAe1P,GAExC8P,EAAeG,GAAO,GAAAlW,OAAM+V,EAAeG,GAAO,KAAAlW,OAAI2V,EAAe1P,GAEzE,IAEA,IAAMmI,EAAarM,OAAO8F,QAAQC,OAAOC,IAAI,cACvCqO,EAAM,mBAAApW,OAAsBoO,EAAS,UAAApO,OAASyV,EAAO,kBACrDY,EAAMpY,EAAEmY,GAWd,OAVIjO,EACFkO,EAAIC,QAAQ,UAADtW,OAAWmI,EAAK,cAG3BkO,EAAIC,QAAQ,UAADtW,OAAWyV,EAAO,aAE7BM,EAAe,eAAiB,QAElCM,EAAI1X,KAAKoX,GAEF9X,EAAE,WAAW0R,OAAO0G,GAAKxU,MAClC,CC0BW0U,CAAK,gBACd,GAAC,CAAAtQ,IAAA,4BAAAnH,MAED,WACE,MAAM,8BAANkB,OAAqC8Q,EAAS6D,aAAY,WAC5D,MAAC,EAAA1O,IAAA,oBAAAnH,MA1DD,SAAyBkJ,GACvB8I,EAAW7S,EAAEkW,OAAO1D,EAAkBzI,EACxC,gGAAC,CAH8B,GCflB,SAASwO,EAA0BnU,GAChD,IAAMoU,EAAY1U,OAAO8F,QAAQC,OAAOC,IAAI,6BAEX,UAA7BhG,OAAO6K,SAAS8J,UAIpBzY,EAAE,IAAKoE,GAASc,QAAO,SAACkR,EAAIQ,GAC1B,IAAMC,EAAQ7W,EAAE4W,GAChB,IAAKC,EAAM,GAAGK,aAAa,SAAWL,EAAMtS,QAAQ,qBAAqBhE,OAAS,EAChF,OAAO,EAGT,IAAM8C,EAAQwT,EAAMnW,KAAK,QAAQ8B,MAAM,gDAAkD,KACzF,IAAKa,EACH,OAAO,EAGT,IAAMqV,EAASrV,EAAM,GAAG8J,QAAQ,SAAU,IAC1C,OAAIqL,EAAU3S,SAAS6S,EAKzB,IAAGlT,MAAK,SAACmT,EAAI/B,GACX,IAAMC,EAAQ7W,EAAE4W,GACVgC,EAAY,sBAAA7W,OAAyBqB,mBAAmByT,EAAMnW,KAAK,UACzEmW,EAAMnW,KAAK,OAAQkY,GACnB/B,EAAMnW,KAAK,eAAe,EAC5B,GACF,8sBChCA,IAAM8R,EAAmB,CACvBqG,cAAe,sDAEbhG,EAAWL,EAEMsG,EAAa,WAW/B,SAND,SAAAA,EAAYC,GAAO,IAAD/F,EAAA,kGAAAC,CAAA,KAAA6F,GAChBzO,KAAKwF,MAAQkJ,EAEb1O,KAAKwF,MAAM/O,GAAG,sBAAsB,WAClCkS,EAAKgG,aACP,GACF,IA6BC,EAAAhR,IAAA,oBAAAnH,MAvCD,SAAyBkJ,GACvB8I,EAAW7S,EAAEkW,OAAO1D,EAAkBzI,EACxC,OAQC,EAAA/B,IAAA,cAAAnH,MAED,WACEwJ,KAAK4O,oBAELjZ,EAAE,0BAA2BqK,KAAKwF,OAAOlM,OAC3C,GAEA,CAAAqE,IAAA,oBAAAnH,MAQA,WACE,IAAIqY,EAAYlZ,EAAE,eAAgBqK,KAAKwF,OACnCqJ,EAAU3Y,OAAS,GACrB2Y,EAAUzW,UAEZyW,EAAYlZ,EAAE,YACJU,KAAK,QAAS,2BACxBwY,EAAUxY,KAAK,YAAa,aAC5B2J,KAAKwF,MAAMwI,QAAQa,GAEnBxV,YAAW,WACTwV,EAAU1U,KAAKqO,EAASgG,cAC1B,GAAG,IACL,+FArCC,CAH+B,m5CA2ClC7Y,GAAE,WACAA,EAAE,QAAQwF,MAAK,SAAC4Q,EAAItI,GAClB9N,EAAE8N,GAAI9L,KAAK,iBAAkB,IAAI8W,EAAc9Y,EAAE8N,IACnD,IACA9N,EAAEE,UAAUY,GAAG,wBAAwB,SAASqY,EAAKJ,GACnDA,EAAKzR,QAAQ,qBACf,GACF,IC3CA,IAAMtH,EAAI8D,OAAO9D,EAQIoZ,EAAiB,WAepC,SAdA,SAAAA,EAAYC,EAAUxP,gGAAQoJ,CAAA,KAAAmG,GAC5B/O,KAAKgP,SAAWA,EAChBhP,KAAKiP,eAAiBzP,EAAOyP,eAC7BjP,KAAKkP,YAAc1P,EAAO0P,YAC1BlP,KAAKmP,UAAY3P,EAAO2P,UACxBnP,KAAKoP,MAAQ5P,EAAO4P,MACpBpP,KAAKqP,cAAgB7P,EAAO6P,cAC5BrP,KAAKsP,gBAAkB9P,EAAO8P,iBAAmB,KACjDtP,KAAKuP,cAAgB/P,EAAO+P,cAC5BvP,KAAKwP,mBAAqBhQ,EAAOgQ,mBACjCxP,KAAK1E,GAAK0E,KAAKgP,SAAS3Y,KAAK,OAAS2J,KAAKyP,UAC3CzP,KAAK0P,SAAU,CACjB,IAEA,EAAA/R,IAAA,iBAAAnH,MAKA,WAAkB,IAADmS,EAAA,KACX3I,KAAKgP,SAAS9Y,OAAS,IAAM8J,KAAK0P,UACpC1P,KAAK0P,SAAU,EACf1P,KAAK2P,oBAAoB3P,KAAKgP,UACzBhP,KAAKuP,gBACR5Z,EAAE,wBAAyBqK,KAAKgP,UAAUhQ,KAAK,YAAY,GAC3DgB,KAAK4P,gBAAe,WAClBja,EAAE,wBAAyBgT,EAAKqG,UAAUhQ,KAAK,YAAY,EAC7D,KAGFrJ,EAAE,yCAA0CqK,KAAKgP,UAAUvY,GAAG,0BAA0B,kBAAMkS,EAAKkH,cAAc,IAErH,GAEA,CAAAlS,IAAA,mBAAAnH,MAKA,WAAoB,IAADiU,EAAA,KACbzK,KAAK0P,UACP1P,KAAK0P,SAAU,EACf1P,KAAK8P,eAELna,EAAE,uCAAwCqK,KAAKgP,UAAUe,IAAI,0BAC7Dpa,EAAE,wBAAyBqK,KAAKgP,UAAUe,IAAI,0BAC9Cpa,EAAE,yCAA0CqK,KAAKgP,UAAUe,IAAI,0BAC/Dpa,EAAE,oBAAqBqK,KAAKgP,UAAUe,IAAI,2BAC1Cpa,EAAE,wBAAyBqK,KAAKgP,UAAU7T,MAAK,SAAC4Q,EAAItI,GAAE,OAAKA,EAAGuM,oBAAoB,cAAevF,EAAKwF,aAAa,IAEvH,GAEA,CAAAtS,IAAA,YAAAnH,MAQA,SAAU0Z,GAAsC,IAA1BC,EAAehU,UAAAjG,OAAA,QAAAkG,IAAAD,UAAA,IAAAA,UAAA,GAC7B4H,EAAUpO,EAAE,kBAAmBqK,KAAKgP,UACpCoB,EAAWza,EAAEua,GACbG,EAAW1a,EAAE,mBAAoBqK,KAAKgP,UAC5ChP,KAAKsQ,YAAYD,EAAUD,GAC3BpQ,KAAKuQ,yBAAyBxM,EAASoM,EACzC,GAEA,CAAAxS,IAAA,WAAAnH,MAUA,SAASga,EAAWC,GAAqC,IAA1BN,EAAehU,UAAAjG,OAAA,QAAAkG,IAAAD,UAAA,IAAAA,UAAA,GACtC4H,EAAUpO,EAAE,YAAD+B,OAAa8Y,IACxBJ,EAAWza,EAAE8a,GACbC,EAAW/a,EAAE,YAAD+B,OAAa8Y,EAAS,aACxCxQ,KAAKsQ,YAAYI,EAAUN,GAC3BM,EAAS3G,SAAS,6BAA6BxP,YAAY,QAC3DyF,KAAKuQ,yBAAyBxM,EAASoM,EACzC,GAEA,CAAAxS,IAAA,UAAAnH,MAKA,WACE,MAAM,YAANkB,QAAmB,IAAIiZ,MAAOC,qBAAoB,KAAAlZ,OAAIwR,KAAKC,MAAsB,IAAhBD,KAAKI,UACxE,GAEA,CAAA3L,IAAA,sBAAAnH,MAMA,SAAoBuN,GAAU,IAAD8M,EAAA,KAC3Blb,EAAE,eAAgBoO,GAAS5I,MAAK,SAAC4Q,EAAItI,GACnC,IAAMqN,EAAOnb,EAAE8N,GACT+B,EAAQ7P,EAAE,OAAQmb,GAClBC,EAAkBpb,EAAE,0BAA2Bmb,GAC/CE,EAAQrb,EAAE,WAAY6P,GAE5BuL,EAAgBta,GAAG,yBAA0Boa,EAAKI,kBAClDD,EAAMva,GAAG,yBAA0Boa,EAAKZ,cAExCta,EAAEE,UAAUoH,QAAQ,0BAA2B,CAAC+T,EAAMvR,IAAI,KAE1D+F,EAAM/O,GAAG,2BAA2B,WAClBd,EAAE,wBAAyB6P,GAEnCnP,KAAK,WAAY,YACzBwa,EAAKf,cACP,IAEIkB,EAAM9a,QAA2B,OAAjB8a,EAAMvR,IAAI,IAE5BuR,EAAMvR,IAAI,GAAGoL,iBAAiB,cAAegG,EAAKZ,aAEtD,GACF,GAEA,CAAAtS,IAAA,cAAAnH,MAQA,SAAYuD,EAASmX,GACnB,IAAId,EAAWza,EAAE,WAAYub,GACzBd,EAASla,OAAS,IAEpBka,EAAWc,GAEblR,KAAKqP,cAAgBvR,SAASsS,EAASzY,KAAK,cAAe,IAE3DoC,EAAQsN,OAAO6J,GACfA,EAAW/Z,aACX6I,KAAK2P,oBAAoBuB,GACzBpF,EAAuBnW,EAAE,wBAAyBub,IAClDA,EAAWja,KAAK,sBAAsBkE,MAAK,SAAC4Q,EAAI1Q,GAC9C,IAAMmR,EAAQ7W,EAAE0F,GAChBmR,EAAM7U,KAAK,gBAAiB,IAAI2U,EAAaE,GAC/C,IACA0B,EAA0BgD,EAC5B,GAEA,CAAAvT,IAAA,2BAAAnH,MASA,SAAyBuN,EAASoM,GAChC,GAAIA,EAAiB,CACnB,IAAMW,EAAOnb,EAAE,iBAAkBoO,GAC3BiN,EAAQrb,EAAE,WAAYmb,GACtBK,EAAmBH,EAAMrZ,KAAK,gCACpCqZ,EAAM9Z,IAAI,IACNia,GACFA,EAAiBxG,eAEdmG,EAAKrH,SAAS1K,GAAG,cACpB+R,EAAKxW,SAAS,OAElB,CAGA0F,KAAKoR,eACP,GAEA,CAAAzT,IAAA,gBAAAnH,MAKA,WAAiB,IAAD6a,EAAA,KACdrR,KAAK8P,eAEL9P,KAAKsR,YAAcjY,YAAW,WAC5BgY,EAAKzB,gBACP,GAAG5P,KAAKsP,gBACV,GAEA,CAAA3R,IAAA,iBAAAnH,MAQA,WAAwC,IAAD+a,EAAA,KAAxBC,EAAerV,UAAAjG,OAAA,QAAAkG,IAAAD,UAAA,GAAAA,UAAA,GAAG,KAC/BsV,IAAAA,KAAW,CACTnZ,IAAK0H,KAAKkP,YACVlV,KAAM,MACNrC,KAAM,IAAI+Z,gBAAeC,EAAAA,EAAC,CACxB,gBAAmB3R,KAAKiP,eACxB,WAAcjP,KAAKmP,UACnB,MAASnP,KAAKoP,MACd,MAASpP,KAAKqP,eACVrP,KAAKwP,oBAAsB,CAAE,oBAAuBxP,KAAKwP,qBACzDxP,KAAKqP,eAAiB,CAAE,MAASrP,KAAKqP,iBAE5C/R,QAAS,WACHkU,GACFA,IAEFD,EAAKH,eACP,GAEJ,GAEA,CAAAzT,IAAA,eAAAnH,MAKA,WACMwJ,KAAKsR,aACPM,aAAa5R,KAAKsR,YAEtB,GAEA,CAAA3T,IAAA,cAAAnH,MAKA,WACE,IAAM0a,EAAavb,EAAE,wBAAyBqK,KAAKgP,UACnDrZ,EAAE,cAAeub,GAAY5W,SAAS,QACtC3E,EAAE,sBAAuBub,GAAY3W,YAAY,OACnD,GAEA,CAAAoD,IAAA,eAAAnH,MAKA,WACEwJ,KAAK8P,eACL9P,KAAK6R,aACP,GAEA,CAAAlU,IAAA,mBAAAnH,MAMA,SAAiB+E,GACf,IAAIuW,EAAOnc,EAAE4F,EAAG9D,QACXqa,EAAK/S,GAAG,aACX+S,EAAOA,EAAK5X,QAAQ,YAGtB,IAAM4W,EAAOgB,EAAK5S,QAAQ,gBACpBsG,EAAQ7P,EAAE,OAAQmb,GAClBC,EAAkBpb,EAAE,0BAA2Bmb,GAC/CiB,EAAiBpc,EAAE,kCAAmCmb,GACtDkB,EAAarc,EAAE,mBAAoB6P,GAEzCuL,EAAgBxW,YAAY,aAAalE,KAAK,eAAgB,SAC9Dyb,EAAKxX,SAAS,aAAajE,KAAK,eAAgB,QAE5Cyb,EAAK/S,GAAG,uBACViT,EAAW9a,IAAI,GACN4a,EAAK/S,GAAG,wBACjBiT,EAAW9a,IAAI,GACN4a,EAAK/S,GAAG,wBACjBiT,EAAW9a,KAAK,GAIlB6a,EAAe5X,KAAK2X,EAAKna,KAAK,kBAChC,GAEA,CAAAgG,IAAA,eAAAnH,MAMA,SAAa+E,GACX,IAAMyV,EAAQrb,EAAE4F,EAAG9D,QACbqZ,EAAOE,EAAM9R,QAAQ,gBACrBsG,EAAQ7P,EAAE,OAAQmb,GAClBmB,EAAUtc,EAAE,wBAAyB6P,GAEvCwL,EAAM9Z,MAAMhB,OAAS,EACvB+b,EAAQzH,WAAW,YAEnByH,EAAQ5b,KAAK,WAAY,WAE7B,gGAAC,CAnTmC,oCCjBvB,SAAS6b,IACtB,IAAMC,EAAatc,SAASI,iBAAiB,sBAEzCkc,EAAWjc,QACbic,EAAW7b,SAAQ,SAAC+E,GAAU,IAAD+W,EACrBC,EAAS,IAAIC,EAAAA,EAAY,CAC7BC,SAAU,aACVC,aAAiC,QAApBJ,EAAA/W,EAAK6D,QAAQ,eAAO,IAAAkT,OAAA,EAApBA,EAAsBK,gBAAiB5c,SAAS6c,KAC7DC,OAAQ,MAKJC,EAASvX,EAAK6D,QAAQ,iBACxB0T,IACFA,EAAOC,MAAMC,UAAY,SAG3B,IAAMC,EAAUld,SAASqQ,cAAc,OACvC6M,EAAQpQ,UAAY,mBACpB,IAAMqQ,EAAend,SAASqQ,cAAc,OAC5C8M,EAAarQ,UAAY,iBACzB,IAAMsQ,EAAMpd,SAASqQ,cAAc,OACnC+M,EAAItQ,UAAY,gBAChBsQ,EAAIC,UAAY,8rBAEhB,IAAMzJ,EAASpO,EAAK2I,WACpByF,EAAO0J,aAAaJ,EAAS1X,GAC7B0X,EAAQK,YAAY/X,GACpB0X,EAAQK,YAAYJ,GACpBA,EAAaI,YAAYH,GAIzBxJ,EAAOxT,iBAAiB,eAAeK,SAAQ,SAACmN,GAAE,OAAKsP,EAAQK,YAAY3P,EAAG,IAE9E,IAAI4P,EAAgB,WAClBhB,EAAOiB,aAAaN,EACtB,EAEAA,EAAanI,iBAAiB,QAASwI,GAEvChY,EAAKwP,iBAAiB,oBAAoB,SAAC9T,GACrCA,EAAM0Q,OAAO8D,WAAa,GAC5ByH,EAAanI,iBAAiB,QAASwI,GACvCL,EAAaO,gBAAgB,WAE7BP,EAAahD,oBAAoB,QAASqD,GAC1CL,EAAaQ,aAAa,QAAS,mBAEvC,IAGAnB,EAAO5b,GAAG,SAAS,SAAAgd,GAAc,IAAZC,EAAKD,EAALC,MACnBrY,EAAK7E,OAAK,IAAAkB,OAAQgc,EAAK,KAEvB,IAAM3c,EAAQ,IAAI4c,MAAM,eACxBtY,EAAKoQ,cAAc1U,EACrB,GACF,GAEJ,CC3CA,4tBCnBA,IAAM6c,EAAkB,aAClBC,EAAiB,CAAC,IAAK,SAAU,SAAU,SAC3CC,EAA4B,CAAC,SAAU,QAAS,WAAY,UAE7CC,GAAU,WAI5B,SAHD,SAAAA,EAAYC,gGAAWpL,CAAA,KAAAmL,GACrB/T,KAAKgU,UAAYA,EACjBhU,KAAKiU,eAAiB,IACxB,KAAC,EAAAtW,IAAA,OAAAnH,MAED,SAAKyQ,GACCjH,KAAKiU,gBACPC,EAAAA,GAAAA,aAAsBve,EAAEqK,KAAKiU,iBAG/BjU,KAAKmU,SACLnU,KAAKiU,eAAiBhN,EAKtBiN,EAAAA,GAAAA,aAAsBve,EAAEsR,IACxBiN,EAAAA,GAAAA,UAAmBve,EAAEsR,GACvB,GAAC,CAAAtJ,IAAA,SAAAnH,MAED,WAAU,IAADmS,EAAA,KAEDyL,EAASpU,KAAKgU,UAAU/d,iBAAiB,aAADyB,OAAckc,IAC5D,GAAIQ,EAAOle,OAAS,EAGlBke,EAAO9d,SAAQ,SAAC+d,GACiB,UAA3BA,EAAMzW,QAAQ2U,SAChB5J,EAAKqL,UAAUhG,QAAQqG,GAEvB1L,EAAKqL,UAAU3M,OAAOgN,EAE1B,QATF,CAgBA,IAAMC,EAAatU,KAAKuU,iBAAiB,SACnCC,EAAWxU,KAAKuU,iBAAiB,OAEvCvU,KAAKgU,UAAUhG,QAAQsG,GACvBtU,KAAKgU,UAAU3M,OAAOmN,GAEtBF,EAAWzJ,iBAAiB,SAAS,kBAAMlC,EAAK8L,qBAAqBH,EAAW,IAChFE,EAAS3J,iBAAiB,SAAS,kBAAMlC,EAAK8L,qBAAqBD,EAAS,GAX5E,CAYF,GAAC,CAAA7W,IAAA,UAAAnH,MAED,WACiBwJ,KAAKgU,UAAU/d,iBAAiB,aAADyB,OAAckc,IACrDtd,SAAQ,SAAC+d,GAAK,OAAKA,EAAMjc,QAAQ,IAEpC4H,KAAKiU,iBAGPC,EAAAA,GAAAA,aAAsBve,EAAEqK,KAAKiU,iBAC7BjU,KAAKiU,eAAiB,KAE1B,GAAC,CAAAtW,IAAA,mBAAAnH,MAED,SAAiB+b,GACf,IAAM8B,EAAQxe,SAASqQ,cAAc,OAMrC,OALAmO,EAAM1R,UAAYiR,EAClBS,EAAMzW,QAAQ2U,SAAWA,EACzB8B,EAAMlO,SAAW,EACjBkO,EAAMb,aAAa,cAAe,QAE3Ba,CACT,GAAC,CAAA1W,IAAA,uBAAAnH,MAED,SAAqB6d,GAAQ,IAAD5J,EAAA,KAC1B,GAAKzK,KAAKiU,eAAV,CAKA,IAAMS,EAAeC,MAAMC,KAAK5U,KAAKiU,eAAehe,iBAAiB,MAAM4E,QAAO,SAACkM,GACjF,OAAO0D,EAAKoK,UAAU9N,EACxB,IAEItP,EAAS,KACb,GAA+B,UAA3B4c,EAAMzW,QAAQ2U,UAEhB,IAAK,IAAIuC,EAAM,EAAGA,EAAMJ,EAAaxe,OAAQ4e,GAAO,EAClD,IAAK9U,KAAK+U,aAAaL,EAAaI,KAAS9U,KAAKgV,YAAYN,EAAaI,IAAO,CAChFrd,EAASid,EAAaI,GACtB,KACF,OAIF,IAAK,IAAIG,EAAMP,EAAaxe,OAAS,EAAG+e,GAAO,EAAGA,GAAO,EACvD,IAAKjV,KAAK+U,aAAaL,EAAaO,KAASjV,KAAKgV,YAAYN,EAAaO,IAAO,CAChFxd,EAASid,EAAaO,GACtB,KACF,CAIAxd,EACFA,EAAO6B,QAGP+a,EAAMa,MA7BR,MAFEb,EAAMa,MAiCV,GAAC,CAAAvX,IAAA,YAAAnH,MAED,SAAUyQ,GACR,OAAOA,EAAQkO,YAAc,GAAKlO,EAAQmO,aAAe,CAC3D,GAAC,CAAAzX,IAAA,eAAAnH,MAED,SAAayQ,GACX,OAAOA,EAAQoO,UAAUC,SAAS1B,EACpC,GAAC,CAAAjW,IAAA,cAAAnH,MAED,SAAYyQ,GACV,GAAI4M,EAAexb,QAAQ4O,EAAQ5E,WAAa,EAC9C,OAAO,EAET,GAAIyR,EAA0Bzb,QAAQ4O,EAAQ5E,WAAa,GAAK4E,EAAQvD,aAAa,mBACnF,OAAIuD,EAAQvD,aAAa,YAM3B,IAAM6R,EAAWzX,SAASmJ,EAAQvD,aAAa,YAAa,IAC5D,OAAK8R,MAAMD,IAAaA,GAAY,CAKtC,+FAAC,CAtI4B,GCa/B9b,OAAO8F,QAAU9F,OAAO8F,SAAW,CAAC,EACpC9F,OAAO8F,QAAQC,OAAS,IAAIiW,EAAAA,EAC5Bhc,OAAO8F,QAAQ+M,aAAeA,EAC9B7S,OAAO8F,QAAQkJ,sBAAwBA,EACvChP,OAAO8F,QAAQkP,cAAgBA,EAC/BhV,OAAO8F,QAAQmW,WAAaA,EAAAA,EAC5Bjc,OAAO8F,QAAQwP,kBAAoBA,EACnCtV,OAAO8F,QAAQ2S,cAAgBA,EAE/Bvc,GAAE,WACA8D,OAAOkc,cAAgB,IAAID,EAAAA,EAAW/f,EAAE,iBACxC8D,OAAOmc,WAAa,IAAI7B,GAAWle,SAASC,cAAc,SAE1DH,EAAEE,UAAUsB,aACZxB,EAAEE,UAAUY,GAAG,kBAAkB,SAAC8E,GACrB5F,EAAE4F,EAAG9D,QFZT0D,MAAK,SAAC4Q,EAAI8J,GACjB,IAAMC,EAAUngB,EAAEkgB,GAEZ3E,EAAavb,EAAE,QACfogB,EAASpgB,EAAE,uBAAwBmgB,GAErCC,EAAO7f,OAAS,IAGlB6f,EAAO1f,KAAK,WAAY0f,EAAO1f,KAAK,cAAgB,GACpD0f,EAAO9Y,QAAQ,UAIjB6Y,EAAQ/F,IAAI,+BAA+BtZ,GAAG,+BAA+B,WAC3Eqf,EAAQ/F,IAAI,+BAOZ,IAAMiG,EAAiBrgB,EAAE,uBAAwBub,GAC7C8E,EAAe9f,OAAS,EAC1BuD,OAAOmc,WAAWK,KAAKD,EAAe,IAEtCvc,OAAOmc,WAAWM,SAEtB,IAEAzc,OAAOmc,WAAWK,KAAKJ,EACzB,GElBA,IAKAlgB,EAAE,cAAcc,GAAG,0BAA0B,SAAC8E,GAC5CA,EAAG9D,OAAO3B,cAAc,eAAewD,QACvCG,OAAOmc,WAAWK,KAAK1a,EAAG9D,OAC5B,IAAGhB,GAAG,uBAAuB,WAC3BgD,OAAOmc,WAAWM,SACpB,ITnCAvgB,EAAE,wBAAwBwF,MAAK,SAAC4Q,EAAI9E,GAIlCtR,EAAE,gCAAiCsR,GAASuD,WAAW,iBAAiBA,WAAW,cACnF7U,EAAE,0CAA2CsR,GAASuD,WAAW,cAEjE7U,EAAE,yBAA0BsR,GAAS5Q,KAAK,OAAQ,OACpD,IS+BA8f,MAIAxgB,EAAE,eAAec,GAAG,SAAS,SAACM,GAC5BA,EAAMO,gBACR,KAEA8e,EAAAA,EAAAA,KAEAzgB,EAAE,qBAAqBwF,MAAK,SAACkb,EAAMrC,IACjCsC,EAAAA,EAAAA,GAAkBtC,EACpB,IAEAre,EAAE,sBAAsBwF,MAAK,SAAC4Q,EAAI1Q,GAChC,IAAMmR,EAAQ7W,EAAE0F,GAChBmR,EAAM7U,KAAK,gBAAiB,IAAI2U,EAAaE,GAC/C,IAGA7W,EAAE,2BAA2BwF,MAAK,SAAC4Q,EAAItI,GACrC,IAAMsK,EAAMpY,EAAE8N,GACR8S,EAAW,IAAIxH,EAAkBhB,EAAKA,EAAIpW,KAAK,qBACrD4e,EAASC,iBACT7gB,EAAE8N,GAAI9L,KAAK,WAAY4e,EACzB,IAEA5gB,EAAE,mBAAmBwF,MAAK,WACL,IAAIsb,EAAAA,EAAoB9gB,EAAEqK,OAElCwW,gBACb,IAEAtI,EAA0BvY,EAAE,SAE5Buc,IC7Ea,SAAwBwE,GAErC,GAAKA,GAIAjd,OAAOkd,eAAZ,CAIA,IAAMC,EAAiBC,KAAKC,MAAMH,eAAe1b,QAAQ,oBAAsB,CAAC,EAChFyb,EAAMpgB,SAAQ,SAACiW,GACb,IAAMxU,EAAOwU,EAAK7I,aAAa,QAC3BkT,EAAe7e,IACjBwU,EAAKiH,aAAa,OAAQoD,EAAe7e,GAE7C,GARA,CAUF,CD6DEgf,CAAelhB,SAASI,iBAAiB,oBAC3C,qDErDAN,GAAE,WACAA,EAAEE,UAAUY,GAAG,QAAS,yBAAyB,SAAC8E,GAChD,IAAMwS,EAAMpY,EAAE4F,EAAG9D,QACjB,GAAKsW,EAAIpW,KAAK,qBAAqBoW,EAAIpW,KAAK,kBAAkBzB,OAAS,GAAvE,CAIA,IAAM2S,EAASlT,EAAEoY,EAAIpW,KAAK,mBAC1B,KAAIkR,EAAO3S,OAAS,IAAM2S,EAAO9J,GAAG,2BAApC,CAKA,IAAMiY,EAAeC,KAAOpO,EAAO,IACnC,GAAKmO,KAAgBA,EAAa9gB,OAAS,GAA3C,CAKA,IAAMghB,EAAQvhB,EAAE,aAAD+B,OAAcsf,EAAY,gBAAeG,IAAI,CAC1DjU,MAAO,EACPC,OAAQ,IAEV4K,EAAIrE,MAAMwN,GACVA,EAAMD,SAEN,IAAMG,EAAW,WACfF,EAAM9e,SACN2V,EAAIzU,OACN,EACA,IAGE,IAAKzD,SAASwhB,YAAY,QACxB,MAEJ,CAAE,MAAOC,GAEP,YADAF,GAEF,CACAA,IAGA,IAAM1P,EAAQqG,EAAIpW,KAAK,wBACvB,GAAI+P,EAAO,CACT,IAAI6P,EAAKxJ,EAAIpW,KAAK,gCACd4f,GACF3F,aAAa2F,GAGVxJ,EAAIpW,KAAK,kCACZoW,EAAIpW,KAAK,gCAAiCoW,EAAIxU,QAGhDwU,EAAIxU,KAAKmO,GACT6P,EAAKle,YAAW,WACd0U,EAAIxU,KAAKwU,EAAIpW,KAAK,kCAClBoW,EAAIyJ,WAAW,iCACfzJ,EAAIyJ,WAAW,+BACjB,GA7DyB,KA8DzBzJ,EAAIpW,KAAK,+BAAgC4f,EAC3C,CAGA,IAAIjM,EAAUyC,EAAIpW,KAAK,0BACvB,GAAI2T,EAAS,CACX,IAAImM,EAAO1J,EAAIpW,KAAK,6BAChB8f,EACEA,EAAKle,SAAW+R,IAGlBA,GAAW,WAGbmM,EAAO9hB,EAAE,qHACToY,EAAIrE,MAAM+N,GACV1J,EAAIpW,KAAK,4BAA6B8f,IAKxCA,EAAKle,KAAK+R,EACZ,CAlEA,CANA,CALA,CA8EF,GACF,aCpHA3V,GAAE,WAC0BA,EAAE,cACR+hB,cACtB,wCCDA7hB,SAASgV,iBAAiB,mBAAmB,SAACtP,GACvCA,EAAG9D,OAAOkgB,QAAQ,sBAIvBpc,EAAG9D,OAAOxB,iBAAiB,iBAAiBK,SAAQ,SAACoK,GACnDA,EAAOkX,UAAW,CACpB,GACF,IACA/hB,SAASgV,iBAAiB,iBAAiB,SAACtP,GACrCA,EAAG9D,OAAOkgB,QAAQ,sBAIvBpc,EAAG9D,OAAOxB,iBAAiB,iBAAiBK,SAAQ,SAACoK,GACnDA,EAAOkX,UAAW,CACpB,GACF,IAQAjiB,EAAEE,UAAUY,GAAG,SAAU,iCAAiC,SAAC8E,GACzDA,EAAGjE,iBAECiE,EAAG9D,OAAOxB,iBAAiB,kBAAkBC,OAAS,GAI1DqX,QAAQsK,MAAMpG,IAAAA,aAAoBlW,EAAG9D,OAAQ,CAAC8D,GAChD,aCjCA5F,GAAE,WAEKmiB,EAAAA,GAAAA,WAAAA,QAA8B,WAChBniB,EAAE,kBAEVoiB,OAAM,WACb,IAAMpe,EAAMhE,EAAE8D,QAAQue,YAAoC,GAArBriB,EAAE8D,QAAQ0J,SAC/CxN,EAAEqK,MAAM/I,KAAK,WAAWkgB,IAAI,MAAOxd,EACrC,GAEJ,wFCZMse,GAA+B,SAACnW,GACpCnM,EAAEE,UAAUY,GAAG,QAAQ,GAADiB,OAAKoK,EAAQoW,kBAAiB,OAAM,SAACnhB,GACzD,IAAMgD,EAAUpE,EAAEoB,EAAMU,QAExBsC,EAAQG,QAAQ,SAASjD,KAAK,WAAWkD,KAAKJ,EAAQI,SAEtD8B,EAAAA,GAAAA,IAAUlC,EAAQ1D,KAAK,QACzB,KAEAwF,EAAAA,GAAAA,IAAiBiG,EAAQqW,cAAc,WACrC,IACMhgB,EADMsB,OAAO6K,SAASiF,WACVpR,MAAM,mCAClBigB,EAAcziB,EAAE,GAAD+B,OAAIoK,EAAQoW,kBAAiB,WAC9C1hB,EAAQ4hB,EAAYnhB,KAAK,iBAAiBU,KAAKmK,EAAQuW,eAEvDlgB,IACF3B,EAAQ2B,EAAM,IAGhB,IAAMmgB,EAAWF,EAAYnhB,KAAK,gBAADS,OAAiBoK,EAAQuW,cAAa,MAAA3gB,OAAKlB,EAAK,OAAM2D,OAEvFie,EAAYnhB,KAAK,WAAWkD,KAAKme,EACnC,GACF,EAEA3iB,GAAE,WACAsiB,GAA6B,CAC3BC,kBAAmB,YACnBC,aAAc,SACdI,aAAc,QACdF,cAAe,UAEjBJ,GAA6B,CAC3BC,kBAAmB,oBACnBC,aAAc,mBACdI,aAAc,WACdF,cAAe,mBAEnB,wCCtCA1iB,GAAE,WACA,IAAM6iB,EAAwB7iB,EAAE,0BAChC,GAAI6iB,EAAsBtiB,OAAQ,CAChC,IAAMuiB,EAASC,KAAMF,EAAsB7gB,KAAK,oBAC1CghB,EAAeC,aAAY,WAC/B,IAAMC,GAAQJ,EAASC,QAAW,IAC5BI,EAAgB5P,KAAK6P,MAAMF,GACjCL,EAAsBvhB,KAAK,YAAYsC,KAAKuf,GAExCD,GAAQ,GACVpf,OAAO6K,SAAS0U,QAEpB,GAAG,KAGHvf,OAAOoR,iBAAiB,gBAAgB,WACtCoO,cAAcN,EAEhB,GACF,CACF,qxBCtBgC,IAuIhC,GArIoB,WAiBjB,SAXD,SAAAO,EAAYpX,gGAAS8G,CAAA,KAAAsQ,GACnBlZ,KAAKmZ,MAAQrX,EAAQqX,MACrBnZ,KAAKoZ,WAAatX,EAAQsX,WAC1BpZ,KAAKqZ,WAAavX,EAAQuX,WAC1BrZ,KAAKsZ,OAASC,GAAAA,EAAAA,IAAYvZ,KAAKqZ,YAC/BrZ,KAAKwZ,eAAiB1X,EAAQ0X,eAC1BxZ,KAAKsZ,OACPtZ,KAAKyZ,YAAY5C,KAAKC,MAAM9W,KAAKsZ,SAEjCtZ,KAAKyZ,YAAY,CAAC,EAEtB,KAAC,EAAA9b,IAAA,cAAAnH,MAED,SAAYkjB,GACV1Z,KAAK9D,MAAQwd,EACbH,GAAAA,EAAAA,IAAYvZ,KAAKqZ,WAAYxC,KAAK8C,UAAU3Z,KAAK9D,OAAQ,CACvDmS,OAAQxY,SAASyO,SAASsV,KAAKnhB,MAAM,KAAK,GAC1CohB,SAAU,MACVC,QAAS,IACTC,OAAqC,WAA7BtgB,OAAO6K,SAAS0V,WAE1Bha,KAAKia,wBACLja,KAAKka,cACP,GAAC,CAAAvc,IAAA,qBAAAnH,MAED,WAAsB,IAADmS,EAAA,KACnB9S,SAASI,iBAAiB,2CAA2CK,SAAQ,SAAC6jB,GAC5E,GAAIxR,EAAKzM,MAAMie,EAAOvc,QAAQwc,SAAU,CACtC,IAAMC,EAAexkB,SAASqQ,cAAc,UACxCiU,EAAOG,IAAIpkB,OAAS,EACtBmkB,EAAaC,IAAMH,EAAOG,IAE1BD,EAAanH,UAAYiH,EAAOjH,UAElCiH,EAAOnW,WAAWuW,aAAaF,EAAcF,EAC/C,CACF,IAEA,IAAMpjB,EAAQ,IAAI2U,YAAY,cAAe,CAAEjE,OAAQzH,KAAK9D,QAC5DrG,SAAS4V,cAAc1U,EACzB,GAAC,CAAA4G,IAAA,iBAAAnH,MAED,WACMwJ,KAAKwa,cACP3kB,SAASI,iBAAiB,oBAAoBK,SAAQ,SAACmkB,GACrD,GAAIA,EAASC,YAAcD,EAASC,WAAWxkB,OAAQ,CACrD,IAAM8W,EAAU2H,MAAMC,KAAK6F,EAASC,YAAYzjB,MAAK,SAAC0jB,GACpD,OAAOA,EAAUC,WAAaC,KAAKC,YACrC,IACA,IAAK9N,EACH,OAEF,IAAM+N,EAAallB,SAASqQ,cAAc,OAC1C6U,EAAW7H,UAAYlG,EAAQgO,UAC/BP,EAASzW,WAAWuW,aAAaQ,EAAWE,kBAAmBR,EACjE,CACF,IAEA5kB,SAASI,iBAAiB,UAAUK,SAAQ,SAACmkB,GAC3C,IAAMM,EAAallB,SAASqQ,cAAc,OAC1C6U,EAAWpY,UAAY,kBACvBoY,EAAW3H,YAAYvd,SAASqlB,cAAc,GAADxjB,OAAI+iB,EAASU,aAC1DV,EAASzW,WAAWuW,aAAaQ,EAAYN,EAC/C,GAEJ,GAAC,CAAA9c,IAAA,kBAAAnH,MAED,WAAmB,IAADiU,EAAA,KAChB5U,SAASI,iBAAiB,oBAAoBK,SAAQ,SAACmkB,GACrD,IAAIA,EAAS3kB,cAAc,wBAA3B,CAIA,IAAIslB,EAAS3Q,EAAK+O,eAAe6B,WAAU,GAC3CD,EAAO/F,UAAUjd,OAAO,QACxBqiB,EAASrH,YAAYgI,EAJrB,CAKF,GACF,GAAC,CAAAzd,IAAA,eAAAnH,MAED,WACEwJ,KAAKsb,qBACLtb,KAAKub,iBACLvb,KAAKwb,iBACP,GAAC,CAAA7d,IAAA,cAAAnH,MAED,WAAe,IAADqa,EAAA,KACZ,OAAO7Q,KAAKoZ,WAAWqC,OAAM,SAACC,GAC5B,OAAgC,IAAzB7K,EAAK3U,MAAMwf,EACpB,GACF,GAAC,CAAA/d,IAAA,wBAAAnH,MAED,WAAyB,IAAD6a,EAAA,KACGrR,KAAKmZ,MAAMljB,iBAAiB,qBAEpCK,SAAQ,SAACqlB,GACxB,IAAMC,EAAgBD,EAAW7lB,cAAc,SAC3Cub,EAAKnV,OAASmV,EAAKnV,MAAM0f,EAAcha,MACzCga,EAAcC,SAAU,EACdD,EAAchE,WACxBgE,EAAcC,SAAU,EAE5B,GACF,GAAC,CAAAle,IAAA,eAAAnH,MAED,SAAakjB,GACX1Z,KAAKyZ,YAAYC,EACnB,GAAC,CAAA/b,IAAA,YAAAnH,MAED,WACE,IAAMkjB,EAAW,CAAC,EAClB1Z,KAAKoZ,WAAW9iB,SAAQ,SAAColB,GACvBhC,EAASgC,IAAY,CACvB,IACA1b,KAAKyZ,YAAYC,EACnB,GAAC,CAAA/b,IAAA,YAAAnH,MAED,WACEwJ,KAAKyZ,YAAY,CACfqC,WAAW,GAEf,GAAC,CAAAne,IAAA,WAAAnH,MAED,WACE,OAAOwJ,KAAK9D,KACd,iGAAC,CAlIiB,uwBCmFpBrG,SAASgV,iBAAiB,oBAAoB,WAC5C,IAAMsO,EAAQtjB,SAASC,cAAc,aACrC,GAAKqjB,EAAL,CAIA,IAAMC,EAAa1d,GAAIyd,EAAMljB,iBAAiB,sBAAsB8lB,KAAI,SAACtY,GAAE,OAAKA,EAAG7F,QAAQtC,EAAE,IACvF0gB,EAAU,IAAI9C,GAAe,CACjCC,MAAOA,EACPC,WAAYA,EACZC,WAAY5f,OAAO8F,QAAQC,OAAOC,IAAI,uBACtC+Z,eAAgB3jB,SAASC,cAAc,2BA1Bf,SAACkmB,GAC3B,IAAMC,EAAkBpmB,SAASI,iBAAiB,oBAC9C+lB,EAAQxB,eACVyB,EAAgB3lB,SAAQ,SAAC+E,GACvB,IAAM6gB,EAASrmB,SAASqQ,cAAc,UACtCgW,EAAO1I,aAAa,MAAOnY,EAAKqI,aAAa,QAC7CwY,EAAOvZ,UAAYtH,EAAKga,UAAU9L,WAClC2S,EAAO1I,aAAa,kBAAmBnY,EAAKqI,aAAa,oBACzDwY,EAAO1I,aAAa,cAAenY,EAAKqI,aAAa,gBACrDrI,EAAKoX,cAAcW,YAAY8I,GAC/B7gB,EAAKjD,QACP,GAEJ,CAgBE+jB,CAAoBH,GAvEJ,SAACA,GACQA,EAAQ7C,MAAMljB,iBAAiB,qBAEvCK,SAAQ,SAACqlB,GACxB,IAAMS,EAAiBT,EAAW7lB,cAAc,aAC1CumB,EAAsBV,EAAW7lB,cAAc,mBACrDsmB,EAAevR,iBAAiB,SAAS,WACxBwR,EAAoBhH,UAAUC,SAAS,SAEpD8G,EAAe/G,UAAUiH,IAAI,QAC7BD,EAAoBhH,UAAUjd,OAAO,UAErCgkB,EAAe/G,UAAUjd,OAAO,QAChCikB,EAAoBhH,UAAUiH,IAAI,QAEtC,GACF,IAEA,IAAMC,EAAkBP,EAAQ7C,MAAMrjB,cAAc,oBAC9C0mB,EAAkBR,EAAQ7C,MAAMrjB,cAAc,oBAC9C2mB,EAAqBT,EAAQ7C,MAAMrjB,cAAc,kBAEvDymB,EAAgB1R,iBAAiB,SAAS,WACxCmR,EAAQU,WACV,IAEAF,EAAgB3R,iBAAiB,SAAS,WACxCmR,EAAQW,WACV,IAEAF,EAAmB5R,iBAAiB,SAAS,WAC3C,IAAI6O,EAAW,CAAC,EAChBsC,EAAQ5C,WAAW9iB,SAAQ,SAAColB,GACTM,EAAQ7C,MAAMrjB,cAAc,eAAD4B,OAAgBgkB,EAAQ,OAAMG,UAExEnC,EAASgC,IAAY,EAEzB,IACAM,EAAQY,aAAalD,EACvB,GACF,CAgCEmD,CAAUb,GAlGO,SAACA,GAClB,KAAItO,OAAOC,KAAKqO,EAAQ9f,OAAOhG,OAAS,GAAxC,CAGA,IAAM4mB,EAAgBjnB,SAASC,cAAc,sBAC7CgnB,EAAczH,UAAUjd,OAAO,QAE/B,IAAMmkB,EAAkBO,EAAchnB,cAAc,qBAC9C0mB,EAAkBM,EAAchnB,cAAc,qBAC9CinB,EAAiBD,EAAchnB,cAAc,uBAEnDymB,EAAgB1R,iBAAiB,SAAS,WACxCmR,EAAQU,YACRI,EAAcjK,MAAMmK,QAAU,MAChC,IAEAR,EAAgB3R,iBAAiB,SAAS,WACxCmR,EAAQW,YACRG,EAAcjK,MAAMmK,QAAU,MAChC,IAEAD,EAAelS,iBAAiB,SAAS,WACvCiS,EAAcjK,MAAMmK,QAAU,MAChC,GApBA,CAqBF,CA2EEC,CAAWjB,EAZX,CAaF,IC3FAviB,OAAOyjB,SAAWA,EAAAA,EA0DlBC,EAAAA,OAGA1L,IAAAA,+BCxEA,IAAIsK,EAAM,CACT,iCAAkC,MAClC,8BAA+B,MAC/B,yBAA0B,KAC1B,6BAA8B,MAC9B,+BAAgC,MAChC,0EAA2E,MAC3E,sBAAuB,MACvB,wBAAyB,MACzB,4BAA6B,MAC7B,yCAA0C,MAC1C,sCAAuC,MACvC,8CAA+C,MAC/C,2CAA4C,MAC5C,6CAA8C,MAC9C,qDAAsD,MACtD,kDAAmD,MACnD,iDAAkD,MAClD,oDAAqD,MACrD,2DAA4D,MAC5D,uDAAwD,MACxD,uDAAwD,MACxD,oDAAqD,MACrD,yDAA0D,MAC1D,qDAAsD,MACtD,8CAA+C,MAC/C,kDAAmD,MACnD,oDAAqD,MACrD,kDAAmD,MACnD,mDAAoD,MACpD,qDAAsD,MACtD,kDAAmD,MACnD,iDAAkD,MAClD,oDAAqD,MACrD,gDAAiD,OAIlD,SAASqB,EAAeC,GACvB,IAAI/hB,EAAKgiB,EAAsBD,GAC/B,OAAOE,EAAoBjiB,EAC5B,CACA,SAASgiB,EAAsBD,GAC9B,IAAIE,EAAoBzc,EAAEib,EAAKsB,GAAM,CACpC,IAAIzc,EAAI,IAAI8D,MAAM,uBAAyB2Y,EAAM,KAEjD,MADAzc,EAAE4c,KAAO,mBACH5c,CACP,CACA,OAAOmb,EAAIsB,EACZ,CACAD,EAAezP,KAAO,WACrB,OAAOD,OAAOC,KAAKoO,EACpB,EACAqB,EAAeK,QAAUH,EACzBI,EAAOC,QAAUP,EACjBA,EAAe9hB,GAAK,k2GCtDhBsiB,EAA2B,CAAC,EAGhC,SAASL,EAAoBM,GAE5B,IAAIC,EAAeF,EAAyBC,GAC5C,QAAqBzhB,IAAjB0hB,EACH,OAAOA,EAAaH,QAGrB,IAAID,EAASE,EAAyBC,GAAY,CACjDviB,GAAIuiB,EACJE,QAAQ,EACRJ,QAAS,CAAC,GAUX,OANAK,EAAoBH,GAAUI,KAAKP,EAAOC,QAASD,EAAQA,EAAOC,QAASJ,GAG3EG,EAAOK,QAAS,EAGTL,EAAOC,OACf,CAGAJ,EAAoBW,EAAIF,E3C5BpBtoB,EAAW,GACf6nB,EAAoBY,EAAI,SAASC,EAAQC,EAAUxc,EAAIyc,GACtD,IAAGD,EAAH,CAMA,IAAIE,EAAeC,IACnB,IAAShc,EAAI,EAAGA,EAAI9M,EAASQ,OAAQsM,IAAK,CACrC6b,EAAW3oB,EAAS8M,GAAG,GACvBX,EAAKnM,EAAS8M,GAAG,GACjB8b,EAAW5oB,EAAS8M,GAAG,GAE3B,IAJA,IAGIic,GAAY,EACPC,EAAI,EAAGA,EAAIL,EAASnoB,OAAQwoB,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAa5Q,OAAOC,KAAK4P,EAAoBY,GAAG1C,OAAM,SAAS9d,GAAO,OAAO4f,EAAoBY,EAAExgB,GAAK0gB,EAASK,GAAK,IAChKL,EAASnlB,OAAOwlB,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACb/oB,EAASwD,OAAOsJ,IAAK,GACrB,IAAIN,EAAIL,SACEzF,IAAN8F,IAAiBkc,EAASlc,EAC/B,CACD,CACA,OAAOkc,CArBP,CAJCE,EAAWA,GAAY,EACvB,IAAI,IAAI9b,EAAI9M,EAASQ,OAAQsM,EAAI,GAAK9M,EAAS8M,EAAI,GAAG,GAAK8b,EAAU9b,IAAK9M,EAAS8M,GAAK9M,EAAS8M,EAAI,GACrG9M,EAAS8M,GAAK,CAAC6b,EAAUxc,EAAIyc,EAwB/B,E4C5BAf,EAAoB5c,EAAI,SAAS+c,GAChC,IAAIiB,EAASjB,GAAUA,EAAOkB,WAC7B,WAAa,OAAOlB,EAAgB,OAAG,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAH,EAAoBsB,EAAEF,EAAQ,CAAEpc,EAAGoc,IAC5BA,CACR,ECNApB,EAAoBsB,EAAI,SAASlB,EAASmB,GACzC,IAAI,IAAInhB,KAAOmhB,EACXvB,EAAoBzc,EAAEge,EAAYnhB,KAAS4f,EAAoBzc,EAAE6c,EAAShgB,IAC5E+P,OAAOqR,eAAepB,EAAShgB,EAAK,CAAEqhB,YAAY,EAAMvf,IAAKqf,EAAWnhB,IAG3E,ECPA4f,EAAoB0B,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOlf,MAAQ,IAAImf,SAAS,cAAb,EAChB,CAAE,MAAOve,GACR,GAAsB,kBAAXnH,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB8jB,EAAoBzc,EAAI,SAASse,EAAKpgB,GAAQ,OAAO0O,OAAOzL,UAAUxF,eAAewhB,KAAKmB,EAAKpgB,EAAO,ECAtGue,EAAoB8B,IAAM,SAAS3B,GAGlC,OAFAA,EAAO4B,MAAQ,GACV5B,EAAOhY,WAAUgY,EAAOhY,SAAW,IACjCgY,CACR,ECJAH,EAAoBgC,EAAI,6BCKxB,IAAIC,EAAkB,CACrB,KAAM,GAaPjC,EAAoBY,EAAEO,EAAI,SAASe,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4BhoB,GAC/D,IAKIkmB,EAAU4B,EALVpB,EAAW1mB,EAAK,GAChBioB,EAAcjoB,EAAK,GACnBkoB,EAAUloB,EAAK,GAGI6K,EAAI,EAC3B,GAAG6b,EAAS3R,MAAK,SAASpR,GAAM,OAA+B,IAAxBkkB,EAAgBlkB,EAAW,IAAI,CACrE,IAAIuiB,KAAY+B,EACZrC,EAAoBzc,EAAE8e,EAAa/B,KACrCN,EAAoBW,EAAEL,GAAY+B,EAAY/B,IAGhD,GAAGgC,EAAS,IAAIzB,EAASyB,EAAQtC,EAClC,CAEA,IADGoC,GAA4BA,EAA2BhoB,GACrD6K,EAAI6b,EAASnoB,OAAQsM,IACzBid,EAAUpB,EAAS7b,GAChB+a,EAAoBzc,EAAE0e,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOlC,EAAoBY,EAAEC,EAC9B,EAEI0B,EAAqBC,KAA8B,wBAAIA,KAA8B,yBAAK,GAC9FD,EAAmBxpB,QAAQopB,EAAqBM,KAAK,KAAM,IAC3DF,EAAmBne,KAAO+d,EAAqBM,KAAK,KAAMF,EAAmBne,KAAKqe,KAAKF,OC/CvF,IAAIG,EAAsB1C,EAAoBY,OAAE/hB,EAAW,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,WAAa,OAAOmhB,EAAoB,MAAQ,IAC1J0C,EAAsB1C,EAAoBY,EAAE8B","sources":["webpack://decidim-app/webpack/runtime/chunk loaded","webpack://decidim-app/./app/packs/src/decidim/account_form.js","webpack://decidim-app/./app/packs/src/decidim/append_redirect_url_to_modals.js","webpack://decidim-app/./app/packs/src/decidim/callout.js","webpack://decidim-app/./app/packs/src/decidim/conversations.js","webpack://decidim-app/./app/packs/src/decidim/diff_mode_dropdown.js","webpack://decidim-app/./app/packs/src/decidim/floating_help.js","webpack://decidim-app/./app/packs/src/decidim/form_attachments.js","webpack://decidim-app/./app/packs/src/decidim/history.js","webpack://decidim-app/./app/packs/src/decidim/identity_selector_dialog.js","webpack://decidim-app/./app/packs/src/decidim/input_autojump.js","webpack://decidim-app/./app/packs/src/decidim/notifications.js","webpack://decidim-app/./app/packs/src/decidim/represent_user_group.js","webpack://decidim-app/./app/packs/src/decidim/responsive_horizontal_tabs.js","webpack://decidim-app/./app/packs/src/decidim/security/selfxss_warning.js","webpack://decidim-app/./app/packs/src/decidim/start_conversation_dialog.js","webpack://decidim-app/./app/packs/src/decidim/tooltip_keep_on_hover.js","webpack://decidim-app/./app/packs/src/decidim/user_registrations.js","webpack://decidim-app/./app/packs/src/decidim/vendor/modernizr.js","webpack://decidim-app/./app/packs/src/decidim/vendor/social-share-button.js","webpack://decidim-app/./app/packs/src/decidim/input_multiple_mentions.js","webpack://decidim-app/./app/packs/src/decidim/input_character_counter.js","webpack://decidim-app/./app/packs/src/decidim/dropdowns_menus.js","webpack://decidim-app/./app/packs/src/decidim/icon.js","webpack://decidim-app/./app/packs/src/decidim/external_link.js","webpack://decidim-app/./app/packs/src/decidim/external_domain_warning.js","webpack://decidim-app/./app/packs/src/decidim/form_validator.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-comments-0.27.2/app/packs/src/decidim/comments/comments.component.js","webpack://decidim-app/./app/packs/src/decidim/input_emoji.js","webpack://decidim-app/./app/packs/src/decidim/dialog_mode.js","webpack://decidim-app/./app/packs/src/decidim/focus_guard.js","webpack://decidim-app/./app/packs/src/decidim/index.js","webpack://decidim-app/./app/packs/src/decidim/back_to_list.js","webpack://decidim-app/./app/packs/src/decidim/clipboard.js","webpack://decidim-app/./app/packs/src/decidim/append_elements.js","webpack://decidim-app/./app/packs/src/decidim/form_remote.js","webpack://decidim-app/./app/packs/src/decidim/conferences.js","webpack://decidim-app/./app/packs/src/decidim/results_listing.js","webpack://decidim-app/./app/packs/src/decidim/impersonation.js","webpack://decidim-app/./app/packs/src/decidim/data_consent/consent_manager.js","webpack://decidim-app/./app/packs/src/decidim/data_consent/index.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.2/app/packs/entrypoints/decidim_core.js","webpack://decidim-app/../../usr/local/rvm/gems/ruby-3.0.2/gems/decidim-core-0.27.2/app/packs/images/ sync ^\\.\\/.*$","webpack://decidim-app/webpack/bootstrap","webpack://decidim-app/webpack/runtime/compat get default export","webpack://decidim-app/webpack/runtime/define property getters","webpack://decidim-app/webpack/runtime/global","webpack://decidim-app/webpack/runtime/hasOwnProperty shorthand","webpack://decidim-app/webpack/runtime/node module decorator","webpack://decidim-app/webpack/runtime/publicPath","webpack://decidim-app/webpack/runtime/jsonp chunk loading","webpack://decidim-app/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/**\n * Initializes the edit account form to control the password field elements\n * which should only be required when they are visible.\n *\n * @returns {void}\n */\nconst initializeAccountForm = () => {\n  const editUserForm = document.querySelector(\"form.edit_user\");\n  if (!editUserForm) {\n    return;\n  }\n\n  const passwordChange = editUserForm.querySelector(\"#passwordChange\");\n  if (!passwordChange) {\n    return;\n  }\n\n  const passwordFields = passwordChange.querySelectorAll(\"input[type='password']\");\n  if (passwordFields.length < 1) {\n    return;\n  }\n\n  // Foundation uses jQuery so these have to be bound using jQuery and the\n  // attribute value needs to be set through jQuery.\n  const togglePasswordFieldValidators = (enabled) => {\n    $(passwordFields).attr(\"required\", enabled);\n\n    if (!enabled) {\n      passwordFields.forEach((field) => (field.value = \"\"));\n    }\n  }\n\n  $(passwordChange).on(\"on.zf.toggler\", () => {\n    togglePasswordFieldValidators(true);\n  });\n  $(passwordChange).on(\"off.zf.toggler\", () => {\n    togglePasswordFieldValidators(false);\n  });\n  togglePasswordFieldValidators(false);\n};\n\n/**\n * Since the delete account has a modal to confirm it we need to copy the content of the\n * reason field to the hidden field in the form inside the modal.\n *\n * @return {void}\n */\nconst initializeDeleteAccount = () => {\n  const $deleteAccountForm = $(\".delete-account\");\n  const $deleteAccountModalForm = $(\".delete-account-modal\");\n\n  if ($deleteAccountForm.length < 1) {\n    return;\n  }\n\n  const $openModalButton = $(\".open-modal-button\");\n  const $modal = $(\"#deleteConfirm\");\n\n  $openModalButton.on(\"click\", (event) => {\n    try {\n      const reasonValue = $deleteAccountForm.find(\"textarea#delete_account_delete_reason\").val();\n      $deleteAccountModalForm.find(\"input#delete_account_delete_reason\").val(reasonValue);\n      $modal.foundation(\"open\");\n    } catch (error) {\n      console.error(error); // eslint-disable-line no-console\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n    return false;\n  });\n};\n\n$(() => {\n  initializeAccountForm();\n  initializeDeleteAccount();\n});\n","/* eslint-disable multiline-ternary, no-ternary */\n\n/*\n *\n * This is used to make sure users are redirected to\n * the expected URL after sign in.\n *\n * When a button or link trigger a login modal we capture\n * the event and inject the URL where the user should\n * be redirected after sign in (the redirect_url param).\n *\n * The code is injected to any form or link in the modal\n * and when the modal is closed we remove the injected\n * code.\n *\n * In order for this to work the button or link must have\n * a data-open attribute with the ID of the modal to open\n * and a data-redirect-url attribute with the URL to redirect\n * the user. If any of this is missing no code will be\n * injected.\n *\n */\n$(() => {\n  const removeUrlParameter = (url, parameter) => {\n    const urlParts = url.split(\"?\");\n\n    if (urlParts.length >= 2) {\n      // Get first part, and remove from array\n      const urlBase = urlParts.shift();\n\n      // Join it back up\n      const queryString = urlParts.join(\"?\");\n\n      const prefix = `${encodeURIComponent(parameter)}=`;\n      const parts = queryString.split(/[&;]/g);\n\n      // Reverse iteration as may be destructive\n      for (let index = parts.length - 1; index >= 0; index -= 1) {\n        // Idiom for string.startsWith\n        if (parts[index].lastIndexOf(prefix, 0) !== -1) {\n          parts.splice(index, 1);\n        }\n      }\n\n      if (parts.length === 0) {\n        return urlBase;\n      }\n\n      return `${urlBase}?${parts.join(\"&\")}`;\n    }\n\n    return url;\n  }\n\n  $(document).on(\"click.zf.trigger\", (event) => {\n    const target = `#${$(event.target).data(\"open\")}`;\n    const redirectUrl = $(event.target).data(\"redirectUrl\");\n\n    if (target && redirectUrl) {\n      $(\"<input type='hidden' />\").\n        attr(\"id\", \"redirect_url\").\n        attr(\"name\", \"redirect_url\").\n        attr(\"value\", redirectUrl).\n        appendTo(`${target} form`);\n\n      $(`${target} a`).attr(\"href\", (index, href) => {\n        const querystring = jQuery.param({\"redirect_url\": redirectUrl});\n        return href + (href.match(/\\?/) ? \"&\" : \"?\") + querystring;\n      });\n    }\n  });\n\n  $(document).on(\"closed.zf.reveal\", (event) => {\n    $(\"#redirect_url\", event.target).remove();\n    $(\"a\", event.target).attr(\"href\", (index, href) => {\n      if (href && href.indexOf(\"redirect_url\") !== -1) {\n        return removeUrlParameter(href, \"redirect_url\");\n      }\n\n      return href;\n    });\n  });\n});\n","/**\n * Improves the accessibility of the callout messages for screen readers. Not\n * all screen readers would announce the callout alert contents after the page\n * reload without this.\n */\n\n$(() => {\n  const $callout = $('.callout[role=\"alert\"]:first');\n  if ($callout.length > 0) {\n    setTimeout(() => {\n      // The content insertion is to try to hint some of the screen readers\n      // that the alert content has changed and needs to be announced.\n      $callout.attr(\"tabindex\", \"0\").focus().html(`${$callout.html()}&nbsp;`);\n    }, 500);\n  }\n});\n","/**\n * Scroll smoothly to the last message automatically when the page is fully loaded.\n * To apply this to a page, at least one element must have the class \"scroll-to-last-message\".\n * @returns {void}\n */\nconst scrollToLastMessage = function() {\n  if ($(\".scroll-to-last-message\").length > 0) {\n    window.scrollTo({\n      top: $(\".conversation-chat:last-child\").offset().top,\n      behavior: \"smooth\"\n    });\n  }\n}\n\n$(document).ready(() => {\n  scrollToLastMessage();\n});\n","$(() => {\n  const $allDiffViews = $(\".row.diff_view\");\n\n  $(document).on(\"click\", \".diff-view-by a.diff-view-mode\", (event) => {\n    event.preventDefault();\n    const $target = $(event.target)\n    let type = \"escaped\";\n    const $selected = $target.parents(\".is-dropdown-submenu-parent\").find(\"#diff-view-selected\");\n    if ($selected.text().trim() === $target.text().trim()) {\n      return;\n    }\n\n    $selected.text($target.text());\n\n    if ($target.attr(\"id\") === \"diff-view-unified\") {\n      if ($(\".row.diff_view_split_escaped\").hasClass(\"hide\")) {\n        type = \"unescaped\";\n      }\n\n      $allDiffViews.addClass(\"hide\");\n      $(`.row.diff_view_unified_${type}`).removeClass(\"hide\");\n    }\n    if ($target.attr(\"id\") === \"diff-view-split\") {\n      if ($(\".row.diff_view_unified_escaped\").hasClass(\"hide\")) {\n        type = \"unescaped\";\n      }\n\n      $allDiffViews.addClass(\"hide\");\n      $(`.row.diff_view_split_${type}`).removeClass(\"hide\");\n    }\n  })\n\n  $(document).on(\"click\", \".diff-view-by a.diff-view-html\", (event) => {\n    event.preventDefault();\n    const $target = $(event.target);\n    $target.parents(\".is-dropdown-submenu-parent\").find(\"#diff-view-html-selected\").text($target.text());\n    const $visibleDiffViewsId = $allDiffViews.not(\".hide\").first().attr(\"id\").split(\"_\").slice(1, -1).join(\"_\");\n    const $visibleDiffViews = $allDiffViews.filter(`[id*=${$visibleDiffViewsId}]`)\n\n    if ($target.attr(\"id\") === \"diff-view-escaped-html\") {\n      $visibleDiffViews.filter(\"[id$=_unescaped]\").addClass(\"hide\");\n      $visibleDiffViews.filter(\"[id$=_escaped]\").removeClass(\"hide\");\n    }\n    if ($target.attr(\"id\") === \"diff-view-unescaped-html\") {\n      $visibleDiffViews.filter(\"[id$=_escaped]\").addClass(\"hide\");\n      $visibleDiffViews.filter(\"[id$=_unescaped]\").removeClass(\"hide\");\n    }\n  })\n});\n","$(function() {\n  if (!window.localStorage) {\n    return;\n  }\n\n  let getDismissedHelpers = () => {\n    let serialized = localStorage.getItem(\"dismissedHelpers\");\n    if (!serialized) {\n      return [];\n    }\n\n    return serialized.split(\",\");\n  };\n\n  let addDismissedHelper = (id) => {\n    let dismissedHelpers = getDismissedHelpers();\n\n    if (!dismissedHelpers.includes(id)) {\n      localStorage.setItem(\n        \"dismissedHelpers\",\n        [...dismissedHelpers, id].join(\",\")\n      );\n    }\n  };\n\n  let dismissedHelpers = getDismissedHelpers();\n\n  $(\".floating-helper-container\").each((_index, elem) => {\n    let id = $(elem).data(\"help-id\");\n\n    $(\n      \".floating-helper__trigger, .floating-helper__content-close\",\n      elem\n    ).on(\"click\", (ev) => {\n      ev.preventDefault();\n    });\n\n    if (!dismissedHelpers.includes(id)) {\n      $(\".floating-helper\", elem).foundation(\"toggle\");\n      $(\".floating-helper__wrapper\", elem).foundation(\"toggle\");\n\n      $(\".floating-helper\", elem).on(\"off.zf.toggler\", () => {\n        addDismissedHelper(id);\n      });\n    }\n  });\n});\n","$(() => {\n  $(\"form .attachments_container\").on(\"closed.zf.callout\", (event) => {\n    $(event.target).remove();\n  });\n});\n","/* eslint-disable require-jsdoc */\n/* eslint-disable no-prototype-builtins, no-restricted-syntax, no-param-reassign */\n\nlet callbacks = {};\n\nexport default function registerCallback(callbackId, callback) {\n  callbacks[callbackId] = callback;\n}\n\nconst unregisterCallback = (callbackId) => {\n  callbacks[callbackId] = null;\n}\n\nconst pushState = (url, state = null) => {\n  if (window.history) {\n    window.history.pushState(state, null, url);\n  }\n};\n\nconst replaceState = (url, state = null) => {\n  if (window.history) {\n    window.history.replaceState(state, null,  url);\n  }\n};\n\nconst state = () => {\n  if (window.history) {\n    return window.history.state;\n  }\n  return null;\n};\n\nwindow.onpopstate = (event) => {\n  // Ensure the event is caused by user action\n  if (event.isTrusted) {\n    for (let callbackId in callbacks) {\n      if (callbacks.hasOwnProperty(callbackId)) {\n        callbacks[callbackId](event.state);\n      }\n    }\n  }\n}\n\nexport { registerCallback, unregisterCallback, pushState, replaceState, state };\n","/**\n * Makes the #select-identity-button to open a popup for the user to\n * select with which identity they want to perform an action.\n *\n */\n$(() => {\n  let button = $(\"#select-identity-button\"),\n      identitiesUrl = null,\n      userIdentitiesDialog = $(\"#user-identities\");\n\n  if (userIdentitiesDialog.length) {\n    identitiesUrl = userIdentitiesDialog.data(\"reveal-identities-url\");\n\n    button.click(function () {\n      $.ajax(identitiesUrl).done(function(response) {\n        userIdentitiesDialog.html(response).foundation(\"open\");\n        button.trigger(\"ajax:success\")\n      });\n    });\n  }\n});\n\n\n/**\n * Manage the identity selector for endorsements.\n *\n */\n$(() => {\n  $(\"#select-identity-button\").on(\"ajax:success\", function() {\n    // once reveal popup has been rendered register event callbacks\n    $(\"#user-identities ul.reveal__list li\").each(function(index, elem) {\n      let liTag = $(elem)\n      liTag.on(\"click\", function() {\n        let method = liTag.data(\"method\"),\n            urlDataAttr = null;\n        if (method === \"POST\") {\n          urlDataAttr = \"create_url\";\n        } else {\n          urlDataAttr = \"destroy_url\";\n        }\n        $.ajax({\n          url: liTag.data(urlDataAttr),\n          method: method,\n          dataType: \"script\",\n          success: function() {\n            if (liTag.hasClass(\"selected\")) {\n              liTag.removeClass(\"selected\")\n              liTag.find(\".icon--circle-check\").addClass(\"invisible\")\n              liTag.data(\"method\", \"POST\")\n            } else {\n              liTag.addClass(\"selected\")\n              liTag.find(\".icon--circle-check\").removeClass(\"invisible\")\n              liTag.data(\"method\", \"DELETE\")\n            }\n          }\n        })\n      })\n    });\n  });\n})\n","$(() => {\n  const $inputs = $(\"input[data-autojump]\");\n  const DELETE_KEY_CODE = 8;\n\n  // Initialize\n  $inputs.on(\"keydown\", (event) => {\n    // Don't do anything if there is selected text\n    if (event.target.selectionStart !== event.target.selectionEnd) {\n      return;\n    }\n\n    if (event.originalEvent.key.length === 1 && event.target.dataset.jumpNext) {\n      if (\n        event.target.value.length ===\n        parseInt(event.target.dataset.maxLength, 10)\n      ) {\n        event.preventDefault();\n        setTimeout(() => {\n          const next = $(event.target.dataset.jumpNext);\n          next.val(event.originalEvent.key);\n          next.trigger(\"focus\");\n        }, 1);\n      }\n    } else if (\n      event.originalEvent.keyCode === DELETE_KEY_CODE &&\n      event.target.dataset.jumpPrev\n    ) {\n      if (event.target.value.length === 0) {\n        event.preventDefault();\n        setTimeout(() => {\n          const prev = $(event.target.dataset.jumpPrev);\n          prev.val(prev.val().slice(0, -1));\n          prev.trigger(\"focus\");\n        }, 1);\n      }\n    }\n  });\n});\n","$(() => {\n  const $notificationsBellIcon = $(\".title-bar .topbar__notifications\");\n  const $wrapper = $(\".wrapper\");\n  const $section = $wrapper.find(\"#notifications\");\n  const $noNotificationsText = $(\".empty-notifications\");\n  const $pagination = $wrapper.find(\"ul.pagination\");\n  const FADEOUT_TIME = 500;\n\n  const anyNotifications = () => $wrapper.find(\".card--widget\").length > 0;\n  const emptyNotifications = () => {\n    if (!anyNotifications()) {\n      $section.remove();\n      $noNotificationsText.removeClass(\"hide\");\n    }\n  };\n\n  $section.on(\"click\", \".mark-as-read-button\", (event) => {\n    const $item = $(event.target).parents(\".card--widget\");\n    $item.fadeOut(FADEOUT_TIME, () => {\n      $item.remove();\n      emptyNotifications();\n    });\n  });\n\n  $wrapper.on(\"click\", \".mark-all-as-read-button\", () => {\n    $section.fadeOut(FADEOUT_TIME, () => {\n      $pagination.remove();\n      $notificationsBellIcon.removeClass(\"is-active\");\n      $wrapper.find(\".card--widget\").remove();\n      emptyNotifications();\n    });\n  });\n\n  emptyNotifications();\n});\n","$(() => {\n  const $checkbox = $(\".represent-user-group\").find(\"input#user_group\");\n  const $userGroupFields = $(\".user-group-fields\");\n\n  $checkbox.click(() => {\n    const $select = $userGroupFields.find(\"select\");\n\n    if (!$select.val()) {\n      $userGroupFields.toggle();\n    }\n\n    if ($userGroupFields.is(\":visible\")) {\n      $checkbox.prop(\"checked\", true);\n    } else {\n      $checkbox.prop(\"checked\", false);\n    }\n  });\n});\n","$(() => {\n  const $responsiveTabBlock = $(\".responsive-tab-block\");\n\n  $responsiveTabBlock.click((event) => {\n    if (event.target.closest(\".is-active\") !== null) {\n      event.preventDefault();\n      if (window.innerWidth <= 639) {\n        $responsiveTabBlock.toggleClass(\"expanded\");\n      }\n    }\n  });\n});\n","/* eslint-disable no-console, no-process-env, no-undef */\n\n$(() => {\n  if (!console) {\n    return;\n  }\n\n  if (process.env.NODE_ENV === \"development\") {\n    return;\n  }\n\n  const allMessages = window.Decidim.config.get(\"messages\");\n  if (!allMessages) {\n    return;\n  }\n  const messages = allMessages.selfxssWarning;\n\n  console.log(`%c${messages.title}`, \"color:#f00;font-weight:bold;font-size:50px;\");\n  console.log(`%c${messages.description}`, \"font-size:24px;\");\n});\n","$(() => {\n  let addUsersConversationDialog = $(\"#user-conversations-add-modal\"),\n      button = $(\"#start-conversation-dialog-button\");\n\n  /* eslint no-unused-vars: 0 */\n  if (addUsersConversationDialog.length) {\n    let refreshUrl = addUsersConversationDialog.data(\"refresh-url\");\n\n    button.click(function () {\n      addUsersConversationDialog.foundation(\"open\");\n    });\n  }\n});\n","/* eslint-disable no-invalid-this */\n\n$(() => {\n\n  // Foundation requires plugins to be initializated\n  setTimeout(function() {\n\n    const $tooltips = $(\".tooltip\")\n\n    $tooltips.\n      on(\"mouseover\", function() {\n        $(`[data-keep-on-hover='true'][data-toggle='${this.id}']`).foundation(\"show\");\n      }).\n      on(\"mouseout\", function() {\n        $(`[data-keep-on-hover='true'][data-toggle='${this.id}']`).foundation(\"hide\");\n      })\n  }, 0);\n});\n","$(() => {\n  const $userRegistrationForm = $(\"#register-form\");\n  const $userGroupFields      = $userRegistrationForm.find(\".user-group-fields\");\n  const inputSelector         = 'input[name=\"user[sign_up_as]\"]';\n  const newsletterSelector    = 'input[type=\"checkbox\"][name=\"user[newsletter]\"]';\n  const $newsletterModal      = $(\"#sign-up-newsletter-modal\");\n\n\n  const setGroupFieldsVisibility = (value) => {\n    if (value === \"user\") {\n      $userGroupFields.hide();\n    } else {\n      $userGroupFields.show();\n    }\n  }\n\n  const checkNewsletter = (check) => {\n    $userRegistrationForm.find(newsletterSelector).prop(\"checked\", check);\n    $newsletterModal.data(\"continue\", true);\n    $newsletterModal.foundation(\"close\");\n    $userRegistrationForm.submit();\n  }\n\n  setGroupFieldsVisibility($userRegistrationForm.find(`${inputSelector}:checked`).val());\n\n  $userRegistrationForm.on(\"change\", inputSelector, (event) => {\n    const value = event.target.value;\n\n    setGroupFieldsVisibility(value);\n  });\n\n  $userRegistrationForm.on(\"submit\", (event) => {\n    const newsletterChecked = $userRegistrationForm.find(newsletterSelector);\n    if (!$newsletterModal.data(\"continue\")) {\n      if (!newsletterChecked.prop(\"checked\")) {\n        event.preventDefault();\n        $newsletterModal.foundation(\"open\");\n      }\n    }\n  });\n\n  $newsletterModal.find(\".check-newsletter\").on(\"click\", (event) => {\n    checkNewsletter($(event.target).data(\"check\"));\n  });\n});\n","/* eslint-disable */\n\n/*! modernizr 3.3.1 (Custom Build) | MIT *\n * https://modernizr.com/download/?-setclasses !*/\n!function(n,e,s){function o(n,e){return typeof n===e}function a(){var n,e,s,a,i,l,r;for(var c in f)if(f.hasOwnProperty(c)){if(n=[],e=f[c],e.name&&(n.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(s=0;s<e.options.aliases.length;s++)n.push(e.options.aliases[s].toLowerCase());for(a=o(e.fn,\"function\")?e.fn():e.fn,i=0;i<n.length;i++)l=n[i],r=l.split(\".\"),1===r.length?Modernizr[r[0]]=a:(!Modernizr[r[0]]||Modernizr[r[0]]instanceof Boolean||(Modernizr[r[0]]=new Boolean(Modernizr[r[0]])),Modernizr[r[0]][r[1]]=a),t.push((a?\"\":\"no-\")+r.join(\"-\"))}}function i(n){var e=r.className,s=Modernizr._config.classPrefix||\"\";if(c&&(e=e.baseVal),Modernizr._config.enableJSClass){var o=new RegExp(\"(^|\\\\s)\"+s+\"no-js(\\\\s|$)\");e=e.replace(o,\"$1\"+s+\"js$2\")}Modernizr._config.enableClasses&&(e+=\" \"+s+n.join(\" \"+s),c?r.className.baseVal=e:r.className=e)}var t=[],f=[],l={_version:\"3.3.1\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(n,e){var s=this;setTimeout(function(){e(s[n])},0)},addTest:function(n,e,s){f.push({name:n,fn:e,options:s})},addAsyncTest:function(n){f.push({name:null,fn:n})}},Modernizr=function(){};Modernizr.prototype=l,Modernizr=new Modernizr;var r=e.documentElement,c=\"svg\"===r.nodeName.toLowerCase();a(),i(t),delete l.addTest,delete l.addAsyncTest;for(var u=0;u<Modernizr._q.length;u++)Modernizr._q[u]();n.Modernizr=Modernizr}(window,document);\n","/* eslint-disable complexity, default-case, no-param-reassign, consistent-return */\n\n/*\n *\n * Social Share Button\n *\n * Copyright (c) <2012> <Jason Lee> - The MIT license\n * Originally copied fom https://github.com/huacnlee/social-share-button\n * Transformed from Coffescript to Javascipt with decaffeintate\n *\n * We've copied itlocally so it works with webpacker\n *\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nwindow.SocialShareButton = {\n  openUrl(url, width, height) {\n    if (width === null) {\n      width = 640;\n    }\n    if (height === null) {\n      height = 480;\n    }\n    const left = (screen.width / 2) - (width / 2);\n    const top = (screen.height * 0.3) - (height / 2);\n    const opt = `width=${width},height=${height},left=${left},top=${top},menubar=no,status=no,location=no`;\n    window.open(url, \"popup\", opt);\n    return false;\n  },\n\n  share(el) {\n    if (el.getAttribute === null) {\n      el = document.querySelector(el);\n    }\n\n    const site = el.getAttribute(\"data-site\");\n    const appkey = el.getAttribute(\"data-appkey\") || \"\";\n    const $parent = el.parentNode;\n    let title = encodeURIComponent(el.getAttribute(`data-${site}-title`) || $parent.getAttribute(\"data-title\") || \"\");\n    const img = encodeURIComponent($parent.getAttribute(\"data-img\") || \"\");\n    let url = encodeURIComponent($parent.getAttribute(\"data-url\") || \"\");\n    const via = encodeURIComponent($parent.getAttribute(\"data-via\") || \"\");\n    const desc = encodeURIComponent($parent.getAttribute(\"data-desc\") || \" \");\n\n    // tracking click events if google analytics enabled\n    const ga = window[window.GoogleAnalyticsObject || \"ga\"];\n    if (typeof ga === \"function\") {\n      ga(\"send\", \"event\", \"Social Share Button\", \"click\", site);\n    }\n\n    if (url.length === 0) {\n      url = encodeURIComponent(location.href);\n    }\n    switch (site) {\n    case \"email\":\n      location.href = `mailto:?subject=${title}&body=${url}`;\n      break;\n    case \"weibo\":\n      this.openUrl(`http://service.weibo.com/share/share.php?url=${url}&type=3&pic=${img}&title=${title}&appkey=${appkey}`, 620, 370);\n      break;\n    case \"twitter\": {\n      let hashtags = encodeURIComponent(el.getAttribute(`data-${site}-hashtags`) || $parent.getAttribute(\"data-hashtags\") || \"\");\n      let viaStr = \"\";\n      if (via.length > 0) {\n        viaStr = `&via=${via}`;\n      }\n      this.openUrl(`https://twitter.com/intent/tweet?url=${url}&text=${title}&hashtags=${hashtags}${viaStr}`, 650, 300);\n      break;\n    }\n    case \"douban\":\n      this.openUrl(`http://shuo.douban.com/!service/share?href=${url}&name=${title}&image=${img}&sel=${desc}`, 770, 470);\n      break;\n    case \"facebook\":\n      this.openUrl(`http://www.facebook.com/sharer/sharer.php?u=${url}`, 555, 400);\n      break;\n    case \"qq\":\n      this.openUrl(`http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${url}&title=${title}&pics=${img}&summary=${desc}&site=${appkey}`);\n      break;\n    case \"google_bookmark\":\n      this.openUrl(`https://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=${url}&title=${title}`);\n      break;\n    case \"delicious\":\n      this.openUrl(`https://del.icio.us/save?url=${url}&title=${title}&jump=yes&pic=${img}`);\n      break;\n    case \"pinterest\":\n      this.openUrl(`http://www.pinterest.com/pin/create/button/?url=${url}&media=${img}&description=${title}`);\n      break;\n    case \"linkedin\":\n      this.openUrl(`https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=${title}&summary=${desc}`);\n      break;\n    case \"xing\":\n      this.openUrl(`https://www.xing.com/spi/shares/new?url=${url}`);\n      break;\n    case \"vkontakte\":\n      this.openUrl(`http://vk.com/share.php?url=${url}&title=${title}&image=${img}`);\n      break;\n    case \"odnoklassniki\":\n      this.openUrl(`https://connect.ok.ru/offer?url=${url}&title=${title}&description=${desc}&imageUrl=${img}`);\n      break;\n    case \"wechat\":\n      if (!window.SocialShareWeChatButton) {\n        throw new Error(\"You should require social-share-button/wechat to your application.js\");\n      }\n      window.SocialShareWeChatButton.qrcode({\n        url: decodeURIComponent(url),\n        header: el.getAttribute(\"title\"),\n        footer: el.getAttribute(\"data-wechat-footer\")\n      });\n      break;\n\n    case \"tumblr\": {\n      let getTumblrExtra = (param) => {\n        const cutomData = el.getAttribute(`data-${param}`);\n        if (cutomData) {\n          return encodeURIComponent(cutomData);\n        }\n      };\n\n      let tumblrParams = () => {\n        const path = getTumblrExtra(\"type\") || \"link\";\n\n        const params = (() => {\n          switch (path) {\n          case \"text\": {\n            title = getTumblrExtra(\"title\") || title;\n            return `title=${title}`;\n          }\n          case \"photo\": {\n            title = getTumblrExtra(\"caption\") || title;\n            let source = getTumblrExtra(\"source\") || img;\n            return `caption=${title}&source=${source}`;\n          }\n          case \"quote\": {\n            let quote = getTumblrExtra(\"quote\") || title;\n            let source = getTumblrExtra(\"source\") || \"\";\n            return `quote=${quote}&source=${source}`;\n          }\n          // actually, it's a link clause\n          default: {\n            title = getTumblrExtra(\"title\") || title;\n            url = getTumblrExtra(\"url\") || url;\n            return `name=${title}&url=${url}`;\n          }} })();\n\n        return `/${path}?${params}`;\n      };\n\n      this.openUrl(`http://www.tumblr.com/share${tumblrParams()}`);\n      break;\n    }\n    case \"reddit\":\n      this.openUrl(`http://www.reddit.com/submit?url=${url}&newwindow=1`, 555, 400);\n      break;\n    case \"hacker_news\":\n      this.openUrl(`http://news.ycombinator.com/submitlink?u=${url}&t=${title}`, 770, 500);\n      break;\n    case \"telegram\":\n      this.openUrl(`https://telegram.me/share/url?text=${title}&url=${url}`);\n      break;\n    case \"whatsapp_app\": {\n      let whatsappAppUrl = `whatsapp://send?text=${title}%0A${url}`;\n      window.open(whatsappAppUrl, \"_top\");\n      break;\n    }\n    case \"whatsapp_web\":\n      this.openUrl(`https://web.whatsapp.com/send?text=${title}%0A${url}`);\n      break;\n    }\n    return false;\n  }\n};\n","import AutoComplete from \"src/decidim/autocomplete\";\n\nconst updateSubmitButton = ($fieldContainer, $selectedItems) => {\n  const $form = $fieldContainer.closest(\"form\");\n  if ($form.length < 1) {\n    return;\n  }\n\n  const $submitButton = $form.find(\"button[type='submit']\");\n  if ($selectedItems.children().length === 0) {\n    $submitButton.prop(\"disabled\", true);\n  } else {\n    $submitButton.prop(\"disabled\", false);\n  }\n}\n\n$(() => {\n  const $fieldContainer = $(\".multiple-mentions\");\n  if ($fieldContainer.length < 1) {\n    return;\n  }\n\n  const allMessages = window.Decidim.config.get(\"messages\");\n  const messages = allMessages.mentionsModal || {};\n\n  const $searchInput = $(\"input\", $fieldContainer);\n  const $selectedItems = $(`ul.${$searchInput.data().selected}`);\n  const options = $fieldContainer.data();\n  let selected = [];\n  const iconsPath = window.Decidim.config.get(\"icons_path\");\n  const removeLabel = messages.removeRecipient || \"Remove recipient %name%\";\n\n  let emptyFocusElement = $fieldContainer[0].querySelector(\".empty-list\");\n  if (!emptyFocusElement) {\n    emptyFocusElement = document.createElement(\"div\");\n    emptyFocusElement.tabIndex = \"-1\";\n    emptyFocusElement.className = \"empty-list\";\n    $selectedItems.before(emptyFocusElement);\n  }\n\n  updateSubmitButton($fieldContainer, $selectedItems);\n  const autoComplete = new AutoComplete($searchInput[0], {\n    dataMatchKeys: [\"name\", \"nickname\"],\n    dataSource: (query, callback) => {\n      $.post(\"/api\", {\n        \"query\": `\n          {\n            users(filter:{wildcard:\"${query}\",excludeIds:[]})\n              {\n                id,nickname,name,avatarUrl,__typename,...on UserGroup{membersCount},...on User{\n                  directMessagesEnabled\n                }\n              }\n          }`\n      }).then((response) => {\n        callback(response.data.users);\n      });\n    },\n    dataFilter: (list) => {\n      return list.filter(\n        (item) => !selected.includes(item.value.id)\n      );\n    },\n    modifyResult: (element, value) => {\n      $(element).html(`\n        <span class=\"author__avatar\"><img src=\"${value.avatarUrl}\" alt=\"${value.name}\"></span>\n        <strong>${value.nickname}</strong>\n        <small>${value.name}</small>\n      `);\n      if (value.directMessagesEnabled === \"false\") {\n        $(element).addClass(\"disabled\");\n        $(element).append(`<span>${$searchInput.data().directMessagesDisabled}</span>`);\n      }\n      if (value.membersCount) {\n        $(element).append(`<span class=\"is-group\">${value.membersCount}x <svg class=\"icon--members icon\"><use href=\"${iconsPath}#icon-members\"/></svg></span>`);\n      }\n    }\n  });\n\n  $searchInput.on(\"selection\", (event) => {\n    const feedback = event.detail;\n    const selection = feedback.selection;\n    const id = selection.value.id;\n    if (selected.length >= 9 || selection.value.directMessagesEnabled === \"false\") {\n      return;\n    }\n\n    const label = removeLabel.replace(\"%name%\", selection.value.name);\n    $selectedItems.append(`\n      <li tabindex=\"-1\">\n        <input type=\"hidden\" name=\"${options.name}\" value=\"${id}\">\n        <img src=\"${selection.value.avatarUrl}\" class=\"author__avatar\" alt=\"${selection.value.name}\">\n        <b>${selection.value.name}</b>\n        <button type=\"button\" class=\"float-right\" data-remove=\"${id}\" tabindex=\"0\" aria-controls=\"0\" aria-label=\"${label}\">&times;</button>\n      </li>\n    `);\n\n    autoComplete.setInput(\"\");\n    selected.push(id);\n    updateSubmitButton($fieldContainer, $selectedItems);\n\n    $selectedItems.find(`*[data-remove=\"${id}\"]`).on(\"keypress click\", (evt) => {\n      const target = evt.target.parentNode;\n      if (target.tagName === \"LI\") {\n        const focusElement = target.nextElementSibling || target.previousElementSibling || emptyFocusElement;\n\n        selected = selected.filter((identifier) => identifier !== id);\n        target.remove();\n\n        updateSubmitButton($fieldContainer, $selectedItems);\n        focusElement.focus();\n      }\n    })\n  })\n})\n","/* eslint max-lines: [\"error\", {\"max\": 350, \"skipBlankLines\": true}] */\n\nconst COUNT_KEY = \"%count%\";\n// How often SR announces the message in relation to maximum characters. E.g.\n// if max characters is 1000, screen reader announces the remaining characters\n// every 100 (= 0.1 * 1000) characters. This will be \"floored\" to the closest\n// 100 if the maximum characters > 100. E.g. if max characters is 5500, the\n// threshold is 500 (= Math.floor(550 / 100) * 100). With 100 or less\n// characters, this ratio is omitted and the announce threshold is always set to\n// 10.\nconst SR_ANNOUNCE_THRESHOLD_RATIO = 0.1;\n// The number of characters left after which every keystroke will be announced.\nconst SR_ANNOUNCE_EVERY_THRESHOLD = 10;\nconst DEFAULT_MESSAGES = {\n  charactersAtLeast: {\n    one: `at least ${COUNT_KEY} character`,\n    other: `at least ${COUNT_KEY} characters`\n  },\n  charactersLeft: {\n    one: `${COUNT_KEY} character left`,\n    other: `${COUNT_KEY} characters left`\n  }\n};\nlet MESSAGES = DEFAULT_MESSAGES;\n\nexport default class InputCharacterCounter {\n  static configureMessages(messages) {\n    MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n  }\n\n  constructor(input) {\n    this.$input = input;\n    this.$target = $(this.$input.data(\"remaining-characters\"));\n    this.minCharacters = parseInt(this.$input.attr(\"minlength\"), 10);\n    this.maxCharacters = parseInt(this.$input.attr(\"maxlength\"), 10);\n    this.describeByCounter = typeof this.$input.attr(\"aria-describedby\") === \"undefined\";\n\n    // Define the closest length for the input \"gaps\" defined by the threshold.\n    if (this.maxCharacters > 10) {\n      if (this.maxCharacters > 100) {\n        this.announceThreshold = Math.floor(this.maxCharacters * SR_ANNOUNCE_THRESHOLD_RATIO);\n      } else {\n        this.announceThreshold = 10;\n      }\n\n      // The number of characters left after which every keystroke will be announced.\n      this.announceEveryThreshold = SR_ANNOUNCE_EVERY_THRESHOLD;\n    } else {\n      this.announceThreshold = 1;\n      this.announceEveryThreshold = 1;\n    }\n\n    let targetId = this.$target.attr(\"id\");\n    if (typeof targetId === \"undefined\") {\n      if (this.$input.attr(\"id\") && this.$input.attr(\"id\").length > 0) {\n        targetId = `${this.$input.attr(\"id\")}_characters`;\n      } else {\n        targetId = `characters_${Math.random().toString(36).substr(2, 9)}`;\n      }\n    }\n\n    if (this.$target.length > 0) {\n      this.$target.attr(\"id\", targetId)\n    } else {\n      this.$target = $(`<span id=\"${targetId}\" class=\"form-input-extra-before\" />`)\n\n      // If input is a hidden for WYSIWYG editor add it at the end\n      if (this.$input.parent().is(\".editor\")) {\n        this.$input.parent().after(this.$target);\n      }\n      // Prefix and suffix columns are wrapped in columns, so put the\n      // character counter before that.\n      else if (\n        this.$input.parent().is(\".columns\") &&\n        this.$input.parent().parent().is(\".row\")\n      ) {\n        this.$input.parent().parent().after(this.$target);\n      } else {\n        this.$input.after(this.$target);\n      }\n    }\n\n    if (this.$target.length > 0 && (this.maxCharacters > 0 || this.minCharacters > 0)) {\n      // Create the screen reader target element. We don't want to constantly\n      // announce every change to screen reader, only occasionally.\n      this.$srTarget = $(\n        `<span role=\"status\" id=\"${targetId}_sr\" class=\"show-for-sr remaining-character-count-sr\" />`\n      );\n      this.$target.before(this.$srTarget);\n      this.$target.attr(\"aria-hidden\", \"true\");\n\n      this.$userInput = this.$input;\n\n      // In WYSIWYG editors (Quill) we need to find the active editor from the\n      // DOM node. Quill has the experimental \"find\" method that should work\n      // fine in this case\n      if (Quill && this.$input.parent().is(\".editor\")) {\n        // Wait until the next javascript loop so Quill editors are created\n        setTimeout(() => {\n          this.editor = Quill.find(this.$input.siblings(\".editor-container\")[0]);\n          this.$userInput = $(this.editor.root);\n          this.initialize();\n        });\n      } else {\n        this.initialize();\n      }\n    }\n  }\n\n  initialize() {\n    this.updateInputLength();\n    this.previousInputLength = this.inputLength;\n\n    this.bindEvents();\n    this.setDescribedBy(true);\n  }\n\n  setDescribedBy(active) {\n    if (!this.describeByCounter) {\n      return;\n    }\n\n    if (active) {\n      this.$userInput.attr(\"aria-describedby\", this.$srTarget.attr(\"id\"));\n    } else {\n      this.$userInput.removeAttr(\"aria-describedby\");\n    }\n  }\n\n  bindEvents() {\n    if (this.editor) {\n      this.editor.on(\"text-change\", () => {\n        this.handleInput();\n      });\n    } else {\n      this.$userInput.on(\"input\", () => {\n        this.handleInput();\n      });\n    }\n\n    this.$userInput.on(\"keyup\", () => {\n      this.updateStatus();\n    });\n    this.$userInput.on(\"focus\", () => {\n      this.updateScreenReaderStatus();\n    });\n    this.$userInput.on(\"blur\", () => {\n      this.updateScreenReaderStatus();\n      this.setDescribedBy(true);\n    });\n    if (this.$userInput.get(0) !== null) {\n      this.$userInput.get(0).addEventListener(\"emoji.added\", () => {\n        this.updateStatus();\n      });\n    }\n    this.updateStatus();\n    this.updateScreenReaderStatus();\n  }\n\n  getInputLength() {\n    return this.inputLength;\n  }\n\n  updateInputLength() {\n    this.previousInputLength = this.inputLength;\n    if (this.editor) {\n      this.inputLength = this.editor.getLength();\n    } else {\n      this.inputLength = this.$input.val().length;\n    }\n  }\n\n  handleInput() {\n    this.updateInputLength();\n    this.checkScreenReaderUpdate();\n    // If the input is \"described by\" the character counter, some screen\n    // readers (NVDA) announce the status twice when it is updated. By\n    // removing the aria-describedby attribute while the user is typing makes\n    // the screen reader announce the status only once.\n    this.setDescribedBy(false);\n  }\n\n  /**\n   * This compares the current inputLength to the previous value and decides\n   * whether the user is currently adding or deleting characters from the view.\n   *\n   * @returns {String} The input direction either \"ins\" for insert or \"del\" for\n   *   delete.\n   */\n  getInputDirection() {\n    if (this.inputLength < this.previousInputLength) {\n      return \"del\";\n    }\n\n    return \"ins\";\n  }\n\n  getScreenReaderLength() {\n    const currentLength = this.getInputLength();\n    if (this.maxCharacters < 10) {\n      return currentLength;\n    } else if (this.maxCharacters - currentLength <= this.announceEveryThreshold) {\n      return currentLength;\n    }\n\n    const srLength = currentLength - currentLength % this.announceThreshold;\n\n    // Prevent the screen reader telling too many characters left if the user\n    // deletes a characters. This can cause confusing experience e.g. when the\n    // user is closing the maximum amount of characters, so if the previous\n    // announcement was \"10 characters left\" and the user removes one character,\n    // the screen reader would announce \"100 characters left\" next time (when\n    // they actually have only 11 characters left). Similar when they are\n    // deleting a character at 900 characters, the screen reader would announce\n    // \"1000 characters left\" even when they only have 901 characters left.\n    if (this.getInputDirection() === \"del\") {\n      // The first branch makes sure that if the SR length matches the actual\n      // length, it will be always announced.\n      if (srLength === currentLength) {\n        return srLength;\n      // The second branch checks that if we are at the final threshold, we\n      // should not announce \"0 characters left\" when the user deletes more than\n      // the \"announce after every stroke\" limit (this.announceEveryThreshold).\n      } else if (this.maxCharacters - srLength === this.announceThreshold) {\n        return this.announcedAt || currentLength;\n      // The third branch checks that when deleting characters, we should\n      // announce the next threshold to get accurate annoucement. E.g. when we\n      // have 750 characters left and the user deletes 100 characters at once,\n      // we should announce \"700 characters left\" after that deletion.\n      } else if (srLength < currentLength) {\n        return srLength + this.announceThreshold;\n      }\n    // This fixes an issue in the following situation:\n    // 1. 750 characters left\n    // 2. Delete 100 characters in a row\n    // 3. SR: \"800 characters left\" (actual 850)\n    // 4. Type one additional character\n    // 5. Without this, SR would announce \"900 characters left\" = confusing\n    } else if (srLength < this.announcedAt) {\n      return this.announcedAt;\n    }\n\n    return srLength;\n  }\n\n  getMessages(currentLength = null) {\n    const showMessages = [];\n    let inputLength = currentLength;\n    if (inputLength === null) {\n      inputLength = this.getInputLength()\n    }\n\n    if (this.minCharacters > 0) {\n      let message = MESSAGES.charactersAtLeast.other;\n      if (this.minCharacters === 1) {\n        message = MESSAGES.charactersAtLeast.one;\n      }\n      showMessages.push(message.replace(COUNT_KEY, this.minCharacters));\n    }\n\n    if (this.maxCharacters > 0) {\n      const remaining = this.maxCharacters - inputLength;\n      let message = MESSAGES.charactersLeft.other;\n      if (remaining === 1) {\n        message = MESSAGES.charactersLeft.one;\n      }\n      this.$input[0].dispatchEvent(\n        new CustomEvent(\"characterCounter\", {detail: {remaining: remaining}})\n      );\n      showMessages.push(message.replace(COUNT_KEY, remaining));\n    }\n\n    return showMessages;\n  }\n\n  updateStatus() {\n    this.$target.text(this.getMessages().join(\", \"));\n  }\n\n  checkScreenReaderUpdate() {\n    if (this.maxCharacters < 1) {\n      return;\n    }\n\n    const currentLength = this.getScreenReaderLength();\n    if (currentLength === this.announcedAt) {\n      return;\n    }\n\n    this.announcedAt = currentLength;\n    this.updateScreenReaderStatus(currentLength);\n  }\n\n  updateScreenReaderStatus(currentLength = null) {\n    this.$srTarget.text(this.getMessages(currentLength).join(\", \"));\n  }\n}\n\nconst createCharacterCounter = ($input) => {\n  if (typeof $input !== \"undefined\" && $input.length) {\n    $input.data(\"remaining-characters-counter\", new InputCharacterCounter($input));\n  }\n}\n\n$(() => {\n  $(\"input[type='text'], textarea, .editor>input[type='hidden']\").each((_i, elem) => {\n    const $input = $(elem);\n\n    if (!$input.is(\"[minlength]\") && !$input.is(\"[maxlength]\")) {\n      return;\n    }\n\n    createCharacterCounter($input);\n  });\n});\n\nexport {InputCharacterCounter, createCharacterCounter};\n","/* eslint-disable require-jsdoc */\n\n// This will apply some fixes for the Foundation dropdown menu element\n// according to W3C instructions at:\n// https://www.w3.org/TR/wai-aria-practices/examples/menu-button/menu-button-links.html\n//\n// NOTE:\n// This needs to run AFTER Foundation has been initialized because those\n// initializers will affect the drop down menu elements.\nexport default function fixDropdownMenus() {\n  $(\"[data-dropdown-menu]\").each((_i, element) => {\n    // This will break navigation on macOS VoiceOver app since it will let the\n    // user to focus on the li element instead of the <a> element where we\n    // actually need the focus to be in.\n    $(\"li.is-dropdown-submenu-parent\", element).removeAttr(\"aria-haspopup\").removeAttr(\"aria-label\");\n    $(\"li.is-dropdown-submenu-parent > a:first\", element).removeAttr(\"aria-label\");\n    // Foundation marks the wrong role for the submenu elements\n    $(\"ul.is-dropdown-submenu\", element).attr(\"role\", \"menu\");\n  })\n}\n\n// Ensure the first element is always focused when a dropdown is opened as\n// this would not always happen when using a screen reader. If this is not\n// done, the screen reader will stay quiet when the menu opens which can lead\n// to the blind user not understanding the menu has opened.\n$(() => {\n  $(\"[data-dropdown-menu]\").on(\"show.zf.dropdownMenu\", (_i, element) => {\n    $(\"li:first > a\", element).focus();\n  });\n})\n","const DEFAULT_ATTRIBUTES = {\n  role: \"img\",\n  \"aria-hidden\": \"true\"\n};\n\n/**\n * Generates a Decidim icon element and returns it as a string.\n * @param {String} iconKey - the key of the icon to be generated\n * @param {Object} attributes - extra attributes to define for the icon SVG\n * @param {int} wait - number of milliseconds to wait before executing the function.\n * @private\n * @returns {Void} - Returns nothing.\n */\nexport default function icon(iconKey, attributes = {}) {\n  const iconAttributes = $.extend(DEFAULT_ATTRIBUTES, attributes);\n  const title = iconAttributes.title || iconAttributes.ariaLabel;\n  Reflect.deleteProperty(iconAttributes, \"title\");\n\n  const htmlAttributes = {\n    \"class\": `icon icon--${iconKey}`\n  };\n  Object.keys(iconAttributes).forEach((key) => {\n    // Convert the key to dash-format.\n    const newKey = key.replace(/([A-Z])/g, (ucw) => `-${ucw[0].toLowerCase()}`);\n    if (typeof htmlAttributes[key] === \"undefined\") {\n      htmlAttributes[newKey] = iconAttributes[key];\n    } else {\n      htmlAttributes[newKey] = `${htmlAttributes[newKey]} ${iconAttributes[key]}`;\n    }\n  });\n\n  const iconsPath =  window.Decidim.config.get(\"icons_path\");\n  const elHtml = `<svg><use href=\"${iconsPath}#icon-${iconKey}\"></use></svg>`;\n  const $el = $(elHtml);\n  if (title) {\n    $el.prepend(`<title>${title}</title>`);\n  } else {\n    // This keeps accessibility audit tools happy\n    $el.prepend(`<title>${iconKey}</title>`);\n    // Force hidden if title is not defined\n    htmlAttributes[\"aria-hidden\"] = \"true\";\n  }\n  $el.attr(htmlAttributes);\n\n  return $(\"<div />\").append($el).html();\n}\n","import icon from \"src/decidim/icon\"\n\nconst EXCLUDE_CLASSES = [\n  \"card--list__data__icon\",\n  \"footer-social__icon\",\n  \"logo-cityhall\"\n];\nconst EXCLUDE_ANCESTOR_CLASSES = [\n  \"editor-container\"\n]\nconst EXCLUDE_REL = [\"license\", \"decidim\"];\n\nconst DEFAULT_MESSAGES = {\n  externalLink: \"External link\"\n};\nlet MESSAGES = DEFAULT_MESSAGES;\n\nexport default class ExternalLink {\n  static configureMessages(messages) {\n    MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n  }\n\n  constructor(link) {\n    this.$link = link;\n\n    this.setup();\n  }\n\n  setup() {\n    if (EXCLUDE_CLASSES.some((cls) => this.$link.hasClass(cls))) {\n      return;\n    }\n    if (EXCLUDE_ANCESTOR_CLASSES.some((cls) => this.$link.parents().hasClass(cls))) {\n      return;\n    }\n    if (\n      EXCLUDE_REL.some((rel) => {\n        const linkRels = `${this.$link.attr(\"rel\")}`.split(\" \");\n        return linkRels.indexOf(rel) > -1;\n      })\n    ) {\n      return;\n    }\n\n    let $target = this.$link;\n    if (this.$link[0].hasAttribute(\"data-external-link-target\")) {\n      $target = $(this.$link.data(\"external-link-target\"), this.$link);\n      if ($target.length < 1) {\n        $target = this.$link;\n      }\n    }\n\n    $target.addClass(\"external-link-container\");\n    let spacer = \"&nbsp;\";\n    if (this.$link[0].hasAttribute(\"data-external-link-spacer\")) {\n      spacer = this.$link.data(\"external-link-spacer\");\n    } else if ($target.text().trim().length < 1) {\n      // Fixes image links extra space\n      spacer = \"\";\n    }\n\n    $target.append(`${spacer}${this.generateElement()}`);\n  }\n\n  generateElement() {\n    let content = `${this.generateIcon()}${this.generateScreenReaderLabel()}`;\n\n    return `<span class=\"external-link-indicator\">${content}</span>`;\n  }\n\n  generateIcon() {\n    return icon(\"external-link\");\n  }\n\n  generateScreenReaderLabel() {\n    return `<span class=\"show-for-sr\">(${MESSAGES.externalLink})</span>`;\n  }\n}\n","/* eslint-disable require-jsdoc */\n\nexport default function updateExternalDomainLinks($target) {\n  const whitelist = window.Decidim.config.get(\"external_domain_whitelist\")\n\n  if (window.location.pathname === \"/link\") {\n    return;\n  }\n\n  $(\"a\", $target).filter((_i, link) => {\n    const $link = $(link);\n    if (!$link[0].hasAttribute(\"href\") || $link.parents(\".editor-container\").length > 0) {\n      return false;\n    }\n\n    const parts = $link.attr(\"href\").match(/^(([a-z]+):)?\\/\\/([^/:]+)(:[0-9]*)?(\\/.*)?$/) || null;\n    if (!parts) {\n      return false;\n    }\n\n    const domain = parts[3].replace(/^www\\./, \"\")\n    if (whitelist.includes(domain)) {\n      return false;\n    }\n\n    return true;\n  }).each((_n, link) => {\n    const $link = $(link);\n    const externalHref = `/link?external_url=${encodeURIComponent($link.attr(\"href\"))}`;\n    $link.attr(\"href\", externalHref)\n    $link.attr(\"data-remote\", true)\n  });\n}\n","const DEFAULT_MESSAGES = {\n  correctErrors: \"There are errors on the form, please correct them.\"\n};\nlet MESSAGES = DEFAULT_MESSAGES;\n\nexport default class FormValidator {\n  static configureMessages(messages) {\n    MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n  }\n\n  constructor(form) {\n    this.$form = form;\n\n    this.$form.on(\"form-error.decidim\", () => {\n      this.handleError();\n    });\n  }\n\n  handleError() {\n    this.announceFormError();\n\n    $(\".is-invalid-input:first\", this.$form).focus();\n  }\n\n  /**\n   * This announces immediately to the screen reader that there are errors on\n   * the form that need to be fixed. Does not work on all screen readers but\n   * works e.g. in Windows+Firefox+NVDA and macOS+Safari+VoiceOver\n   * combinations.\n   *\n   * @returns {undefined}\n   */\n  announceFormError() {\n    let $announce = $(\".sr-announce\", this.$form);\n    if ($announce.length > 0) {\n      $announce.remove();\n    }\n    $announce = $(\"<div />\");\n    $announce.attr(\"class\", \"sr-announce show-for-sr\");\n    $announce.attr(\"aria-live\", \"assertive\");\n    this.$form.prepend($announce);\n\n    setTimeout(() => {\n      $announce.text(MESSAGES.correctErrors);\n    }, 100);\n  }\n}\n\n$(() => {\n  $(\"form\").each((_i, el) => {\n    $(el).data(\"form-validator\", new FormValidator($(el)));\n  });\n  $(document).on(\"forminvalid.zf.abide\", function(_ev, form) {\n    form.trigger(\"form-error.decidim\");\n  })\n});\n","/* eslint id-length: [\"error\", { \"exceptions\": [\"$\"] }] */\n/* eslint max-lines: [\"error\", {\"max\": 350, \"skipBlankLines\": true}] */\n\n\n/**\n * A plain Javascript component that handles the comments.\n *\n * @class\n * @augments Component\n */\n\n// This is necessary for testing purposes\nconst $ = window.$;\n\nimport Rails from \"@rails/ujs\";\n\nimport { createCharacterCounter } from \"src/decidim/input_character_counter\"\nimport ExternalLink from \"src/decidim/external_link\"\nimport updateExternalDomainLinks from \"src/decidim/external_domain_warning\"\n\nexport default class CommentsComponent {\n  constructor($element, config) {\n    this.$element = $element;\n    this.commentableGid = config.commentableGid;\n    this.commentsUrl = config.commentsUrl;\n    this.rootDepth = config.rootDepth;\n    this.order = config.order;\n    this.lastCommentId = config.lastCommentId;\n    this.pollingInterval = config.pollingInterval || 15000;\n    this.singleComment = config.singleComment;\n    this.toggleTranslations = config.toggleTranslations;\n    this.id = this.$element.attr(\"id\") || this._getUID();\n    this.mounted = false;\n  }\n\n  /**\n   * Handles the logic for mounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  mountComponent() {\n    if (this.$element.length > 0 && !this.mounted) {\n      this.mounted = true;\n      this._initializeComments(this.$element);\n      if (!this.singleComment) {\n        $(\".add-comment textarea\", this.$element).prop(\"disabled\", true);\n        this._fetchComments(() => {\n          $(\".add-comment textarea\", this.$element).prop(\"disabled\", false);\n        });\n      }\n\n      $(\".order-by__dropdown .is-submenu-item a\", this.$element).on(\"click.decidim-comments\", () => this._onInitOrder());\n    }\n  }\n\n  /**\n   * Handles the logic for unmounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  unmountComponent() {\n    if (this.mounted) {\n      this.mounted = false;\n      this._stopPolling();\n\n      $(\".add-comment .opinion-toggle .button\", this.$element).off(\"click.decidim-comments\");\n      $(\".add-comment textarea\", this.$element).off(\"input.decidim-comments\");\n      $(\".order-by__dropdown .is-submenu-item a\", this.$element).off(\"click.decidim-comments\");\n      $(\".add-comment form\", this.$element).off(\"submit.decidim-comments\");\n      $(\".add-comment textarea\", this.$element).each((_i, el) => el.removeEventListener(\"emoji.added\", this._onTextInput));\n    }\n  }\n\n  /**\n   * Adds a new thread to the comments section.\n   * @public\n   * @param {String} threadHtml - The HTML content for the thread.\n   * @param {Boolean} fromCurrentUser - A boolean indicating whether the user\n   *   herself was the author of the new thread. Defaults to false.\n   * @returns {Void} - Returns nothing\n   */\n  addThread(threadHtml, fromCurrentUser = false) {\n    const $parent = $(\".comments:first\", this.$element);\n    const $comment = $(threadHtml);\n    const $threads = $(\".comment-threads\", this.$element);\n    this._addComment($threads, $comment);\n    this._finalizeCommentCreation($parent, fromCurrentUser);\n  }\n\n  /**\n   * Adds a new reply to an existing comment.\n   * @public\n   * @param {Number} commentId - The ID of the comment for which to add the\n   *   reply to.\n   * @param {String} replyHtml - The HTML content for the reply.\n   * @param {Boolean} fromCurrentUser - A boolean indicating whether the user\n   *   herself was the author of the new reply. Defaults to false.\n   * @returns {Void} - Returns nothing\n   */\n  addReply(commentId, replyHtml, fromCurrentUser = false) {\n    const $parent = $(`#comment_${commentId}`);\n    const $comment = $(replyHtml);\n    const $replies = $(`#comment-${commentId}-replies`);\n    this._addComment($replies, $comment);\n    $replies.siblings(\".comment__additionalreply\").removeClass(\"hide\");\n    this._finalizeCommentCreation($parent, fromCurrentUser);\n  }\n\n  /**\n   * Generates a unique identifier for the form.\n   * @private\n   * @returns {String} - Returns a unique identifier\n   */\n  _getUID() {\n    return `comments-${new Date().setUTCMilliseconds()}-${Math.floor(Math.random() * 10000000)}`;\n  }\n\n  /**\n   * Initializes the comments for the given parent element.\n   * @private\n   * @param {jQuery} $parent The parent element to initialize.\n   * @returns {Void} - Returns nothing\n   */\n  _initializeComments($parent) {\n    $(\".add-comment\", $parent).each((_i, el) => {\n      const $add = $(el);\n      const $form = $(\"form\", $add);\n      const $opinionButtons = $(\".opinion-toggle .button\", $add);\n      const $text = $(\"textarea\", $form);\n\n      $opinionButtons.on(\"click.decidim-comments\", this._onToggleOpinion);\n      $text.on(\"input.decidim-comments\", this._onTextInput);\n\n      $(document).trigger(\"attach-mentions-element\", [$text.get(0)]);\n\n      $form.on(\"submit.decidim-comments\", () => {\n        const $submit = $(\"button[type='submit']\", $form);\n\n        $submit.attr(\"disabled\", \"disabled\");\n        this._stopPolling();\n      });\n\n      if ($text.length && $text.get(0) !== null) {\n        // Attach event to the DOM node, instead of the jQuery object\n        $text.get(0).addEventListener(\"emoji.added\", this._onTextInput);\n      }\n    });\n  }\n\n  /**\n   * Adds the given comment element to the given target element and\n   * initializes it.\n   * @private\n   * @param {jQuery} $target - The target element to add the comment to.\n   * @param {jQuery} $container - The comment container element to add.\n   * @returns {Void} - Returns nothing\n   */\n  _addComment($target, $container) {\n    let $comment = $(\".comment\", $container);\n    if ($comment.length < 1) {\n      // In case of a reply\n      $comment = $container;\n    }\n    this.lastCommentId = parseInt($comment.data(\"comment-id\"), 10);\n\n    $target.append($container);\n    $container.foundation();\n    this._initializeComments($container);\n    createCharacterCounter($(\".add-comment textarea\", $container));\n    $container.find('a[target=\"_blank\"]').each((_i, elem) => {\n      const $link = $(elem);\n      $link.data(\"external-link\", new ExternalLink($link));\n    });\n    updateExternalDomainLinks($container)\n  }\n\n  /**\n   * Finalizes the new comment creation after the comment adding finishes\n   * successfully.\n   * @private\n   * @param {jQuery} $parent - The parent comment element to finalize.\n   * @param {Boolean} fromCurrentUser - A boolean indicating whether the user\n   *   herself was the author of the new comment.\n   * @returns {Void} - Returns nothing\n   */\n  _finalizeCommentCreation($parent, fromCurrentUser) {\n    if (fromCurrentUser) {\n      const $add = $(\"> .add-comment\", $parent);\n      const $text = $(\"textarea\", $add);\n      const characterCounter = $text.data(\"remaining-characters-counter\");\n      $text.val(\"\");\n      if (characterCounter) {\n        characterCounter.updateStatus();\n      }\n      if (!$add.parent().is(\".comments\")) {\n        $add.addClass(\"hide\");\n      }\n    }\n\n    // Restart the polling\n    this._pollComments();\n  }\n\n  /**\n   * Sets a timeout to poll new comments.\n   * @private\n   * @returns {Void} - Returns nothing\n   */\n  _pollComments() {\n    this._stopPolling();\n\n    this.pollTimeout = setTimeout(() => {\n      this._fetchComments();\n    }, this.pollingInterval);\n  }\n\n  /**\n   * Sends an ajax request based on current\n   * params to get comments for the component\n   * @private\n   * @param {Function} successCallback A callback that is called after a\n   *   successful fetch\n   * @returns {Void} - Returns nothing\n   */\n  _fetchComments(successCallback = null) {\n    Rails.ajax({\n      url: this.commentsUrl,\n      type: \"GET\",\n      data: new URLSearchParams({\n        \"commentable_gid\": this.commentableGid,\n        \"root_depth\": this.rootDepth,\n        \"order\": this.order,\n        \"after\": this.lastCommentId,\n        ...(this.toggleTranslations && { \"toggle_translations\": this.toggleTranslations }),\n        ...(this.lastCommentId && { \"after\": this.lastCommentId })\n      }),\n      success: () => {\n        if (successCallback) {\n          successCallback();\n        }\n        this._pollComments();\n      }\n    });\n  }\n\n  /**\n   * Stops polling for new comments.\n   * @private\n   * @returns {Void} - Returns nothing\n   */\n  _stopPolling() {\n    if (this.pollTimeout) {\n      clearTimeout(this.pollTimeout);\n    }\n  }\n\n  /**\n   * Sets the loading comments element visible in the view.\n   * @private\n   * @returns {Void} - Returns nothing\n   */\n  _setLoading() {\n    const $container = $(\"> .comments-container\", this.$element);\n    $(\"> .comments\", $container).addClass(\"hide\");\n    $(\"> .loading-comments\", $container).removeClass(\"hide\");\n  }\n\n  /**\n   * Event listener for the ordering links.\n   * @private\n   * @returns {Void} - Returns nothing\n   */\n  _onInitOrder() {\n    this._stopPolling();\n    this._setLoading();\n  }\n\n  /**\n   * Event listener for the opinion toggle buttons.\n   * @private\n   * @param {Event} ev - The event object.\n   * @returns {Void} - Returns nothing\n   */\n  _onToggleOpinion(ev) {\n    let $btn = $(ev.target);\n    if (!$btn.is(\".button\")) {\n      $btn = $btn.parents(\".button\");\n    }\n\n    const $add = $btn.closest(\".add-comment\");\n    const $form = $(\"form\", $add);\n    const $opinionButtons = $(\".opinion-toggle .button\", $add);\n    const $selectedState = $(\".opinion-toggle .selected-state\", $add);\n    const $alignment = $(\".alignment-input\", $form);\n\n    $opinionButtons.removeClass(\"is-active\").attr(\"aria-pressed\", \"false\");\n    $btn.addClass(\"is-active\").attr(\"aria-pressed\", \"true\");\n\n    if ($btn.is(\".opinion-toggle--ok\")) {\n      $alignment.val(1);\n    } else if ($btn.is(\".opinion-toggle--meh\")) {\n      $alignment.val(0);\n    } else if ($btn.is(\".opinion-toggle--ko\")) {\n      $alignment.val(-1);\n    }\n\n    // Announce the selected state for the screen reader\n    $selectedState.text($btn.data(\"selected-label\"));\n  }\n\n  /**\n   * Event listener for the comment field text input.\n   * @private\n   * @param {Event} ev - The event object.\n   * @returns {Void} - Returns nothing\n   */\n  _onTextInput(ev) {\n    const $text = $(ev.target);\n    const $add = $text.closest(\".add-comment\");\n    const $form = $(\"form\", $add);\n    const $submit = $(\"button[type='submit']\", $form);\n\n    if ($text.val().length > 0) {\n      $submit.removeAttr(\"disabled\");\n    } else {\n      $submit.attr(\"disabled\", \"disabled\");\n    }\n  }\n}\n","import {EmojiButton} from \"@joeattardi/emoji-button\";\n\n// eslint-disable-next-line require-jsdoc\nexport default function addInputEmoji() {\n  const containers = document.querySelectorAll(\"[data-input-emoji]\");\n\n  if (containers.length) {\n    containers.forEach((elem) => {\n      const picker = new EmojiButton({\n        position: \"bottom-end\",\n        rootElement: elem.closest(\"form\")?.parentElement || document.body,\n        zIndex: 2000\n      });\n\n      // if the selector is inside a modal window\n      // this allows shows the emoji menu uncut\n      const reveal = elem.closest(\"[data-reveal]\")\n      if (reveal) {\n        reveal.style.overflowY = \"unset\"\n      }\n\n      const wrapper = document.createElement(\"div\");\n      wrapper.className = \"emoji__container\"\n      const btnContainer = document.createElement(\"div\");\n      btnContainer.className = \"emoji__trigger\"\n      const btn = document.createElement(\"div\");\n      btn.className = \"emoji__button\"\n      btn.innerHTML = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"smile\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 496 512\"><path fill=\"currentColor\" d=\"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z\"></path></svg>'\n\n      const parent = elem.parentNode;\n      parent.insertBefore(wrapper, elem);\n      wrapper.appendChild(elem);\n      wrapper.appendChild(btnContainer);\n      btnContainer.appendChild(btn);\n\n      // The form errors need to be in the same container with the field they\n      // belong to for Foundation Abide to show them automatically.\n      parent.querySelectorAll(\".form-error\").forEach((el) => wrapper.appendChild(el));\n\n      let handlerPicker = function () {\n        picker.togglePicker(btnContainer);\n      }\n\n      btnContainer.addEventListener(\"click\", handlerPicker);\n\n      elem.addEventListener(\"characterCounter\", (event) => {\n        if (event.detail.remaining >= 4) {\n          btnContainer.addEventListener(\"click\", handlerPicker);\n          btnContainer.removeAttribute(\"style\");\n        } else {\n          btnContainer.removeEventListener(\"click\", handlerPicker);\n          btnContainer.setAttribute(\"style\", \"color:lightgrey\");\n        }\n      });\n\n\n      picker.on(\"emoji\", ({emoji}) => {\n        elem.value += ` ${emoji} `\n\n        const event = new Event(\"emoji.added\");\n        elem.dispatchEvent(event);\n      });\n    })\n  }\n};\n","/**\n * A method to enable the dialog mode for the given dialog(s).\n *\n * This should be called when the dialog is opened. It implements two things for\n * the dialog:\n * 1. It places the focus to the title element making sure the screen reader\n *    focuses in the correct position of the document. Otherwise some screen\n *    readers continue reading outside of the document.\n * 2. Document \"tab guards\" that force the keyboard focus within the modal when\n *    the user is using keyboard or keyboard emulating devices for browsing the\n *    document.\n *\n * The \"tab guards\" are added at the top and bottom of the document to keep the\n * user's focus within the dialog if they accidentally or intentionally place\n * the focus outside of the document, e.g. in different window or in the browser\n * address bar. They guard the focus on both sides of the document returning\n * focus back to the first or last focusable element within the dialog.\n *\n * @param {jQuery} $dialogs The jQuery element(s) to apply the mode for.\n * @return {Void} Nothing\n */\nexport default ($dialogs) => {\n  $dialogs.each((_i, dialog) => {\n    const $dialog = $(dialog);\n\n    const $container = $(\"body\");\n    const $title = $(\".reveal__title:first\", $dialog);\n\n    if ($title.length > 0) {\n      // Focus on the title to make the screen reader to start reading the\n      // content within the modal.\n      $title.attr(\"tabindex\", $title.attr(\"tabindex\") || -1);\n      $title.trigger(\"focus\");\n    }\n\n    // Once the final modal closes, disable the focus guarding\n    $dialog.off(\"closed.zf.reveal.focusguard\").on(\"closed.zf.reveal.focusguard\", () => {\n      $dialog.off(\"closed.zf.reveal.focusguard\");\n\n      // After the last dialog is closed, the tab guards should be removed.\n      // This is done when the focus guard is disabled. If there is still a\n      // visible reveal item in the DOM, make that the currently \"guarded\"\n      // element. Note that there may be multiple dialogs open on top of each\n      // other at the same time.\n      const $visibleReveal = $(\".reveal:visible:last\", $container);\n      if ($visibleReveal.length > 0) {\n        window.focusGuard.trap($visibleReveal[0]);\n      } else {\n        window.focusGuard.disable();\n      }\n    });\n\n    window.focusGuard.trap(dialog);\n  });\n};\n","import { Keyboard } from \"foundation-sites\"\n\nconst focusGuardClass = \"focusguard\";\nconst focusableNodes = [\"A\", \"IFRAME\", \"OBJECT\", \"EMBED\"];\nconst focusableDisableableNodes = [\"BUTTON\", \"INPUT\", \"TEXTAREA\", \"SELECT\"];\n\nexport default class FocusGuard {\n  constructor(container) {\n    this.container = container;\n    this.guardedElement = null;\n  }\n\n  trap(element) {\n    if (this.guardedElement) {\n      Keyboard.releaseFocus($(this.guardedElement));\n    }\n\n    this.enable();\n    this.guardedElement = element;\n\n    // Call the release focus first so that we don't accidentally add the\n    // keyboard trap twice. Note that the Foundation methods expect the elements\n    // to be jQuery elements which is why we pass them through jQuery.\n    Keyboard.releaseFocus($(element));\n    Keyboard.trapFocus($(element));\n  }\n\n  enable() {\n    // Check if the guards already exists due to some other dialog\n    const guards = this.container.querySelectorAll(`:scope > .${focusGuardClass}`);\n    if (guards.length > 0) {\n      // Make sure the guards are the first and last element as there have\n      // been changes in the DOM.\n      guards.forEach((guard) => {\n        if (guard.dataset.position === \"start\") {\n          this.container.prepend(guard);\n        } else {\n          this.container.append(guard);\n        }\n      })\n\n      return;\n    }\n\n    // Add guards at the start and end of the document and attach their focus\n    // listeners\n    const startGuard = this.createFocusGuard(\"start\");\n    const endGuard = this.createFocusGuard(\"end\");\n\n    this.container.prepend(startGuard);\n    this.container.append(endGuard);\n\n    startGuard.addEventListener(\"focus\", () => this.handleContainerFocus(startGuard));\n    endGuard.addEventListener(\"focus\", () => this.handleContainerFocus(endGuard));\n  }\n\n  disable() {\n    const guards = this.container.querySelectorAll(`:scope > .${focusGuardClass}`);\n    guards.forEach((guard) => guard.remove());\n\n    if (this.guardedElement) {\n      // Note that the Foundation methods expect the elements to be jQuery\n      // elements which is why we pass them through jQuery.\n      Keyboard.releaseFocus($(this.guardedElement));\n      this.guardedElement = null;\n    }\n  }\n\n  createFocusGuard(position) {\n    const guard = document.createElement(\"div\");\n    guard.className = focusGuardClass;\n    guard.dataset.position = position;\n    guard.tabIndex = 0;\n    guard.setAttribute(\"aria-hidden\", \"true\");\n\n    return guard;\n  };\n\n  handleContainerFocus(guard) {\n    if (!this.guardedElement) {\n      guard.blur();\n      return;\n    }\n\n    const visibleNodes = Array.from(this.guardedElement.querySelectorAll(\"*\")).filter((item) => {\n      return this.isVisible(item);\n    });\n\n    let target = null;\n    if (guard.dataset.position === \"start\") {\n      // Focus at the start guard, so focus the first focusable element after that\n      for (let ind = 0; ind < visibleNodes.length; ind += 1) {\n        if (!this.isFocusGuard(visibleNodes[ind]) && this.isFocusable(visibleNodes[ind])) {\n          target = visibleNodes[ind];\n          break;\n        }\n      }\n    } else {\n      // Focus at the end guard, so focus the first focusable element after that\n      for (let ind = visibleNodes.length - 1; ind >= 0; ind -= 1) {\n        if (!this.isFocusGuard(visibleNodes[ind]) && this.isFocusable(visibleNodes[ind])) {\n          target = visibleNodes[ind];\n          break;\n        }\n      }\n    }\n\n    if (target) {\n      target.focus();\n    } else {\n      // If no focusable element was found, blur the guard focus\n      guard.blur();\n    }\n  };\n\n  isVisible(element) {\n    return element.offsetWidth > 0 || element.offsetHeight > 0;\n  }\n\n  isFocusGuard(element) {\n    return element.classList.contains(focusGuardClass);\n  }\n\n  isFocusable(element) {\n    if (focusableNodes.indexOf(element.nodeName) > -1) {\n      return true;\n    }\n    if (focusableDisableableNodes.indexOf(element.nodeName) > -1 || element.getAttribute(\"contenteditable\")) {\n      if (element.getAttribute(\"disabled\")) {\n        return false;\n      }\n      return true;\n    }\n\n    const tabindex = parseInt(element.getAttribute(\"tabindex\"), 10);\n    if (!isNaN(tabindex) && tabindex >= 0) {\n      return true;\n    }\n\n    return false;\n  }\n}\n","/* eslint-disable no-invalid-this */\n\nimport svg4everybody from \"svg4everybody\"\nimport formDatePicker from \"src/decidim/form_datepicker\"\nimport fixDropdownMenus from \"src/decidim/dropdowns_menus\"\nimport createQuillEditor from \"src/decidim/editor\"\nimport Configuration from \"src/decidim/configuration\"\nimport ExternalLink from \"src/decidim/external_link\"\nimport updateExternalDomainLinks from \"src/decidim/external_domain_warning\"\nimport InputCharacterCounter from \"src/decidim/input_character_counter\"\nimport FormValidator from \"src/decidim/form_validator\"\nimport CommentsComponent from \"src/decidim/comments/comments.component\"\nimport DataPicker from \"src/decidim/data_picker\"\nimport FormFilterComponent from \"src/decidim/form_filter\"\nimport addInputEmoji from \"src/decidim/input_emoji\"\nimport dialogMode from \"src/decidim/dialog_mode\"\nimport FocusGuard from \"src/decidim/focus_guard\"\nimport backToListLink from \"src/decidim/back_to_list\"\n\nwindow.Decidim = window.Decidim || {};\nwindow.Decidim.config = new Configuration()\nwindow.Decidim.ExternalLink = ExternalLink;\nwindow.Decidim.InputCharacterCounter = InputCharacterCounter;\nwindow.Decidim.FormValidator = FormValidator;\nwindow.Decidim.DataPicker = DataPicker;\nwindow.Decidim.CommentsComponent = CommentsComponent;\nwindow.Decidim.addInputEmoji = addInputEmoji;\n\n$(() => {\n  window.theDataPicker = new DataPicker($(\".data-picker\"));\n  window.focusGuard = new FocusGuard(document.querySelector(\"body\"));\n\n  $(document).foundation();\n  $(document).on(\"open.zf.reveal\", (ev) => {\n    dialogMode($(ev.target));\n  });\n\n  // Trap the focus within the mobile menu if the user enters it. This is an\n  // accessibility feature forcing the focus within the offcanvas container\n  // which holds the mobile menu.\n  $(\"#offCanvas\").on(\"openedEnd.zf.offCanvas\", (ev) => {\n    ev.target.querySelector(\".main-nav a\").focus();\n    window.focusGuard.trap(ev.target);\n  }).on(\"closed.zf.offCanvas\", () => {\n    window.focusGuard.disable();\n  });\n\n  fixDropdownMenus();\n\n  svg4everybody();\n\n  // Prevent data-open buttons e.g. from submitting the underlying form in\n  // authorized action buttons.\n  $(\"[data-open]\").on(\"click\", (event) => {\n    event.preventDefault();\n  });\n\n  formDatePicker();\n\n  $(\".editor-container\").each((_idx, container) => {\n    createQuillEditor(container);\n  });\n\n  $('a[target=\"_blank\"]').each((_i, elem) => {\n    const $link = $(elem);\n    $link.data(\"external-link\", new ExternalLink($link));\n  });\n\n  // Mount comments component\n  $(\"[data-decidim-comments]\").each((_i, el) => {\n    const $el = $(el);\n    const comments = new CommentsComponent($el, $el.data(\"decidim-comments\"));\n    comments.mountComponent();\n    $(el).data(\"comments\", comments);\n  });\n\n  $(\"form.new_filter\").each(function () {\n    const formFilter = new FormFilterComponent($(this));\n\n    formFilter.mountComponent();\n  })\n\n  updateExternalDomainLinks($(\"body\"))\n\n  addInputEmoji()\n\n  backToListLink(document.querySelectorAll(\".js-back-to-list\"));\n});\n","/**\n * Changes \"Back to list\" links to the one saved in sessionStorage API\n * To apply this to a link, at least one element must have the class \"js-back-to-list\".\n * For this to work it needs the filteredParams in SessionStorage, that's saved on FormFilterComponent.\n * @param {NodeList} links - Hyperlinks elements that point to the filters page that will use the fitererd params\n * @returns {void}\n */\nexport default function backToListLink(links) {\n\n  if (!links) {\n    return;\n  }\n\n  if (!window.sessionStorage) {\n    return;\n  }\n\n  const filteredParams = JSON.parse(sessionStorage.getItem(\"filteredParams\")) || {};\n  links.forEach((link) => {\n    const href = link.getAttribute(\"href\");\n    if (filteredParams[href]) {\n      link.setAttribute(\"href\", filteredParams[href]);\n    }\n  });\n\n}\n","import select from \"select\";\n\n/**\n * This provides functionality to add clipboard copy functionality to buttons\n * on the page. The element to be copied from has to be defined for the button\n * using a `data` attribute and the target element has to be a form input.\n *\n * Usage:\n *   1. Create the button:\n *     <button class=\"button\"\n *      data-clipboard-copy=\"#target-input-element\"\n *      data-clipboard-copy-label=\"Copied!\"\n *      data-clipboard-copy-message=\"The text was successfully copied to clipboard.\"\n *      aria-label=\"Copy the text to clipboard\">\n *        <%= icon \"clipboard\", role: \"presentation\", \"aria-hidden\": true %>\n *        Copy to clipboard\n *    </button>\n *\n *   2. Make sure the target element exists on the page:\n *     <input id=\"target-input-element\" type=\"text\" value=\"This text will be copied.\">\n *\n * Options through data attributes:\n * - `data-clipboard-copy` = The jQuery selector for the target input element\n *   where text will be copied from.\n * - `data-clipboard-copy-label` = The label that will be shown in the button\n *   after a succesful copy.\n * - `data-clipboard-copy-message` = The text that will be announced to screen\n *   readers after a successful copy.\n */\n\n// How long the \"copied\" text is shown in the copy element after successful\n// copy.\nconst CLIPBOARD_COPY_TIMEOUT = 5000;\n\n$(() => {\n  $(document).on(\"click\", \"[data-clipboard-copy]\", (ev) => {\n    const $el = $(ev.target);\n    if (!$el.data(\"clipboard-copy\") || $el.data(\"clipboard-copy\").length < 1) {\n      return;\n    }\n\n    const $input = $($el.data(\"clipboard-copy\"));\n    if ($input.length < 1 || !$input.is(\"input, textarea, select\")) {\n      return;\n    }\n\n    // Get the available text to clipboard.\n    const selectedText = select($input[0]);\n    if (!selectedText || selectedText.length < 1) {\n      return;\n    }\n\n    // Move the selected text to clipboard.\n    const $temp = $(`<textarea>${selectedText}</textarea>`).css({\n      width: 1,\n      height: 1\n    });\n    $el.after($temp);\n    $temp.select();\n\n    const copyDone = () => {\n      $temp.remove();\n      $el.focus();\n    };\n    try {\n      // document.execCommand is deprecated but the Clipboard API is not\n      // supported by IE (which unfortunately is still a thing).\n      if (!document.execCommand(\"copy\")) {\n        return;\n      }\n    } catch (err) {\n      copyDone();\n      return;\n    }\n    copyDone();\n\n    // Change the label to indicate the copying was successful.\n    const label = $el.data(\"clipboard-copy-label\");\n    if (label) {\n      let to = $el.data(\"clipboard-copy-label-timeout\");\n      if (to) {\n        clearTimeout(to);\n      }\n\n      if (!$el.data(\"clipboard-copy-label-original\")) {\n        $el.data(\"clipboard-copy-label-original\", $el.html());\n      }\n\n      $el.html(label);\n      to = setTimeout(() => {\n        $el.html($el.data(\"clipboard-copy-label-original\"));\n        $el.removeData(\"clipboard-copy-label-original\");\n        $el.removeData(\"clipboard-copy-label-timeout\");\n      }, CLIPBOARD_COPY_TIMEOUT);\n      $el.data(\"clipboard-copy-label-timeout\", to)\n    }\n\n    // Alert the screen reader what just happened (the link was copied).\n    let message = $el.data(\"clipboard-copy-message\");\n    if (message) {\n      let $msg = $el.data(\"clipboard-message-element\");\n      if ($msg) {\n        if ($msg.html() === message) {\n          // Try to hint the screen reader to re-read the text in the message\n          // element.\n          message += \"&nbsp;\";\n        }\n      } else {\n        $msg = $('<div aria-role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" class=\"clipboard-announcement show-for-sr\"></div>');\n        $el.after($msg);\n        $el.data(\"clipboard-message-element\", $msg);\n      }\n\n      // Add the non breaking space always to content to try to force the\n      // screen reader to reannounce the added text.\n      $msg.html(message);\n    }\n  });\n});\n","import \"@zeitiger/appendaround\"\n\n$(() => {\n  let $appendableElements = $(\".js-append\");\n  $appendableElements.appendAround();\n})\n","import Rails from \"@rails/ujs\";\n\n// Make the remote form submit buttons disabled when the form is being\n// submitted to avoid multiple submits.\ndocument.addEventListener(\"ajax:beforeSend\", (ev) => {\n  if (!ev.target.matches(\"form[data-remote]\")) {\n    return;\n  }\n\n  ev.target.querySelectorAll(\"[type=submit]\").forEach((submit) => {\n    submit.disabled = true;\n  });\n});\ndocument.addEventListener(\"ajax:complete\", (ev) => {\n  if (!ev.target.matches(\"form[data-remote]\")) {\n    return;\n  }\n\n  ev.target.querySelectorAll(\"[type=submit]\").forEach((submit) => {\n    submit.disabled = false;\n  });\n});\n\n// The forms that are attached to Foundation Abide do not work properly with\n// Rails UJS Ajax forms that have the `data-remote` attribute attached to\n// them. The reason is that in case Foundation Abide sees the form as valid,\n// it will submit it normally bypassing the Rails UJS functionality.\n// The submit events happens through jQuery in Foundation Abide which is why\n// we need to bind the event with jQuery.\n$(document).on(\"submit\", \"form[data-remote][data-abide]\", (ev) => {\n  ev.preventDefault();\n\n  if (ev.target.querySelectorAll(\"[data-invalid]\").length > 0) {\n    return;\n  }\n\n  Reflect.apply(Rails.handleRemote, ev.target, [ev]);\n});\n","/* eslint-disable no-invalid-this */\n\nimport Foundation from \"foundation-sites\"\n\n$(() => {\n  // True if small devices\n  if (!Foundation.MediaQuery.atLeast(\"medium\")) {\n    const $speaker = $(\".js-conference\")\n\n    $speaker.hover(function () {\n      const top = $(window).scrollTop() + ($(window).height() * 0.1)\n      $(this).find(\".js-bio\").css(\"top\", top)\n    })\n  }\n});\n","import { pushState, registerCallback } from \"src/decidim/history\"\n\nconst initializeListingOptionsMenu = (options) => {\n  $(document).on(\"click\", `${options.containerSelector} a`, (event) => {\n    const $target = $(event.target);\n\n    $target.parents(\".menu\").find(\"a:first\").text($target.text());\n\n    pushState($target.attr(\"href\"));\n  })\n\n  registerCallback(options.callbackName, () => {\n    const url = window.location.toString();\n    const match = url.match(/${options.urlParameter}=([^&]*)/);\n    const $targetMenu = $(`${options.containerSelector} .menu`);\n    let value = $targetMenu.find(\".menu a:first\").data(options.dataAttribute);\n\n    if (match) {\n      value = match[1];\n    }\n\n    const linkText = $targetMenu.find(`.menu a[data-${options.dataAttribute}=\"${value}\"]`).text();\n\n    $targetMenu.find(\"a:first\").text(linkText);\n  });\n};\n\n$(() => {\n  initializeListingOptionsMenu({\n    containerSelector: \".order-by\",\n    callbackName: \"orders\",\n    urlParameter: \"order\",\n    dataAttribute: \"order\"\n  });\n  initializeListingOptionsMenu({\n    containerSelector: \".results-per-page\",\n    callbackName: \"results_per_page\",\n    urlParameter: \"per_page\",\n    dataAttribute: \"per-page-option\"\n  });\n});\n","import dayjs from \"dayjs\"\n\n$(() => {\n  const $impersonationWarning = $(\".impersonation-warning\");\n  if ($impersonationWarning.length) {\n    const endsAt = dayjs($impersonationWarning.data(\"session-ends-at\"));\n    const exitInterval = setInterval(() => {\n      const diff = (endsAt - dayjs()) / 60000;\n      const diffInMinutes = Math.round(diff);\n      $impersonationWarning.find(\".minutes\").html(diffInMinutes);\n\n      if (diff <= 0) {\n        window.location.reload();\n      }\n    }, 1000);\n\n    // Prevent reload when page is already unloading, otherwise it may cause infinite reloads.\n    window.addEventListener(\"beforeunload\", () => {\n      clearInterval(exitInterval);\n      return;\n    });\n  }\n});\n","import Cookies from \"js-cookie\";\n\nclass ConsentManager {\n  // Options should contain the following keys:\n  // - modal - HTML element of the data consent modal (e.g. \"<div id=\"dc-modal\">Foo bar</div>\")\n  // - categories - Available data consent categories (e.g. [\"essential\", \"preferences\", \"analytics\", \"marketing\"])\n  // - cookieName - Name of the cookie saved in the browser (e.g. \"decidim-consent\")\n  // - warningElement - HTML element to be shown when user has not given the necessary data consent to display the content.\n  constructor(options) {\n    this.modal = options.modal;\n    this.categories = options.categories;\n    this.cookieName = options.cookieName;\n    this.cookie = Cookies.get(this.cookieName);\n    this.warningElement = options.warningElement;\n    if (this.cookie) {\n      this.updateState(JSON.parse(this.cookie));\n    } else {\n      this.updateState({});\n    }\n  }\n\n  updateState(newState) {\n    this.state = newState;\n    Cookies.set(this.cookieName, JSON.stringify(this.state), {\n      domain: document.location.host.split(\":\")[0],\n      sameSite: \"Lax\",\n      expires: 365,\n      secure: window.location.protocol === \"https:\"\n    });\n    this.updateModalSelections();\n    this.triggerState();\n  }\n\n  triggerJavaScripts() {\n    document.querySelectorAll(\"script[type='text/plain'][data-consent]\").forEach((script) => {\n      if (this.state[script.dataset.consent]) {\n        const activeScript = document.createElement(\"script\");\n        if (script.src.length > 0) {\n          activeScript.src = script.src;\n        } else {\n          activeScript.innerHTML = script.innerHTML;\n        }\n        script.parentNode.replaceChild(activeScript, script);\n      }\n    });\n\n    const event = new CustomEvent(\"dataconsent\", { detail: this.state });\n    document.dispatchEvent(event);\n  }\n\n  triggerIframes() {\n    if (this.allAccepted()) {\n      document.querySelectorAll(\".disabled-iframe\").forEach((original) => {\n        if (original.childNodes && original.childNodes.length) {\n          const content = Array.from(original.childNodes).find((childNode) => {\n            return childNode.nodeType === Node.COMMENT_NODE;\n          });\n          if (!content) {\n            return;\n          }\n          const newElement = document.createElement(\"div\");\n          newElement.innerHTML = content.nodeValue;\n          original.parentNode.replaceChild(newElement.firstElementChild, original);\n        }\n      });\n    } else {\n      document.querySelectorAll(\"iframe\").forEach((original) => {\n        const newElement = document.createElement(\"div\");\n        newElement.className = \"disabled-iframe\";\n        newElement.appendChild(document.createComment(`${original.outerHTML}`));\n        original.parentNode.replaceChild(newElement, original);\n      });\n    }\n  }\n\n  triggerWarnings() {\n    document.querySelectorAll(\".disabled-iframe\").forEach((original) => {\n      if (original.querySelector(\".dataconsent-warning\")) {\n        return;\n      }\n\n      let cloned = this.warningElement.cloneNode(true);\n      cloned.classList.remove(\"hide\");\n      original.appendChild(cloned);\n    });\n  }\n\n  triggerState() {\n    this.triggerJavaScripts();\n    this.triggerIframes();\n    this.triggerWarnings();\n  }\n\n  allAccepted() {\n    return this.categories.every((category) => {\n      return this.state[category] === true;\n    });\n  }\n\n  updateModalSelections() {\n    const categoryElements = this.modal.querySelectorAll(\".category-wrapper\");\n\n    categoryElements.forEach((categoryEl) => {\n      const categoryInput = categoryEl.querySelector(\"input\");\n      if (this.state && this.state[categoryInput.name]) {\n        categoryInput.checked = true;\n      } else if (!categoryInput.disabled) {\n        categoryInput.checked = false;\n      }\n    });\n  }\n\n  saveSettings(newState) {\n    this.updateState(newState);\n  }\n\n  acceptAll() {\n    const newState = {};\n    this.categories.forEach((category) => {\n      newState[category] = true;\n    });\n    this.updateState(newState);\n  }\n\n  rejectAll() {\n    this.updateState({\n      essential: true\n    });\n  }\n\n  getState() {\n    return this.state;\n  }\n}\n\nexport default ConsentManager\n","import ConsentManager from \"src/decidim/data_consent/consent_manager\";\n\nconst initDialog = (manager) => {\n  if (Object.keys(manager.state).length > 0) {\n    return;\n  }\n  const dialogWrapper = document.querySelector(\"#dc-dialog-wrapper\");\n  dialogWrapper.classList.remove(\"hide\");\n\n  const acceptAllButton = dialogWrapper.querySelector(\"#dc-dialog-accept\");\n  const rejectAllButton = dialogWrapper.querySelector(\"#dc-dialog-reject\");\n  const settingsButton = dialogWrapper.querySelector(\"#dc-dialog-settings\");\n\n  acceptAllButton.addEventListener(\"click\", () => {\n    manager.acceptAll();\n    dialogWrapper.style.display = \"none\";\n  });\n\n  rejectAllButton.addEventListener(\"click\", () => {\n    manager.rejectAll();\n    dialogWrapper.style.display = \"none\";\n  });\n\n  settingsButton.addEventListener(\"click\", () => {\n    dialogWrapper.style.display = \"none\";\n  });\n}\n\nconst initModal = (manager) => {\n  const categoryElements = manager.modal.querySelectorAll(\".category-wrapper\");\n\n  categoryElements.forEach((categoryEl) => {\n    const categoryButton = categoryEl.querySelector(\".dc-title\");\n    const categoryDescription = categoryEl.querySelector(\".dc-description\");\n    categoryButton.addEventListener(\"click\", () => {\n      const hidden = categoryDescription.classList.contains(\"hide\");\n      if (hidden) {\n        categoryButton.classList.add(\"open\");\n        categoryDescription.classList.remove(\"hide\");\n      } else {\n        categoryButton.classList.remove(\"open\");\n        categoryDescription.classList.add(\"hide\");\n      }\n    })\n  })\n\n  const acceptAllButton = manager.modal.querySelector(\"#dc-modal-accept\");\n  const rejectAllButton = manager.modal.querySelector(\"#dc-modal-reject\");\n  const saveSettingsButton = manager.modal.querySelector(\"#dc-modal-save\");\n\n  acceptAllButton.addEventListener(\"click\", () => {\n    manager.acceptAll();\n  })\n\n  rejectAllButton.addEventListener(\"click\", () => {\n    manager.rejectAll();\n  })\n\n  saveSettingsButton.addEventListener(\"click\", () => {\n    let newState = {};\n    manager.categories.forEach((category) => {\n      const accepted = manager.modal.querySelector(`input[name='${category}']`).checked;\n      if (accepted) {\n        newState[category] = true;\n      }\n    })\n    manager.saveSettings(newState);\n  })\n}\n\nconst initDisabledIframes = (manager) => {\n  const disabledIframes = document.querySelectorAll(\".disabled-iframe\")\n  if (manager.allAccepted()) {\n    disabledIframes.forEach((elem) => {\n      const iframe = document.createElement(\"iframe\")\n      iframe.setAttribute(\"src\", elem.getAttribute(\"src\"));\n      iframe.className = elem.classList.toString();\n      iframe.setAttribute(\"allowfullscreen\", elem.getAttribute(\"allowfullscreen\"));\n      iframe.setAttribute(\"frameborder\", elem.getAttribute(\"frameborder\"));\n      elem.parentElement.appendChild(iframe);\n      elem.remove();\n    })\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const modal = document.querySelector(\"#dc-modal\");\n  if (!modal) {\n    return;\n  }\n\n  const categories = [...modal.querySelectorAll(\".category-wrapper\")].map((el) => el.dataset.id)\n  const manager = new ConsentManager({\n    modal: modal,\n    categories: categories,\n    cookieName: window.Decidim.config.get(\"consent_cookie_name\"),\n    warningElement: document.querySelector(\".dataconsent-warning\")\n  });\n\n  initDisabledIframes(manager);\n  initModal(manager, categories);\n  initDialog(manager);\n});\n","/* eslint no-unused-vars: 0 */\n/* eslint id-length: [\"error\", { \"exceptions\": [\"$\"] }] */\n\nimport $ from \"jquery\"\nimport Quill from \"quill\"\nimport Rails from \"@rails/ujs\"\n\nimport \"core-js/stable\";\nimport \"regenerator-runtime/runtime\";\nimport morphdom from \"morphdom\"\n// Export variable to make it available in .js.erb templates\nwindow.morphdom = morphdom\nimport \"src/decidim/vendor/foundation-datepicker\"\nimport \"src/decidim/foundation_datepicker_locales\"\nimport \"src/decidim/vendor/modernizr\"\nimport \"src/decidim/vendor/social-share-button\"\n\nimport \"src/decidim/input_tags\"\nimport \"src/decidim/input_hashtags\"\nimport \"src/decidim/input_mentions\"\nimport \"src/decidim/input_multiple_mentions\"\nimport \"src/decidim/input_character_counter\"\nimport \"src/decidim/input_autojump\"\nimport \"src/decidim/index\"\nimport \"src/decidim/history\"\nimport \"src/decidim/callout\"\nimport \"src/decidim/clipboard\"\nimport \"src/decidim/append_elements\"\nimport \"src/decidim/user_registrations\"\nimport \"src/decidim/account_form\"\nimport \"src/decidim/data_picker\"\nimport \"src/decidim/dropdowns_menus\"\nimport \"src/decidim/append_redirect_url_to_modals\"\nimport \"src/decidim/form_attachments\"\nimport \"src/decidim/form_validator\"\nimport \"src/decidim/form_remote\"\nimport \"src/decidim/ajax_modals\"\nimport \"src/decidim/conferences\"\nimport \"src/decidim/tooltip_keep_on_hover\"\nimport \"src/decidim/diff_mode_dropdown\"\nimport \"src/decidim/conversations\"\nimport \"src/decidim/delayed\"\nimport \"src/decidim/icon\"\nimport \"src/decidim/vizzs\"\nimport \"src/decidim/responsive_horizontal_tabs\"\nimport \"src/decidim/security/selfxss_warning\"\nimport \"src/decidim/session_timeouter\"\nimport \"src/decidim/configuration\"\nimport \"src/decidim/floating_help\"\nimport \"src/decidim/confirm\"\nimport \"src/decidim/comments/comments\"\nimport \"src/decidim/results_listing\"\nimport \"src/decidim/represent_user_group\"\nimport \"src/decidim/impersonation\"\nimport \"src/decidim/start_conversation_dialog\"\nimport \"src/decidim/notifications\"\nimport \"src/decidim/identity_selector_dialog\"\nimport \"src/decidim/gallery\"\nimport \"src/decidim/direct_uploads/upload_field\"\nimport \"src/decidim/back_to_list\"\nimport \"src/decidim/data_consent\"\n\n// CSS\nimport \"entrypoints/decidim_core.scss\"\n\n// Import from the Rails instance application\nimport \"src/decidim/decidim_application\"\n\n// Images\nrequire.context(\"../images\", true)\n\n// This needs to be loaded after confirm dialog to bind properly\nRails.start()\n","var map = {\n\t\"./decidim/avatar-multiuser.png\": 71105,\n\t\"./decidim/brands/google.svg\": 90422,\n\t\"./decidim/cc-badge.png\": 2916,\n\t\"./decidim/decidim-logo.svg\": 76993,\n\t\"./decidim/default-avatar.svg\": 74953,\n\t\"./decidim/gamification/badges/decidim_gamification_badges_followers.svg\": 28007,\n\t\"./decidim/icons.svg\": 97420,\n\t\"./decidim/pattern.png\": 34482,\n\t\"./decidim/placeholder.jpg\": 72391,\n\t\"./decidim/vendor/leaflet/layers-2x.png\": 11409,\n\t\"./decidim/vendor/leaflet/layers.png\": 17768,\n\t\"./decidim/vendor/leaflet/marker-icon-2x.png\": 80141,\n\t\"./decidim/vendor/leaflet/marker-icon.png\": 92934,\n\t\"./decidim/vendor/leaflet/marker-shadow.png\": 92823,\n\t\"./decidim/vendor/social-share-button/delicious.svg\": 31232,\n\t\"./decidim/vendor/social-share-button/douban.svg\": 33496,\n\t\"./decidim/vendor/social-share-button/email.svg\": 98535,\n\t\"./decidim/vendor/social-share-button/facebook.svg\": 48545,\n\t\"./decidim/vendor/social-share-button/google_bookmark.svg\": 69101,\n\t\"./decidim/vendor/social-share-button/google_plus.svg\": 77258,\n\t\"./decidim/vendor/social-share-button/hacker_news.svg\": 58104,\n\t\"./decidim/vendor/social-share-button/linkedin.svg\": 47294,\n\t\"./decidim/vendor/social-share-button/odnoklassniki.svg\": 73595,\n\t\"./decidim/vendor/social-share-button/pinterest.svg\": 58077,\n\t\"./decidim/vendor/social-share-button/qq.svg\": 98080,\n\t\"./decidim/vendor/social-share-button/reddit.svg\": 33050,\n\t\"./decidim/vendor/social-share-button/telegram.svg\": 56588,\n\t\"./decidim/vendor/social-share-button/tumblr.svg\": 30404,\n\t\"./decidim/vendor/social-share-button/twitter.svg\": 52654,\n\t\"./decidim/vendor/social-share-button/vkontakte.svg\": 47718,\n\t\"./decidim/vendor/social-share-button/wechat.svg\": 66786,\n\t\"./decidim/vendor/social-share-button/weibo.svg\": 44168,\n\t\"./decidim/vendor/social-share-button/whatsapp.svg\": 77858,\n\t\"./decidim/vendor/social-share-button/xing.svg\": 80992\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 32967;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/decidim-packs/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t2835: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdecidim_app\"] = self[\"webpackChunkdecidim_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [2415,6795,6690,2619,4705,2639,9093,3072,518], function() { return __webpack_require__(61831); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","$","editUserForm","document","querySelector","passwordChange","passwordFields","querySelectorAll","length","togglePasswordFieldValidators","enabled","attr","forEach","field","value","on","initializeAccountForm","$deleteAccountForm","$deleteAccountModalForm","$openModalButton","$modal","event","reasonValue","find","val","foundation","error","console","preventDefault","stopPropagation","initializeDeleteAccount","target","concat","data","redirectUrl","appendTo","index","href","querystring","jQuery","param","match","remove","indexOf","url","parameter","urlParts","split","urlBase","shift","queryString","join","prefix","encodeURIComponent","parts","lastIndexOf","splice","removeUrlParameter","$callout","setTimeout","focus","html","ready","window","scrollTo","top","offset","behavior","$allDiffViews","$target","type","$selected","parents","text","trim","hasClass","addClass","removeClass","$visibleDiffViewsId","not","first","slice","$visibleDiffViews","filter","localStorage","getDismissedHelpers","serialized","getItem","dismissedHelpers","each","_index","elem","id","ev","includes","setItem","_toConsumableArray","addDismissedHelper","callbacks","registerCallback","callbackId","callback","unregisterCallback","pushState","state","arguments","undefined","history","replaceState","onpopstate","isTrusted","hasOwnProperty","button","identitiesUrl","userIdentitiesDialog","click","ajax","done","response","trigger","liTag","method","urlDataAttr","dataType","success","$inputs","selectionStart","selectionEnd","originalEvent","key","dataset","jumpNext","parseInt","maxLength","next","keyCode","jumpPrev","prev","$notificationsBellIcon","$wrapper","$section","$noNotificationsText","$pagination","emptyNotifications","$item","fadeOut","$checkbox","$userGroupFields","toggle","is","prop","$responsiveTabBlock","closest","innerWidth","toggleClass","process","allMessages","Decidim","config","get","messages","selfxssWarning","log","title","description","addUsersConversationDialog","this","$userRegistrationForm","inputSelector","newsletterSelector","$newsletterModal","setGroupFieldsVisibility","hide","show","newsletterChecked","check","submit","n","e","s","o","_typeof","t","f","l","_version","_config","classPrefix","enableClasses","enableJSClass","usePrefixes","_q","addTest","push","name","fn","options","addAsyncTest","Modernizr","prototype","r","documentElement","c","nodeName","toLowerCase","a","i","aliases","Boolean","className","baseVal","RegExp","replace","u","SocialShareButton","openUrl","width","height","left","screen","opt","open","share","el","getAttribute","path","params","site","appkey","$parent","parentNode","img","via","desc","ga","GoogleAnalyticsObject","location","hashtags","viaStr","SocialShareWeChatButton","Error","qrcode","decodeURIComponent","header","footer","getTumblrExtra","cutomData","source","quote","_source","whatsappAppUrl","updateSubmitButton","$fieldContainer","$selectedItems","$form","$submitButton","children","mentionsModal","$searchInput","selected","iconsPath","removeLabel","removeRecipient","emptyFocusElement","createElement","tabIndex","before","autoComplete","AutoComplete","dataMatchKeys","dataSource","query","post","then","users","dataFilter","list","item","modifyResult","element","avatarUrl","nickname","directMessagesEnabled","append","directMessagesDisabled","membersCount","selection","detail","label","setInput","evt","tagName","focusElement","nextElementSibling","previousElementSibling","identifier","COUNT_KEY","DEFAULT_MESSAGES","charactersAtLeast","one","other","charactersLeft","MESSAGES","InputCharacterCounter","input","_this","_classCallCheck","$input","minCharacters","maxCharacters","describeByCounter","announceThreshold","Math","floor","announceEveryThreshold","targetId","random","toString","substr","parent","after","$srTarget","$userInput","Quill","editor","siblings","root","initialize","updateInputLength","previousInputLength","inputLength","bindEvents","setDescribedBy","active","removeAttr","_this2","handleInput","updateStatus","updateScreenReaderStatus","addEventListener","getLength","checkScreenReaderUpdate","currentLength","getInputLength","srLength","getInputDirection","announcedAt","showMessages","message","remaining","_message","dispatchEvent","CustomEvent","getMessages","getScreenReaderLength","extend","createCharacterCounter","_i","DEFAULT_ATTRIBUTES","role","EXCLUDE_CLASSES","EXCLUDE_ANCESTOR_CLASSES","EXCLUDE_REL","externalLink","ExternalLink","link","$link","setup","some","cls","rel","hasAttribute","spacer","generateElement","content","generateIcon","generateScreenReaderLabel","iconKey","attributes","iconAttributes","ariaLabel","Reflect","deleteProperty","htmlAttributes","Object","keys","newKey","ucw","elHtml","$el","prepend","icon","updateExternalDomainLinks","whitelist","pathname","domain","_n","externalHref","correctErrors","FormValidator","form","handleError","announceFormError","$announce","_ev","CommentsComponent","$element","commentableGid","commentsUrl","rootDepth","order","lastCommentId","pollingInterval","singleComment","toggleTranslations","_getUID","mounted","_initializeComments","_fetchComments","_onInitOrder","_stopPolling","off","removeEventListener","_onTextInput","threadHtml","fromCurrentUser","$comment","$threads","_addComment","_finalizeCommentCreation","commentId","replyHtml","$replies","Date","setUTCMilliseconds","_this3","$add","$opinionButtons","$text","_onToggleOpinion","$container","characterCounter","_pollComments","_this4","pollTimeout","_this5","successCallback","Rails","URLSearchParams","_objectSpread","clearTimeout","_setLoading","$btn","$selectedState","$alignment","$submit","addInputEmoji","containers","_elem$closest","picker","EmojiButton","position","rootElement","parentElement","body","zIndex","reveal","style","overflowY","wrapper","btnContainer","btn","innerHTML","insertBefore","appendChild","handlerPicker","togglePicker","removeAttribute","setAttribute","_ref","emoji","Event","focusGuardClass","focusableNodes","focusableDisableableNodes","FocusGuard","container","guardedElement","Keyboard","enable","guards","guard","startGuard","createFocusGuard","endGuard","handleContainerFocus","visibleNodes","Array","from","isVisible","ind","isFocusGuard","isFocusable","_ind","blur","offsetWidth","offsetHeight","classList","contains","tabindex","isNaN","Configuration","DataPicker","theDataPicker","focusGuard","dialog","$dialog","$title","$visibleReveal","trap","disable","svg4everybody","formDatePicker","_idx","createQuillEditor","comments","mountComponent","FormFilterComponent","links","sessionStorage","filteredParams","JSON","parse","backToListLink","selectedText","select","$temp","css","copyDone","execCommand","err","to","removeData","$msg","appendAround","matches","disabled","apply","Foundation","hover","scrollTop","initializeListingOptionsMenu","containerSelector","callbackName","$targetMenu","dataAttribute","linkText","urlParameter","$impersonationWarning","endsAt","dayjs","exitInterval","setInterval","diff","diffInMinutes","round","reload","clearInterval","ConsentManager","modal","categories","cookieName","cookie","Cookies","warningElement","updateState","newState","stringify","host","sameSite","expires","secure","protocol","updateModalSelections","triggerState","script","consent","activeScript","src","replaceChild","allAccepted","original","childNodes","childNode","nodeType","Node","COMMENT_NODE","newElement","nodeValue","firstElementChild","createComment","outerHTML","cloned","cloneNode","triggerJavaScripts","triggerIframes","triggerWarnings","every","category","categoryEl","categoryInput","checked","essential","map","manager","disabledIframes","iframe","initDisabledIframes","categoryButton","categoryDescription","add","acceptAllButton","rejectAllButton","saveSettingsButton","acceptAll","rejectAll","saveSettings","initModal","dialogWrapper","settingsButton","display","initDialog","morphdom","require","webpackContext","req","webpackContextResolve","__webpack_require__","code","resolve","module","exports","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","call","m","O","result","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","getter","__esModule","d","definition","defineProperty","enumerable","g","globalThis","Function","obj","nmd","paths","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}